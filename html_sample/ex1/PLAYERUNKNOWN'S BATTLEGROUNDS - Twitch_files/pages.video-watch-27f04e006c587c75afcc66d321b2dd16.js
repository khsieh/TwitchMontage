webpackJsonp([42],{1186:function(e,t,n){"use strict";function i(e){var t={action_name:e.actionName,action_type:"click",client_time:(new Date).getTime(),displayed_balance:e.displayedBalance,emote_level:e.emoteLevel,emote_type:e.emoteType,location:"card"};c.j.track(d.g.BitsCardInteraction,t)}function r(e){return e&&p[e]?p[e]:(c.g.error(new Error('Buy Bits card contains improperly rendered offers, or offers unknown to Science. Tracking as "buy_100"'),'Buy Bits card contains improperly rendered offers, or offers unknown to Science. Tracking as "buy_100"'),u.Buy100)}function a(e){var t={channel:e.channel,channel_id:e.channelID,available:e.available,host:"twitch.tv"};c.j.track(d.g.BitsAdsAvailability,t)}function o(e){var t={distinct_id:c.k.session.deviceID,host:"twitch.tv",request_id:e.requestID,campaign_id:e.campaignID,adblock:e.adblock};c.j.track(d.g.BitsAdsImpression,t)}function s(e){var t=c.j.getLastPageview(),n={location:t?t.location||"":"",ad_returned:null,campaign_id:e.campaignID,distinct_id:c.k.session.deviceID,host:"twitch.tv",request_id:e.requestID,request_method:e.requestMethod};c.j.track(d.g.BitsAdsRequest,n)}t.g=i,n.d(t,"a",function(){return u}),t.c=r,t.d=a,t.e=o,n.d(t,"b",function(){return l}),t.f=s;var l,c=n(2),d=n(18),u={BuyMain:"buy_main",Buy100:"buy_100",Buy500:"buy_500",Buy1000:"buy_1000",Buy1500:"buy_1500",Buy5000:"buy_5000",Buy10000:"buy_10000",Buy25000:"buy_25000",CloseCard:"menu_close",OpenCard:"menu_open",PreviewEmote:"emote_preview",WatchAd:"watch_ad",WatchAnotherAd:"watch_another_ad"},p={100:u.Buy100,500:u.Buy500,1e3:u.Buy1000,1500:u.Buy1500,5e3:u.Buy5000,1e4:u.Buy10000,25e3:u.Buy25000};!function(e){e.ShowAdButton="show_ad_button"}(l||(l={}))},1187:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={BrowseCommunities:"browse.communities",BrowseCreative:"browse.creative",ChannelIndex:"channel.index.index",ChannelDashboardAchievements:"channel.dashboard.achievements",ChannelDashboardModeration:"channel.dashboard.moderation",ChannelDashboardStreamSummary:"channel.dashboard.stream-summary",ChannelClips:"channel.clips",ChannelClipsManager:"videoManager.clips.channel",ChannelCollections:"channel.collections",ChatPopout:"chat",DevOnly:"dev",DirectoryGames:"directory.games",DirectoryPopular:"directory.popular",DirectoryGameIndex:"directory.game.index",DirectoryGameClips:"directory.game.clips",DirectoryGameVideos:"directory.game.videos",DirectoryFollowingIndex:"directory.following.index",DirectoryFollowingGames:"directory.following.games",DirectoryFollowingVideos:"directory.following.videos.video-type",DirectoryFollowingHosts:"directory.following.hosts",DirectoryFollowingLiveChannels:"directory.following.channels",DirectoryFollowingCommunities:"directory.following.communities",Index:"index",MyClipsManager:"videoManager.clips",StoreMerchPage:"store.merch",VideosPage:"videos",VideoWatchPage:"video",VideoManagerPage:"videoManager.page",VideoManagerEditPropertiesPage:"videoManager.edit",VideoManagerUploadPage:"videoManager.upload",VideoManagerUploadListPage:"videoManager.upload-list"}},1188:function(e,t,n){"use strict";function i(e){return function(t){var n=function(n){function i(t){var i=n.call(this,t)||this;return i.tracked=!1,i.referenceTracking={},i.trackPageview=function(){if(!(i.tracked||e.skip&&e.skip(i.props))){i.tracked=!0,l.k.adBlockSentinel.pageTransition();var t={};"function"==typeof e.properties?t=e.properties(i.props):e.properties&&(t=r.a({},e.properties));var n=r.a({},i.props);n.location&&n.location.state&&(t.medium=n.location.state.medium,t.content=n.location.state.content,t.content_index=n.location.state.content_index);var a=i.referenceTracking,o=a.content,s=a.medium,c=a.content_index;l.k.tracking.trackPageview(r.a({content:o,medium:s,content_index:c,location:e.location},t))}},l.g.debug("pageViewTracking",e),t.rootLatencyTracker?t.rootLatencyTracker.setLocation(e.location):l.g.warn("No latency tracker exists! This means no data will be sent to Spade.",e),i}return r.d(i,n),i.prototype.componentDidMount=function(){var e=this;this.referenceTracking=this.stripTTParams(this.props.history.location),this.trackPageview(),this.props.history.listen(function(t,n){"REPLACE"!==n&&(e.tracked=!1,e.referenceTracking={})})},i.prototype.componentDidUpdate=function(){this.trackPageview()},i.prototype.render=function(){return o.createElement(t,r.a({},this.props))},i.prototype.stripTTParams=function(e){var t=""!==e.search?a.parse(e.search):{},n={content:t.tt_content,content_index:t.tt_content_index,medium:t.tt_medium};if(delete t.tt_content,delete t.tt_content_index,delete t.tt_medium,n.medium||n.content){var i="",r=a.stringify(t);r.length>0&&(i="?"+r),this.props.history.replace({pathname:e.pathname,hash:e.hash,search:i})}return n},i}(o.Component);return Object(s.f)(n)}}var r=n(1),a=n(26),o=n(0),s=n(14),l=n(2);n.d(t,"a",function(){return i})},1189:function(e,t,n){"use strict";var i,r=n(0),a=n(491),o=n(494),s=n(492),l=n(3);n(1230);!function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"}(i||(i={}));var c;!function(e){e[e.ImageAndText=0]="ImageAndText",e[e.ImageOnly=1]="ImageOnly",e[e.TextOnly=2]="TextOnly"}(c||(c={}));var d=function(e){var t=e.bitsConfig.indexedActions[e.prefix.toLowerCase()];t||(t=Object(o.a)());var n=t.orderedTiers.find(function(t){return t.bits<=(e.amount||100)});n||(n=t.orderedTiers[0]);var d=null,u="cheermote-for-amount__cheer-amount "+(e.display===c.TextOnly||e.size===i.Small?"cheermote-for-amount__cheer-amount-small":"");e.amount&&e.display!==c.ImageOnly&&(d=r.createElement("strong",{className:u,style:{color:n.color}},e.amount));var p="cheermote-for-amount__cheer-image"+(e.size===i.Small?" cheermote-for-amount__cheer-image-small":""),m=r.createElement(s.a,{className:p,sources:Object(a.b)(n,4)});return e.display===c.TextOnly&&(m=null),r.createElement(l.S,{className:"cheermote-for-amount"},m,d)};n.d(t,"a",function(){return d}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c})},1190:function(e,t,n){"use strict";var i=n(1203),r=n(1),a=n(1198),o=function(){function e(e,t,n){this.globalsBySet=new Map,this.channelsBySet=new Map,this.indexBadges(e,this.globalsBySet,n),Array.isArray(t)&&this.indexBadges(t,this.channelsBySet,n)}return e.prototype.getBadge=function(e,t){var n=this.channelsBySet.get(e);return n&&n.has(t)?n.get(t)||null:(n=this.globalsBySet.get(e),void 0!==n?n.get(t)||null:null)},e.prototype.indexBadges=function(e,t,n){e.forEach(function(e){n&&e.clickAction===a.b&&(e=r.a({},e,{channelName:n}));var i=t.get(e.setID);i||(i=new Map,t.set(e.setID,i)),i.set(e.version,e)})},e}();new o([],[],"");n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return o})},1191:function(e,t,n){"use strict";function i(e){var t=0,n=0,i=0;return e.forEach(function(e){e.cheerAmount&&(t=Math.max(t,e.cheerAmount),n=n?Math.min(n,e.cheerAmount):e.cheerAmount,i+=e.cheerAmount)}),{total:i,smallestCheermote:n,largestCheermote:t}}function r(e){var t=e.messageBits,n=t.total,i=t.largestCheermote,r=t.smallestCheermote;if(n){var a={cheerAboveMaxBitsPerEmote:i>l.k,totalAboveBalance:n>e.balance,totalBelowCheerMinimum:n<e.cheerMinimumBits,totalBelowEmoteMinimum:r<e.emoteMinimumBits,inputLongerThanMaxBitsMessage:e.inputValue.length>l.j,inputStartsWithCommand:e.inputValue.startsWith("/")};if(Object.keys(a).some(function(e){return a[e]}))return o.a({canSpend:!1},a)}return{canSpend:!0}}function a(e){var t=e.purchaseUrl;if(t){e.trackBitsCardInteraction(Object(c.c)(e.bitsAmount));var n=t.replace("{channelID}",e.channelID),i=window.open(n,"Twitch","width=1024,height=600,scrollbars=yes");return!i||Object(s.a)()?(e.closeAllBits&&e.closeAllBits(),void e.trackBitsCardInteraction(c.a.CloseCard)):(i.focus(),i)}}t.a=i,t.c=r,t.b=a;var o=n(1),s=n(1213),l=n(320),c=n(1186)},1192:function(e,t,n){"use strict";function i(e){return"/ignore "+e}function r(e){return"/unignore "+e}function a(e){return"/mod "+e}function o(e){return"/unmod "+e}function s(e){return/^[\/]/.test(e)}function l(){return"/clear"}function c(){return"/followersoff"}function d(){return"/slowoff"}function u(e){return"/followers "+e}function p(){return"/slow"}function m(e){return"/color "+e}n.d(t,"a",function(){return h}),t.h=i,t.j=r,t.i=a,t.k=o,t.l=s,t.c=l,t.d=c,t.e=d,t.f=u,t.g=p,t.b=m;var h="/unraid"},1194:function(e,t,n){"use strict";function i(e,t){if(!e)return void r.g.warn("[onPopupClose] Attempted to observe a window that failed to open.");var n=setInterval(function(){var i=!1,r=!1;try{i=e.closed,r=!!e.success}catch(e){}(i||r)&&(t(r),e.close(),clearInterval(n))},500)}t.a=i;var r=n(2)},1195:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"badge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Badge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"setID"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:{kind:"Name",value:"image1x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"NORMAL"}}],directives:[],selectionSet:null},{kind:"Field",alias:{kind:"Name",value:"image2x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"DOUBLE"}}],directives:[],selectionSet:null},{kind:"Field",alias:{kind:"Name",value:"image4x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"QUADRUPLE"}}],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"clickAction"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"clickURL"},arguments:[],directives:[],selectionSet:null}]}}],loc:{start:0,end:189}};n.loc.source={body:"fragment badge on Badge {\n  id\n  setID\n  version\n  title\n  image1x: imageURL(size: NORMAL)\n  image2x: imageURL(size: DOUBLE)\n  image4x: imageURL(size: QUADRUPLE)\n  clickAction\n  clickURL\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1197:function(e,t,n){"use strict";function i(e){var t=[],n={};return e.forEach(function(e){var i=e.tiers.map(function(e){var t=new Map,n=new Map,i=new Map,a=new Map;return e.images.forEach(function(e){"LIGHT"===e.theme?e.isAnimated?n.set(e.dpiScale,e.url):t.set(e.dpiScale,e.url):e.isAnimated?a.set(e.dpiScale,e.url):i.set(e.dpiScale,e.url)}),r.a({indexedImages:{LIGHT:{static:t,animated:n},DARK:{static:i,animated:a}}},e)});i.sort(function(e,t){return t.bits-e.bits});var a=r.a({},e,{indexedTiers:new Map(i.map(function(e){return[e.bits,e]})),orderedTiers:i});t.push(a),n[a.prefix.toLowerCase()]=a}),{indexedActions:n,orderedActions:t}}t.a=i;var r=n(1)},1198:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return o});var i="subscribe_to_channel",r="turbo",a="visit_url",o="broadcaster"},1199:function(e,t,n){"use strict";function i(e){var t;if(e.withImage){var n=e.bitsConfig.indexedActions[s.e];n||(n=Object(c.a)());var i=n.orderedTiers.find(function(t){return t.bits<=e.count});if(i){var u=Object(l.b)(i);void 0!==e.themeOverride&&(e.themeOverride===o.a.Light?u.dark=u.light:u.light=u.dark),t=r.createElement("span",null,r.createElement(d.a,{className:"bits-count--img",sources:u})," ")}}return r.createElement("strong",{className:"bits-count","data-a-target":"bits-count"},t,e.count," ",Object(a.d)("Bits","Bits--BitsCount"))}var r=n(0),a=n(2),o=n(40),s=n(320),l=n(491),c=n(494),d=n(492);n(1227);n.d(t,"a",function(){return i})},1200:function(e,t,n){"use strict";function i(e,t){var n=t.reduce(function(e,t){return e[t.id]=t,e},{});return se.a({},e,n)}function r(e,t){switch(void 0===e&&(e=Je()),t.type){case le:return se.a({},e,{videos:i(e.videos,t.videos)});case be:return t.hits&&t.hits.results.length>0?se.a({},e,{searchHits:t.hits.results}):se.a({},e,{searchHits:[]});case Fe:return se.a({},Je());default:return e}}function a(){return{messageCreatedTooQuickError:Object(Tt.d)("Your message was not sent because you are sending messages too quickly.","format-error-messages"),chatReplayFilterError:Object(Tt.d)("Your message has been posted. However, other messages posted after the live stream are hidden.","format-error-messages")}}function o(e,t){switch(void 0===e&&(e=wt()),t.type){case ke:var n=se.a({},t.comments[0],{highlight:!0,source:st});return se.a({},e,{comments:mt(e.comments,[n]),isPostCooldownActive:!0});case Ee:return se.a({},e,{errorMessage:t.createError});case Te:return se.a({},e,{errorMessage:t.errorMessage});case De:var i=t.comments[0].parentId,r=e.cursor,o=e.replyCursorMap,s=t.comments.slice();if(""===i)r=t.cursor;else if(o=se.a({},e.replyCursorMap,(m={},m[i]=t.cursor.future,m)),t.cursor.future===lt){var l=ht(e.comments,i);if(l){var c=se.a({},l,{moreReplies:!1});s.push(c)}}var d=mt(e.comments,s);return e.isScrollingSynced&&(d=gt(d,Nt)),se.a({},e,{comments:d,cursor:r,hasLoadedData:!0,replyCursorMap:o});case Pe:return se.a({},e,{comments:mt(pt(),t.comments),hasLoadedData:!0,cursor:t.cursor,replyCursorMap:{}});case xe:return se.a({},e,{hasLoadedData:!0});case le:return se.a({},e,{comments:mt(pt(),t.comments),cursor:t.cursor,hasLoadedData:!0,errorMessage:""});case de:return se.a({},wt(),{hasLoadedData:!0,errorMessage:t.error});case it:return se.a({},e,{currentVideoTime:Math.floor(t.updatedTime)});case nt:case Fe:return se.a({},wt());case ye:return se.a({},e,{comments:ft(e.comments,t.comment)});case Ue:var u=e.errorMessage;return u===a().messageCreatedTooQuickError&&(u=""),se.a({},e,{isPostCooldownActive:!1,errorMessage:u});case Ve:return se.a({},e,{isScrollingSynced:!1});case je:return se.a({},e,{isScrollingSynced:!0});case me:var p=function(e){return e.commenter!==t.user};return se.a({},e,{comments:bt(e.comments,p)});case Ne:return se.a({},e,{comments:mt(e.comments,t.comments)});case et:return se.a({},e,{currentUserBlockedUsers:t.blockedUsers,hasLoadedCurrentUserBlockedList:!0});case Ze:return se.a({},e,{hasLoadedCurrentUserBlockedList:!0});case We:return se.a({},e,{isReplayFilterOn:t.isReplayFilterOn});case Ge:return se.a({},e,{hasDismissedChatReplayError:!0});case $e:return se.a({},e,{hideTimestamps:t.hideTimestamps});case Ke:return se.a({},e,{isReplayFilterOn:t.isReplayFilterOn,hideTimestamps:t.hideTimestamps});default:return e}var m}function s(e){return void 0===e&&(e=Ot),e}function l(e,t){var n=t.reduce(function(e,t){return e[t.id]=t,e},{});return se.a({},e,n)}function c(e,t){switch(void 0===e&&(e=Dt),t.type){case De:case Pe:case le:case ke:return{users:l(e.users,t.users)};case Fe:return se.a({},It());default:return e}}function d(e,t){return u(e,t).then(function(e){return e.json()})}function u(e,t){return fetch(e,t).then(function(e){return e.status>=300?Promise.reject(e):e})}function p(e){void 0===e&&(e="");var t={};return""!==e&&(t[Yt]="OAuth "+e),t}function m(e){return nn.getClient(Object($t.a)(e.getState()))}function h(e){return new URL(Jt+"/videos/"+e)}function f(e){var t=h(e);return new URL(t.toString()+"/comments")}function g(e){var t=b(e).toString();return new URL(t+"/replies")}function b(e){return new URL(Jt+"/videos/comments/"+e)}function v(e,t){var n;n=_(t)?g(t.parentId):f(t.contentId);var i=D(t),r={method:Zt,body:JSON.stringify(i)};return e.doAuthRequest(n,r).then(function(e){return pn(e)})}function y(e,t){try{if(E(t))return S(e,t);var n=void 0,i=new URLSearchParams;return T(t)?i.append(an,t.cursor):w(t)&&(i.append(rn,""+t.offset),void 0!==t.highlightedMessageID&&i.append("comment_id",t.highlightedMessageID)),n=new URL("?"+i.toString(),f(t.videoID).toString()),e.doAuthRequest(n,{}).then(function(e){return mn(e,t.bitsConfig)})}catch(e){return Promise.reject(e)}}function S(e,t){var n,i=new URLSearchParams;return void 0!==t.cursor&&i.append(an,t.cursor),n=new URL("?"+i.toString(),g(t.commentID).toString()),e.doAuthRequest(n,{}).then(function(e){return hn(e)})}function k(e,t){var n=b(t.comment.id),i={method:Xt,body:JSON.stringify({state:t.state})};return e.doAuthRequest(n,i).then(function(e){return pn(e)},function(e){return Promise.reject(e)})}function C(e,t){var n=b(t.id),i={method:en};return e.doRawAuthRequest(n,i)}function E(e){return"commentId"in e}function _(e){return"parentId"in e}function T(e){return"cursor"in e}function w(e){return"offset"in e}function N(e,t,n,i){var r,a=0,o=Array.from(t);return r=e.reduce(function(e,t){var n=t.begin,i=t.end,r=o.slice(a,n),s=o.slice(n,i+1);return 0!==r.length&&e.push({type:on.a.Text,content:r.join("")}),e.push({type:on.a.Emote,content:{images:{themed:!1,sources:{"1x":Object(sn.e)(t._id,1),"2x":Object(sn.e)(t._id,2),"4x":Object(sn.e)(t._id,4)}},alt:s.join("")}}),a=i+1,e},[]),a<t.length&&r.push({type:on.a.Text,content:o.slice(a).join("")}),i?r.reduce(function(e,t){return t.type===on.a.Text?e.concat(Object(zt.c)(t.content,n)):(e.push(t),e)},[]):r}function O(){return{past:lt,future:lt}}function D(e){return _(e)?{message:e.message,parent_id:e.parentId}:{content_id:e.contentId,content_offset_seconds:e.contentOffsetSeconds,content_type:e.contentType,message:e.message}}function I(e){return e.reduce(function(e,t){return e[t._id]=t.version,e},{})}function P(e,t,n,i){return e in t?{bitsConfig:i,commentID:e,cursor:t[e]}:{bitsConfig:i,commentID:e,videoID:n}}function A(e){var t=e.currentVideoTime<e.offsetRange.beginSec,n=e.currentVideoTime>e.offsetRange.endSec;return t&&M(e.cursor)||n&&F(e.cursor)}function x(e){return F(e.cursor)&&R({currentVideoTime:e.currentVideoTime,offsetEndTime:e.offsetEndTime,offsetThreshold:e.offsetThreshold})}function R(e){var t=e.offsetEndTime-e.offsetThreshold;return e.currentVideoTime>=t&&e.currentVideoTime<=e.offsetEndTime}function F(e){return e.future!==lt}function M(e){return e.past!==lt}function U(e,t){var n=e.id===t.id,i=e.roles.isGlobalMod||e.roles.isSiteAdmin||e.roles.isStaff;return!!t.self&&t.self.isModerator||i||n}function L(e){var t=new URL(Jt+"/videos/comments/"),n=new URLSearchParams;return n.append(Bn,Hn.toString()),n.append(Vn,e.videoId),void 0!==e.cursor&&n.append(an,e.cursor),t.search="?"+n,t}function j(e){var t=new URL(Jt+"/videos/comments/"),n=new URLSearchParams;return n.append(Bn,Hn.toString()),n.append(jn,e.userId),void 0!==e.cursor&&n.append(an,e.cursor),t.search="?"+n,t}function B(e){return new URL(Jt+"/videos/channels/"+e.targetChannel+"/bans")}function V(e){return new URL(Jt+"/videos/comments/"+e.commentId+"/reports")}function H(e,t){var n;return n=G(e)?j(e):L(e),t.doAuthRequest(n,{}).then(function(t){return Un(t,e.bitsConfig)})}function W(e,t){var n=new URL(B(e).toString()),i={method:Zt,body:JSON.stringify({commenter_id:e.bannedUser})};return t.doRawAuthRequest(n,i)}function q(e,t){var n=V(e),i={method:Zt,body:JSON.stringify({comment_id:e.commentId,reason:e.reason,description:e.description})};return t.doRawAuthRequest(n,i)}function G(e){return"userId"in e}function z(e,t){return function(n,i){e({dispatch:n,getState:i},t,Tt.l.apollo.client)}}function $(e,t){return function(n,i){e({dispatch:n,getState:i},t,Tt.l.apollo.client,Tt.k)}}function Q(){return{CommenterBannedError:Object(oe.d)("You are banned from sending messages in this channel","routines-comments"),CommentingDisabledError:Object(oe.d)("Sending messages in this channel is disabled","routines-comments"),UserNotVerifiedError:Object(oe.d)("Account email verification required to send a message","routines-comments"),MaxChildCommentsError:Object(oe.d)("The reply limit for this message has been reached","routines-comments"),MessageLikelySpamError:Object(oe.d)("Your message was blocked by the spam filter","routines-comments"),MessageContainsBannedWordsError:Object(oe.d)("Your message wasn't posted due to conflicts with the channel's moderation settings","routines-comments")}}function K(){return Object(oe.d)("Unable to send a new message at this time","routines-comments")}function Y(e){return new URL(Jt+"/users/"+e+"/blocks")}function J(e,t){var n=new URL(Y(e).toString());return t.doAuthRequest(n,{}).then(function(e){return ir(e)})}function Z(e){return{isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,hideTimestamps:e.vodChat.comments.hideTimestamps}}function X(e){return{onReplayModeChange:function(t){ni({setting:Zn,value:t?ei:ti}),e(qe(t))},onTimestampModeChange:function(t){ni({setting:Xn,value:t?ei:ti}),e(Qe(t))}}}function ee(){return a().messageCreatedTooQuickError}function te(){return a().messageCreatedTooQuickError}function ne(e,t){return!t.data.loading&&!t.data.error&&(t.data.badges!==e.data.badges||t.data.video.owner!==e.data.video.owner)}function ie(e,t){var n={comments:[],currentVideoTime:e.vodChat.comments.currentVideoTime,cursor:e.vodChat.comments.cursor,errorMessage:e.vodChat.comments.errorMessage,hasFetchedComments:e.vodChat.comments.hasLoadedData,hasRequestedCurrentUserBlockList:e.vodChat.comments.hasLoadedCurrentUserBlockedList,isCreationCoolDownActive:e.vodChat.comments.isPostCooldownActive,isCurrentUserModerator:!1,isLoggedIn:Object($t.d)(e),isReplayFilterOn:e.vodChat.comments.isReplayFilterOn,isScrollingSynced:e.vodChat.comments.isScrollingSynced,offsetRange:Dn(e.vodChat.comments.comments),replyCursorMap:e.vodChat.comments.replyCursorMap,shouldSendReplayFilterError:!1,hideTimestamps:e.vodChat.comments.hideTimestamps,videoID:t.videoID};if(void 0!==t.highlightedMessageID&&(n.highlightedMessageID=t.highlightedMessageID),void 0!==t.highlightTimestamp&&(n.highlightTimestamp=t.highlightTimestamp),!t.data.loading&&!t.data.error){var i=t.data,r=i.currentUser,a=i.video;null!==r&&(n.isCurrentUserModerator=U(r,a.owner)),n.comments=Cn(e,t.data.video.broadcastType,n.isCurrentUserModerator),n.shouldSendReplayFilterError=ar(e.vodChat.comments.isReplayFilterOn,t.data.video.broadcastType!==Gt.a.Upload,e.vodChat.comments.hasDismissedChatReplayError)}return n}function re(e,t){return{onUpdateBegan:function(n,i){if(i.isLoggedIn&&!n.hasRequestedCurrentUserBlockList&&n.data.currentUser)return void e(z(rr,n.data.currentUser.id));if(i.videoID!==n.videoID)return void e(rt(n.videoID));if(!n.hasFetchedComments){var r={bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID};return n.highlightedMessageID&&(r.highlightedMessageID=n.highlightedMessageID),void e(z(Si,r))}if(n.offsetRange!==yn){if(x({cursor:n.cursor,currentVideoTime:n.currentVideoTime,offsetEndTime:n.offsetRange.endSec,offsetThreshold:Hr}))return void e(z(Si,{bitsConfig:t.bitsConfig,cursor:n.cursor.future,videoID:n.videoID}));if(A(n))return void e(z(Si,{bitsConfig:t.bitsConfig,offset:n.currentVideoTime,videoID:n.videoID}))}},onCreate:function(t){if(Object(nr.l)(t.message)){var n=Object(Tt.d)("Sorry, commands are not supported in Chat on Videos yet.","VideoChatPresentation");return void e(we(n))}e(z(ki,t)),e($(Oi,t))},onError:function(t){e(we(t))},onErrorDismissClick:function(){e(ze())},onUnmount:function(){e(Me())},onLoadMoreReplies:function(t,n,i,r){e(z(Si,P(t,n,i,r)))},onDisableSync:function(){e(He())},onEnableSync:function(){e(Be())},onShowLogin:t.onShowLogin,onBanUser:function(t){e(z(Gn,t)),e($(wi,t))},onDeleteComment:function(t){e(z(Ci,t)),e($(Ni,t))},onPlayerSeekRequest:function(n,i){t.onPlayerSeekRequest(n),void 0!==i&&e($(Ii,i))},onTurnOffReplayFilter:function(){e(qe(!1))},onWillMount:function(){e(Ye())}}}var ae=n(11),oe=n(2),se=n(1),le="vodChat.channel-moderation-comments.RESULTS_RECEIVED",ce=function(e,t){return se.a({type:le},e,{bitsConfig:t})},de="vodChat.channel-moderation-comments.RESULTS_FAILED",ue=function(e){return{type:de,error:e}},pe=function(e){return{type:"vodChat.channel-moderation-comments.BAN_FAILED",error:e}},me="vodChat.channel-moderation-comments.BAN_SUCCESS",he=function(e){return{type:me,user:e}},fe=function(e){return{type:"vodChat.channel-moderation-comments.REPORT_FAILED",error:e}},ge=function(){return{type:"vodChat.channel-moderation-comments.REPORT_SUCCESS"}},be="vodChat.channel-moderation-comments.SEARCH_SUCCESS",ve=function(e){return{type:be,hits:e}},ye="vodChat.comments.DELETED_SUCCESS",Se=function(e){return se.a({type:ye},e)},ke="vodChat.comments.CREATED_SUCCESS",Ce=function(e){return se.a({type:ke},e)},Ee="vodChat.comments.CREATE_FAILED",_e=function(e){return{type:Ee,createError:e}},Te="vodChat.comments.DISPLAY_ERROR",we=function(e){return{type:Te,errorMessage:e}},Ne="vodChat.comments.UPDATED_SUCCESS",Oe=function(e){return se.a({type:Ne},e)},De="vodChat.comments.CURSOR_RECEIVED",Ie=function(e){return se.a({type:De},e)},Pe="vodChat.comments.OFFSET_RECEIVED",Ae=function(e){return se.a({type:Pe},e)},xe="vodChat.comments.QUERY_FAILED",Re=function(){return{type:xe}},Fe="vodChat.comments.CLEARED",Me=function(){return{type:Fe}},Ue="vodChat.comments.COOLDOWN_ENDED",Le=function(){return{type:Ue}},je="vodChat.comments.SYNC_ENABLED",Be=function(){return{type:je}},Ve="vodChat.comments.SYNC_DISABLED",He=function(){return{type:Ve}},We="vodChat.comments.REPLAY_FILTER_CHANGED",qe=function(e){return oe.i.set("videoChat.is_replay_mode",e),{type:We,isReplayFilterOn:e}},Ge="vodChat.comments.CHAT_REPLAY_ERROR_HIDE",ze=function(){return{type:Ge}},$e="vodChat.comments.TIMESTAMP_MODE_CHANGED",Qe=function(e){return oe.i.set("videoChat.hide_timestamps",e),{type:$e,hideTimestamps:e}},Ke="vodChat.comments.REQUEST_CHAT_SETTINGS",Ye=function(){return{type:Ke,isReplayFilterOn:oe.i.get("videoChat.is_replay_mode",!1),hideTimestamps:oe.i.get("videoChat.hide_timestamps",!1)}},Je=function(e){return se.a({searchHits:[],videos:{}},e)},Ze="vodChat.chat.FAILED",Xe=function(){return{type:Ze}},et="vodChat.chat.RESULTS_RECEIVED",tt=function(e){return{type:et,blockedUsers:e}},nt="vodChat.video.CURRENT_VIDEO_CHANGED",it="vodChat.video.CURRENT_VIDEO_TIME_CHANGED",rt=function(e){return{type:nt,id:e}},at=function(e){return{type:it,updatedTime:e}},ot="video",st="current",lt="",ct=function(e){return""!==e.parentId},dt=Number.MAX_VALUE,ut=Number.MIN_VALUE,pt=function(e){return se.a({commentCount:0,maxOffset:ut,minOffset:dt,parentComments:{},offsets:{},replies:{}},e)},mt=function(e,t){var n=yt(e);return t.forEach(function(e){var t=e.id,i=e.contentOffset,r=e.parentId;if(""===r){n.minOffset=Math.min(n.minOffset,i),n.maxOffset=Math.max(n.maxOffset,i),n.parentComments=se.a({},n.parentComments,(l={},l[t]=e,l));var a=n.offsets[i];Array.isArray(a)?a.includes(t)||(n.offsets[i]=a.concat(t),n.commentCount++):(n.offsets[i]=[t],n.commentCount++)}else{var o=n.replies[r];if(Array.isArray(o)){var s=o.findIndex(function(t){return t.id===e.id});-1!==s?o[s]=e:(n.replies[r]=o.concat(e),n.commentCount++)}else n.replies[r]=[e],n.commentCount++}var l}),n},ht=function(e,t){if(t in e.parentComments)return e.parentComments[t]},ft=function(e,t){var n=yt(e);return ct(t)?Ct(n,t.parentId,t.id):kt(n,t.id)},gt=function(e,t){if(e.commentCount<t||vt(e))return e;for(var n=e;n.commentCount>t&&!vt(e);)n=Et(n,n.minOffset);return n},bt=function(e,t){var n=yt(e);return Object.keys(e.parentComments).forEach(function(i){var r=e.parentComments[i];t(r)||(n=kt(n,r.id))}),Object.keys(e.replies).forEach(function(i){e.replies[i].forEach(function(e){t(e)||(n=Ct(n,e.id,e.parentId))})}),n},vt=function(e){return e.minOffset===e.maxOffset},yt=function(e){return{commentCount:e.commentCount,maxOffset:e.maxOffset,minOffset:e.minOffset,offsets:St(e.offsets),parentComments:se.a({},e.parentComments),replies:se.a({},e.replies)}},St=function(e){return Object.keys(e).reduce(function(t,n){return t[Number(n)]=e[Number(n)].slice(),t},{})},kt=function(e,t){if(!(t in e.parentComments))return e;var n=e.parentComments[t],i=n.contentOffset,r=e.offsets[i],a=[];if(r&&(a=r.filter(function(e){return e!==t})),e.offsets[i]=a,delete e.parentComments[t],e.commentCount--,t in e.replies){var o=e.replies[t].length;delete e.replies[t],e.commentCount-=o}return e},Ct=function(e,t,n){if(!(t in e.replies))return e;var i=e.replies[t].length,r=e.replies[t].filter(function(e){if(e.id!==n)return e});e.replies[t]=r,0===r.length&&delete e.replies[t];var a=i-r.length;return e.commentCount-=a,e},Et=function(e,t){return t>=e.minOffset&&t<=e.maxOffset&&!vt(e)?(t in e.offsets&&e.offsets[t].forEach(function(t){e=kt(e,t)}),delete e.offsets[t],e.maxOffset===t?e.maxOffset--:e.minOffset===t&&e.minOffset++,e):e},_t=function(){function e(e){this.videoComments=e,this.currentOffset=e.minOffset}return e.prototype[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.videoComments.offsets[e.currentOffset]||[],n={done:e.currentOffset>e.videoComments.maxOffset,value:{offset:e.currentOffset,comments:t}};return e.currentOffset++,n}}},e}(),Tt=n(75),wt=function(e){return se.a({comments:pt(),currentUserBlockedUsers:{},currentVideoTime:0,cursor:{future:lt,past:lt},errorMessage:"",hasDismissedChatReplayError:!1,hasLoadedCurrentUserBlockedList:!1,hasLoadedData:!1,isPostCooldownActive:!1,isReplayFilterOn:!1,isScrollingSynced:!0,replyCursorMap:{},hideTimestamps:!1},e)},Nt=150,Ot={apiToken:"",deviceId:""},Dt={users:{}},It=function(e){return se.a({users:{}},e)},Pt=Object(ae.combineReducers)({comments:o,config:s,users:c,moderation:r});oe.k.store.registerReducer("vodChat",Pt);var At,xt=n(4),Rt=n(0),Ft=(n(1544),function(e){return xt((t={},t["twp-button"]=!0,t["twp-button--"+e.variant]="string"==typeof e.variant,t["twp-button--disabled"]=e.disabled,t["twp-button--small"]="small"===e.size,t["twp-button--large"]="large"===e.size,t["twp-button--full-width"]=e.fullWidth,t["twp-button--icon-only"]=e.iconOnly,t["twp-button--dropmenu"]=e.dropmenu,t[e.className||""]="string"==typeof e.className,t));var t}),Mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refHandler=function(e){t.buttonElement=e},t.onFocusHandler=function(){t.props.blurAfterClick&&t.buttonElement.blur()},t}return se.d(t,e),t.prototype.render=function(){var e=(t={},t["aria-label"]=this.props.ariaLabel,t.className=Ft(this.props),t.onFocus=this.onFocusHandler,t.disabled=this.props.disabled,t.type=this.props.type||"button",t["data-test-selector"]=this.props.testSelector,t.ref=this.refHandler,t.tabIndex=this.props.tabIndex,t);return this.props.href?Rt.createElement("a",se.a({href:this.props.href},e),this.props.children):Rt.createElement("button",se.a({onClick:this.props.onClick},e),this.props.children);var t},t}(Rt.Component),Ut=n(102),Lt=(n(1545),function(e){return xt((t={},t.balloon=!0,t.block=e.open,t.hide=!e.open&&!e.showOnHover,t["balloon--tooltip"]=e.tooltip,t["balloon--dropmenu"]=e.dropmenu,t["balloon--cols"]=e.columns,t["balloon--"+e.tail]=!!e.tail,t["balloon--"+e.position]=!0,t["balloon--"+e.size]=!!e.size,t[e.balloonClassName||""]=!!e.balloonClassName,t));var t}),jt=function(e){var t=e.children,n=e.className,i=e.target;return Rt.createElement("div",null,i,Rt.createElement("div",{className:n},t))},Bt=function(e){var t=e.tooltip?"span":"div",n=e.onClickOutside?e.onClickOutside:function(){};return Rt.createElement(t,{className:"balloon-component balloon-wrapper "+(e.className||"")},Rt.createElement(Ut.a,{onClickOut:n},Rt.createElement(jt,{className:Lt(e),onClickOutside:e.onClickOutside,target:e.target},e.children)))},Vt=function(e){return Rt.createElement("ul",{className:"balloon-dropmenu balloon__list"},e.children)},Ht=n(14),Wt=function(e){return e.text?Rt.createElement("li",{"data-test-selector":e.testSelector,className:"balloon-dropmenu-item balloon__title"},e.children):e.stroke?Rt.createElement("li",{"data-test-selector":e.testSelector,className:"balloon-dropmenu-item balloon__stroke"}):e.alert?Rt.createElement("li",{"data-test-selector":e.testSelector,className:"balloon-dropmenu-item"},Rt.createElement("a",{className:"balloon__link balloon__link--alert",href:e.linkUrl,onClick:e.onClick},e.children)):e.routerLink?Rt.createElement("li",{"data-test-selector":e.testSelector,className:"balloon-dropmenu-item"},Rt.createElement(Ht.a,{className:"balloon__link",to:e.linkUrl||"/",onClick:e.onClick},e.children)):Rt.createElement("li",{"data-test-selector":e.testSelector,className:"balloon-dropmenu-item"},Rt.createElement("a",{className:"balloon__link",href:e.linkUrl,onClick:e.onClick},e.children))},qt=function(){function e(e){this.bio=e.bio,this.createdAt=e.createdAt,this.displayName=e.displayName,this.id=e.id,this.logo=e.logo,this.name=e.name,this.type=e.type,this.updatedAt=e.updatedAt}return e}(),Gt=n(495),zt=n(491),$t=n(20),Qt=n(1181),Kt=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=new Qt.BrowserHeaders(t),i=new Qt.BrowserHeaders(e);return n.forEach(function(e,t){i.set(e,t)}),i},Yt="Authorization",Jt="https://api.twitch.tv/v5",Zt="POST",Xt="PUT",en="DELETE",tn=(At={},At.Accept="application/vnd.twitchtv.v5+json",At["Content-Type"]="application/json",At["CLIENT-ID"]="jzkbprff40iqj646a697cyrvl0zt2m6",At),nn=function(){function e(e){this.chatOAuthToken=e}return e.getClient=function(t){return void 0===t&&(t=""),new e(t)},e.prototype.doRequest=function(e,t){void 0===t&&(t={});var n=se.a({},t,{headers:Kt(tn,t.headers).toHeaders()});return d(new Request(e.toString(),n))},e.prototype.doAuthRequest=function(e,t){void 0===t&&(t={});var n=se.a({},t,{headers:Kt(p(this.chatOAuthToken),t.headers)});return this.doRequest(e,n)},e.prototype.doRawRequest=function(e,t){void 0===t&&(t={});var n=se.a({},t,{headers:Kt(tn,t.headers).toHeaders()});return u(new Request(e.toString(),n))},e.prototype.doRawAuthRequest=function(e,t){void 0===t&&(t={});var n=se.a({},t,{headers:Kt(p(this.chatOAuthToken),t.headers)});return this.doRawRequest(e,n)},e}(),rn="content_offset_seconds",an="cursor",on=n(322),sn=n(493),ln={normalizeRecord:function(e,t,n){var i=e.body,r=e.emoticons||[],a=[];return 0===r.length?e.bits_spent?a=a.concat(Object(zt.c)(i,n)):a.push({type:on.a.Text,content:i}):a=N(r,i,n,void 0!==e.bits_spent),{id:"1",isAction:e.is_action,tokens:a,userColor:e.user_color?e.user_color:Object(sn.b)(t)}}},cn=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/1.0"},dn=function(e){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/2.0 2x"},un={normalizeRecord:function(e){return new qt({id:e._id,name:e.name,logo:new URL(e.logo||"https://static-cdn.jtvnw.net/jtv_user_pictures/xarth/404_user_150x150.png"),bio:e.bio,createdAt:new Date(e.created_at),displayName:e.display_name,type:e.type,updatedAt:new Date(e.updated_at)})},serializeRecord:function(e){return{_id:e.id,name:e.name,logo:e.logo.toString(),bio:e.bio,created_at:e.createdAt.toISOString(),display_name:e.displayName,type:e.type,updated_at:e.updatedAt.toISOString()}}},pn=function(e){return{comments:[fn.normalizeRecord(e,zt.a)],users:[un.normalizeRecord(e.commenter)]}},mn=function(e,t){var n=e.comments.map(function(e){return un.normalizeRecord(e.commenter)}),i=O();return void 0!==e._next&&(i.future=e._next),void 0!==e._prev&&(i.past=e._prev),{comments:e.comments.reduce(function(e,i){return i.replies&&i.replies.map(function(e){n.push(un.normalizeRecord(e.commenter))}),e.concat(fn.normalizeRecords(i,t))},[]),cursor:i,users:n}},hn=function(e){var t=e.comments.map(function(e){return un.normalizeRecord(e.commenter)});return{comments:e.comments.map(function(e){return fn.normalizeRecord(e,zt.a)}),cursor:{future:e._next||lt},users:t}},fn={normalizeRecords:function(e,t){var n=[fn.normalizeRecord(e,t)];return Array.isArray(e.replies)&&e.replies.forEach(function(e){n.push(gn.normalizeRecord(e,t))}),n},normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:ln.normalizeRecord(e.message,e.commenter._id,t),moreReplies:e.more_replies||!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:I(e.message.user_badges||[])}}},gn={normalizeRecord:function(e,t){return{channelId:e.channel_id,commenter:e.commenter._id,contentId:e.content_id,contentOffset:Math.floor(e.content_offset_seconds),contentType:e.content_type,createdAt:new Date(e.created_at),id:e._id,message:ln.normalizeRecord(e.message,e.commenter._id,t),moreReplies:!1,parentId:void 0!==e.parent_id?e.parent_id:"",state:e.state,source:e.source,userBadges:I(e.message.user_badges||[])}}},bn=function(e){return"v"+e},vn=function(e){return e+"s"},yn={beginSec:Number.MIN_VALUE,endSec:Number.MAX_VALUE},Sn=function(e){return e.vodChat.comments.comments},kn=function(e,t){return t.commenter in e.vodChat.comments.currentUserBlockedUsers},Cn=function(e,t,n){var i=e.vodChat.comments,r=i.currentVideoTime,a=i.comments;return 0===a.commentCount?[]:Array.from(new _t(a)).reduce(function(i,o){return o.offset>r?i:(o.comments.forEach(function(r){var o=ht(a,r);if(void 0!==o&&(n||!kn(e,o)))return"comment"===o.source&&In(e.vodChat.comments.isReplayFilterOn,t)?i:i.push(wn(o,e,n,t))}),i)},[]).sort(_n)},En=function(e){var t=Sn(e);return Object.keys(t.parentComments).map(function(n){return On(t.parentComments[n],e)}).filter(function(e){return void 0!==e.video}).sort(Tn)},_n=function(e,t){return e.comment.contentOffset===t.comment.contentOffset?e.comment.createdAt.getTime()-t.comment.createdAt.getTime():e.comment.contentOffset-t.comment.contentOffset},Tn=function(e,t){return e.comment.createdAt.getTime()===t.comment.createdAt.getTime()?t.comment.contentOffset-e.comment.contentOffset:t.lastUpdated.getTime()-e.lastUpdated.getTime()},wn=function(e,t,n,i){var r=new Array,a=new Array,o=t.vodChat.comments.comments.replies[e.id],s=e.createdAt;return Array.isArray(o)&&o.forEach(function(e){!n&&kn(t,e)||(e.source===st&&In(t.vodChat.comments.isReplayFilterOn,i)?(a.push(wn(e,t,n)),s=Pn(s,e.createdAt)):(r.push(wn(e,t,n)),s=Pn(s,e.createdAt)))}),In(t.vodChat.comments.isReplayFilterOn,i)?{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:s,replies:a.sort(_n)}:{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:s,replies:r.sort(_n)}},Nn=function(e,t){var n=new Array,i=t.vodChat.comments.comments.replies[e.id],r=e.createdAt;return Array.isArray(i)&&i.forEach(function(e){n.push(Nn(e,t)),r=Pn(r,e.createdAt)}),{author:t.vodChat.users.users[e.commenter],comment:e,lastUpdated:r,replies:n.sort(_n)}},On=function(e,t){var n=Nn(e,t);return se.a({},n,{video:t.vodChat.moderation.videos[bn(e.contentId)]})},Dn=function(e){return 0===e.commentCount?yn:{beginSec:e.minOffset,endSec:e.maxOffset}},In=function(e,t){return!!t&&(e&&(t===Gt.a.Archive||t===Gt.a.Highlight))},Pn=function(e,t){return e.getTime()>t.getTime()?e:t},An=n(21),xn=n(1473),Rn=n(182),Fn=n(511),Mn=n(1480),Un=function(e,t){var n=mn(e,t),i=e.comments.reduce(function(e,t){return void 0===t.video?e:e.concat([Ln(t.video)])},[]);return Array.isArray(e.parents)&&e.parents.forEach(function(e){n.comments.push(fn.normalizeRecord(e,t)),n.users.push(un.normalizeRecord(e.commenter))}),se.a({},n,{videos:i})},Ln=function(e){return{id:e._id,title:e.title,preview:e.preview}},jn="channel_id",Bn="limit",Vn="video_id",Hn=50,Wn=function(){return Object(Tt.d)("You do not have permission to access this dashboard.","routines-moderation")},qn=function(e,t){var n=m(e);return H(t,n).then(function(n){e.dispatch(ce(n,t.bitsConfig))},function(t){403===t.status&&e.dispatch(ue(Wn()))})},Gn=function(e,t){var n=m(e);return W(t,n).then(function(){e.dispatch(he(t.bannedUser))}).catch(function(t){return e.dispatch(pe(t))})},zn=function(e,t){return q(t,m(e)).then(function(){e.dispatch(ge())}).catch(function(t){return e.dispatch(fe(t))})},$n=function(e,t){var n=new Rn.a(oe.a.algoliaApplicationID,oe.a.algoliaAPIKey),i=An.a(),r=Object(Mn.b)({broadcastType:xn.d,broadcasterId:t.creatorId}),a=r.typeID,o=r.params;return n.queryForType(a,t.searchTerm,i,o).then(function(t){var n=Object(Fn.b)({searchResults:t});n.currentVideoResults&&e.dispatch(ve(n.currentVideoResults))}).catch(function(){})},Qn=n(3),Kn=function(e){return Rt.createElement(Qn.t,{type:Qn.y.Text,onClick:e.onClick},Object(oe.d)("Show more replies...","chomments.moderation.showMoreRepliesAction"))},Yn=n(63),Jn=n(179),Zn="replay_mode",Xn="timestamp_mode",ei="on",ti="off",ni=function(e){oe.j.track(Yn.f.VideoChatSettingChanged,e)},ii=function(e,t){var n=e.users[0],i=e.comments[0];return{channel:t.user.login,channel_id:Number(i.channelId),comment_id:i.id,comment_state:i.state,event_source:"frontend",game:t.video.game?t.video.game.name:null,login:n.name,reply_to_comment_id:ct(i)?i.parentId:null,user_id:Number(n.id),vod_id:Number(i.contentId),vod_title:t.video.title,vod_ts:i.contentOffset,vod_type:Object(Jn.a)(t.video.broadcastType)}},ri=function(e,t,n){return{author_id:Number(e.comment.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.comment.channelId),comment_id:e.comment.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(e.comment.contentId),vod_title:n.video.title,vod_type:Object(Jn.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},ai=function(e,t,n){return{action:"ban_user",author_id:Number(e.bannedUser),channel_id:Number(e.targetChannel),event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,target_user_id:Number(e.bannedUser),user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_type:Object(Jn.a)(n.video.broadcastType),vod_ts:e.comment.contentOffset}},oi=function(e,t,n){return{action:"delete",author_id:Number(e.commenter),author_login:n.users[1].login,channel:n.users[0].login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,reply_to_comment_id:e.parentId?e.parentId:null,user_id:Number(t.session.user.id),vod_id:Number(e.contentId),vod_title:n.video.title,vod_type:Object(Jn.a)(n.video.broadcastType),vod_ts:e.contentOffset}},si=function(e,t,n){var i=null,r=Object.keys(t.vodChat.comments.comments.parentComments);if(r.length>0){var a=r[0];i=t.vodChat.comments.comments.parentComments[a].channelId}return{action:"create",channel_id:i?Number(i):null,comment_body:e.message,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,reply_to_comment_id:_(e)?e.parentId:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:_(e)?null:Number(e.contentOffsetSeconds),vod_type:Object(Jn.a)(n.video.broadcastType)}},li=function(e,t,n){var i=e.comment.id,r=e.comment.channelId;return{action:"published"===e.state?"publish":"unpublish",channel_id:Number(r),comment_id:i,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user.login,user_id:Number(t.session.user.id),vod_id:Number(n.video.id),vod_title:n.video.title,vod_ts:e.comment.contentOffset,vod_type:Object(Jn.a)(n.video.broadcastType)}},ci=function(e,t,n){return{action:"sync_vod_to_time",author_id:Number(e.commenter),channel:n.user.login,channel_id:Number(e.channelId),comment_id:e.id,event_source:"frontend",game:n.video.game?n.video.game.name:null,login:t.session.user?t.session.user.login:null,user_id:t.session.user?Number(t.session.user.id):null,vod_id:Number(e.contentId),vod_title:n.video.title,vod_ts:e.contentOffset,vod_type:Object(Jn.a)(n.video.broadcastType)}},di=n(1546),ui=n(1547),pi=n(1548),mi=this,hi=function(e){return Object(oe.d)("This room is in {duration} followers-only mode. Follow this channel to join the community",{duration:e},"routines-comments")},fi=function(e){var t=e.split(" "),n=t[t.length-1],i=n.match(/((\d+)h)?(\d+)m(\d+)s/);return Array.isArray(i)?{600:"10 Minutes",1800:"30 Minutes",3600:"1 Hour",86400:"1 Day",604800:"1 Week",2592e3:"1 Month",7776e3:"3 Months"}[60*parseInt(i[2]||"0",10)*60+60*parseInt(i[3],10)+parseInt(i[4],10)]:""},gi=function(e){if(e.includes("FollowersOnlyError")){var t=fi(e);return hi(t)}var n=Q(),i=Object.keys(n).find(function(t){return e.includes(t)});return i?n[i]:K()},bi="",vi=-1,yi=!1,Si=function(e,t){return se.b(mi,void 0,void 0,function(){var n;return se.e(this,function(i){if(yi)return[2,Promise.resolve()];if(w(t)){if(t.offset===vi)return[2,Promise.resolve()];vi=t.offset}if(T(t)){if(t.cursor===bi)return[2,Promise.resolve()];bi=t.cursor}return n=m(e),yi=!0,[2,y(n,t).then(function(n){yi=!1,w(t)&&t.offset===vi?e.dispatch(Ae(n)):e.dispatch(Ie(n))},function(t){yi=!1,oe.k.logger.error(t,"VideoChat: unable to fetch messages"),e.dispatch(Re())})]})})},ki=function(e,t){return se.b(mi,void 0,void 0,function(){var n;return se.e(this,function(i){return n=m(e),[2,v(n,t).then(function(t){e.dispatch(Ce(t)),e.dispatch($(_i,t)),setTimeout(function(){e.dispatch(Le())},5e3)},function(t){return t.json().then(function(t){e.dispatch(_e(gi(t.message)))})})]})})},Ci=function(e,t){return se.b(mi,void 0,void 0,function(){var n,i;return se.e(this,function(r){switch(r.label){case 0:n=m(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,C(n,t)];case 2:return r.sent(),e.dispatch(Se({comment:t})),e.dispatch($(Ti,{comment:t})),[3,4];case 3:return i=r.sent(),oe.g.error(i.toString(),Ci.name),[3,4];case 4:return[2]}})})},Ei=function(e,t){return se.b(mi,void 0,void 0,function(){var n,i,r;return se.e(this,function(a){switch(a.label){case 0:n=m(e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,k(n,t)];case 2:return i=a.sent(),e.dispatch(Oe(i)),[3,4];case 3:return r=a.sent(),oe.g.error(r.toString(),Ei.name),[3,4];case 4:return[2]}})})},_i=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var e,r;return se.e(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n.query({query:di,variables:{videoCreatorID:t.comments[0].channelId,videoID:t.comments[0].contentId}})];case 1:return e=a.sent().data,i.track("chomment_create",ii(t,e)),[3,3];case 2:return r=a.sent(),oe.g.error(r.toString(),_i.name),[3,3];case 3:return[2]}})})},Ti=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var r,a;return se.e(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.query({query:ui,variables:{videoCreatorID:t.comment.channelId,commentCreator:t.comment.commenter,videoID:t.comment.contentId}})];case 1:return r=o.sent().data,i.track("chomment_delete",ri(t,e.getState(),r)),[3,3];case 2:return a=o.sent(),oe.g.error(a.toString(),Ti.name),[3,3];case 3:return[2]}})})},wi=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var r,a;return se.e(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.query({query:pi,variables:{videoID:t.comment.contentId}})];case 1:return r=o.sent().data,i.track("chomment_ui_action",ai(t,e.getState(),r)),[3,3];case 2:return a=o.sent(),oe.g.error(a.toString(),wi.name),[3,3];case 3:return[2]}})})},Ni=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var r,a;return se.e(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.query({query:ui,variables:{videoCreatorID:t.channelId,commentCreator:t.commenter,videoID:t.contentId}})];case 1:return r=o.sent().data,i.track("chomment_ui_action",oi(t,e.getState(),r)),[3,3];case 2:return a=o.sent(),oe.g.error(a.toString(),Ni.name),[3,3];case 3:return[2]}})})},Oi=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var r,a,o,s;return se.e(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),r=e.getState(),a=_(t)?r.vodChat.comments.comments.parentComments[t.parentId].contentId:t.contentId,[4,n.query({query:pi,variables:{videoID:a}})];case 1:return o=l.sent().data,i.track("chomment_ui_action",si(t,e.getState(),o)),[3,3];case 2:return s=l.sent(),oe.g.error(s.toString(),Oi.name),[3,3];case 3:return[2]}})})},Di=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var r,a;return se.e(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.query({query:pi,variables:{videoID:t.comment.contentId}})];case 1:return r=o.sent().data,i.track("chomment_ui_action",li(t,e.getState(),r)),[3,3];case 2:return a=o.sent(),oe.g.error(a.toString(),Di.name),[3,3];case 3:return[2]}})})},Ii=function(e,t,n,i){return se.b(mi,void 0,void 0,function(){var r,a;return se.e(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n.query({query:di,variables:{videoCreatorID:t.channelId,videoID:t.contentId}})];case 1:return r=o.sent().data,i.track("chomment_ui_action",ci(t,e.getState(),r)),[3,3];case 2:return a=o.sent(),oe.g.error(a.toString(),Ii.name),[3,3];case 3:return[2]}})})},Pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refHandler=function(e){t.textareaElement=e},t}return se.d(t,e),t.prototype.componentDidMount=function(){this.props.focusOnMount&&this.textareaElement.focus()},t.prototype.render=function(){return Rt.createElement("textarea",{className:xt("form__input",this.props.className),onKeyDown:this.props.onKeyDown,onChange:this.props.onChange,placeholder:this.props.placeholder,maxLength:this.props.maxLength,value:this.props.value,onFocus:this.props.onFocusHandler,ref:this.refHandler})},t}(Rt.Component),Ai=function(e){var t=function(e){e.preventDefault()};return Rt.createElement("form",{className:xt(e.className),onSubmit:t},Rt.createElement("div",{className:"form"},e.children))},xi=n(1549),Ri=(n(1550),function(e){var t=e.onCloseClick?e.onCloseClick:function(){},n=e.hideCloseButton?"":Rt.createElement(Mt,{className:"modal-shell__close-button",onClick:t,iconOnly:!0},Rt.createElement(Qn._5,{asset:Qn._6.Close})),i=xt("modal-shell__inner","ignore-react-onclickoutside");return Rt.createElement(xi,{isOpened:!0},Rt.createElement("div",null,Rt.createElement(Ut.a,{onClickOut:t},Rt.createElement("div",{className:"modal-shell"},Rt.createElement("div",{className:i},e.children,n)))))}),Fi=(n(1551),"confirm-button"),Mi="deny-button",Ui=function(e){var t={onClick:e.onConfirmClick,testSelector:Fi};return e.isConfirmDisabled?t.disabled=!0:t.variant="alert",Rt.createElement(Ri,{hideCloseButton:!0,onCloseClick:e.onDenyClick},Rt.createElement("div",{className:"twp-modal c-background pd-3 c-text-alt"},Rt.createElement("h3",null,e.title),Rt.createElement("div",{className:"twp-modal__message mg-b-2"},e.children),Rt.createElement("div",{className:"flex justify-content-end"},Rt.createElement(Mt,{onClick:e.onDenyClick,testSelector:Mi,variant:"hollow",className:"mg-r-1"},"Cancel"),Rt.createElement(Mt,se.a({className:"qa-confirmation-button"},t),"OK"))))},Li={SITE_SUSPENSION_EVASION:["tos_ban_evasion","Site Suspension Evasion"],CHAT_BAN_EVASION:["chat_ban_evasion","Chat Ban Evasion"],SELF_HARM:["selfharm","Self-Harm"],THREATS_TO_HARM:["harm","Attempts or Threats to Harm"],HARASSMENT:["harassment","Harassment"],HATE_SPEECH:["hate_speech","Hate Speech"],OFFENSIVE_USERNAME:["offensive_username","Offensive Username"],IMPERSONATION:["impersonation","Impersonation"],MALICIOUS_CONTENT:["spam","Spam, Scams, or Other Malicious Content"],EXPLICIT_CONTENT:["porn","Porn or Other Sexually Explicit Content"],NUDITY:["nudity","Nudity or Sexual Behavior/Attire"],OBSCENE_CONTENT:["gore","Extreme Violence, Gore, or Other Obscene Content"],UNDERAGED_USER:["underaged","Underaged User"],BITS_VIOLATION:["bits_violation","Bits Acceptable Use Policy Violation"],OTHER_VIOLATION:["other","Other Terms of Service Violation"]},ji=(n(1552),function(){}),Bi=function(e){var t;t="linkUrl"in e?"routerLink"in e?Rt.createElement(Ht.a,{to:e.linkUrl||"/",className:"twp-card__layout"},e.children):Rt.createElement("a",{href:e.linkUrl,className:"twp-card__layout"},e.children):Rt.createElement("div",{className:"twp-card__layout"},e.children);var n=xt((i={},i["twp-card"]=!0,i["twp-card--row"]=e.row,i[e.className||""]=!!e.className,i["twp-card--invert"]=e.invertColor,i["twp-card--invert-hover"]=e.invertColorOnHover,i));return Rt.createElement("div",{className:n,onClick:e.onClick?e.onClick:ji},t);var i},Vi=(n(1553),function(e){var t=xt((i={},i["twp-card__body"]=!0,i[e.className||""]=!!e.className,i["twp-card__body--overlay"]=e.overlay,i)),n="title"in e?Rt.createElement("h3",{className:"twp-card__title ellipsis"},e.title):"";return Rt.createElement("div",{className:t},n,e.children);var i}),Hi=(n(1554),function(e){var t,n=Rt.createElement("img",{src:e.src,alt:e.alt});t=e.linkUrl?e.routerLink?Rt.createElement(Ht.a,{to:e.linkUrl},n):Rt.createElement("a",{href:e.linkUrl},n):n;var i=xt((r={},r["twp-card__img"]=!0,r[e.className||""]=!!e.className,r["twp-card__img--"+e.imageSize]=!!e.imageSize,r["twp-card__img--"+e.type]=!!e.type,r));return Rt.createElement("figure",{className:i},t,e.children);var r}),Wi=function(e){var t=e,n=Math.floor(t/3600);t-=3600*n;var i=Math.floor(t/60);t-=60*i;var r=Math.floor(t);return n>0?n+":"+qi(i)+":"+qi(r):i+":"+qi(r)},qi=function(e){return e<10?"0"+e:""+e},Gi=(n(1555),function(e){var t=function(){e.onClick(e.id)},n=Object(oe.c)(new Date(1e3*e.createdAt),"medium");return Rt.createElement(Bi,{className:"phx-search-card-row",onClick:t,row:!0},Rt.createElement(Hi,{alt:e.thumbnailAltText,src:new URL(e.thumbnail).toString(),imageSize:"sm",type:"vod"}),Rt.createElement(Vi,null,Rt.createElement(Qn._16,{className:"phx-search-card-row__title",ellipsis:!0,fontSize:Qn.J.Size6,type:Qn._21.H3},e.title),Rt.createElement("span",{className:"font-size-7"},n,"  ",Wi(e.length)," ",Rt.createElement("span",null," ",e.login," "))))}),zi=n(1236),$i=function(e){var t=e.message,n=t.tokens.map(function(e,t){switch(e.type){case on.a.Text:return Rt.createElement("span",{key:t},e.content);case on.a.Emote:return Rt.createElement(zi.a,{key:t,emote:e.content});default:return null}});return Rt.createElement("span",{key:t.id,className:"qa-mod-message",style:{color:e.allowActionTextColors&&t.isAction?t.userColor:""}},n)},Qi=n(1469),Ki=/^[\x00-\x7F]*$/,Yi=function(e){return!Ki.test(e)},Ji=function(e){return Yi(e.displayName)?e.displayName+" ("+e.name+")":e.displayName},Zi=(n(1556),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChangeHandler=function(e){t.props.onSelect(e.target.value)},t}return se.d(t,e),t.prototype.render=function(){var e=[];if(this.props.options)e=this.props.options.map(function(e){return Rt.createElement("option",{key:e},e)});else if(this.props.optionLabelValueMap){var t=this.props.optionLabelValueMap;e=Object.keys(t).map(function(e){return Rt.createElement("option",{value:t[e][0],key:e},t[e][1])})}return Rt.createElement("div",{className:this.props.className},Rt.createElement("label",{htmlFor:this.props.id,className:"form__label"},this.props.label),Rt.createElement("select",{onChange:this.onChangeHandler,className:"phx-selectbox",required:this.props.required,defaultValue:"Select one..."},Rt.createElement("option",{disabled:!0,key:"Select one..."},"Select one..."),e))},t}(Rt.Component)),Xi=n(41),er=n(10),tr=n(1197),nr=n(1192),ir=function(e){return e.blocks?e.blocks.reduce(function(e,t){return e[t.user._id]=!0,e},{}):{}},rr=function(e,t){return J(t,m(e)).then(function(t){e.dispatch(tt(t))}).catch(function(){return e.dispatch(Xe())})},ar=function(e,t,n){return e&&t&&!n},or=n(1190),sr=n(6),lr=15e3,cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoDismissErrorTimeoutId=0,t.clearDismissTimeout=function(){window.clearTimeout(t.autoDismissErrorTimeoutId)},t.onManualErrorDismissClickHandler=function(){t.props.onErrorDismissed(!0)},t.setAutoDismissTimeout=function(){t.autoDismissErrorTimeoutId=window.setTimeout(function(){t.props.onErrorDismissed()},lr)},t}return se.d(t,e),t.prototype.componentDidMount=function(){this.setAutoDismissTimeout()},t.prototype.componentWillUpdate=function(e){this.props.message!==e.message&&(this.clearDismissTimeout(),this.setAutoDismissTimeout())},t.prototype.componentWillUnmount=function(){this.clearDismissTimeout()},t.prototype.render=function(){var e=null;return this.props.message===a().chatReplayFilterError&&(e=Rt.createElement(Qn._16,{type:Qn._21.Span},"",Rt.createElement(Qn._16,{type:Qn._21.Span,decoration:Qn._19.Underline},Rt.createElement("a",{onClick:this.props.onMessageClick},Object(Tt.d)("Click here to show all messages.","CommentError"))))),Rt.createElement(Qn._12,{alignItems:Qn.c.Center,background:Qn.m.Base,className:"anim-swoop",color:Qn.E.Error,"data-test-selector":"vod-chat-error",display:Qn.G.Flex,flexWrap:Qn.I.NoWrap,fullWidth:!0,padding:{y:1,x:2},position:Qn.Z.Absolute,zIndex:Qn._33.Above},Rt.createElement(Qn._16,{type:Qn._21.Span},this.props.message,e),Rt.createElement(Qn.S,{alignSelf:Qn.d.Start},Rt.createElement(Qn.u,{ariaLabel:Object(Tt.d)("Close","CommentErrorComponent"),icon:Qn._6.Close,onClick:this.onManualErrorDismissClickHandler})))},t}(Rt.Component),dr=n(1238),ur=n(502),pr=(n(1557),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildModerationDashboardURL=function(){return"https://www.twitch.tv/"+t.props.videoOwnerLogin+"/dashboard/moderation"},t.buildModerationPrefsURL=function(){return"https://www.twitch.tv/"+t.props.videoOwnerLogin+"/dashboard/settings/moderation"},t.onReplayModeChange=function(e){t.props.onReplayModeChange(e.currentTarget.checked)},t.onTimestampModeChange=function(e){t.props.onTimestampModeChange(e.currentTarget.checked)},t}return se.d(t,e),t.prototype.render=function(){var e=null;this.props.isUpload||(e=Rt.createElement(Qn.S,{display:Qn.G.Flex,flexWrap:Qn.I.NoWrap,justifyContent:Qn.R.Between,key:"viewerReplayOption",padding:{bottom:1}},Rt.createElement(Qn.S,null,Object(oe.d)("Show me only messages posted during the live broadcast","VideoChatSettings")),Rt.createElement(Qn.S,{flexShrink:0},Rt.createElement(Qn._24,{checked:this.props.isReplayFilterOn,"data-test-selector":"reply-mode",onChange:this.onReplayModeChange}))));var t=[Rt.createElement(Qn._16,{key:"moderationHeader",bold:!0},Object(oe.d)("Mod Tools","VideoChatSettings"))];return this.props.canSessionEditModerationSettings&&t.push(Rt.createElement(Qn.N,{key:"moderationPrefs",display:Qn.G.InlineBlock},Rt.createElement("a",{target:"_blank",href:this.buildModerationPrefsURL(),"data-test-selector":"video_chat_settings_mod_prefs"},Object(oe.d)("Change moderation preferences","VideoChatSettings")))),this.props.canSessionModerateMessages&&t.push(Rt.createElement(Qn.N,{key:"moderationDashboard",display:Qn.G.InlineBlock},Rt.createElement("a",{target:"_blank",href:this.buildModerationDashboardURL(),"data-test-selector":"video_chat_settings_mod_dashboard"},Object(oe.d)("Moderate messages","VideoChatSettings")))),Rt.createElement(Qn.S,{className:"video-chat__settings",padding:{x:2,y:2}},Rt.createElement(Qn._16,{bold:!0},Object(oe.d)("Viewer Settings","VideoChatSettings")),e,Rt.createElement(Qn.S,{display:Qn.G.Flex,justifyContent:Qn.R.Between,padding:{bottom:1}},Rt.createElement(Qn.S,null,Object(oe.d)("Hide timestamps","VideoChatSettings")),Rt.createElement(Qn.S,{flexShrink:0},Rt.createElement(Qn._24,{"data-test-selector":"timestamp-mode",checked:this.props.hideTimestamps,onChange:this.onTimestampModeChange}))),t.length>1?t:null)},t}(Rt.Component)),mr=Object(sr.c)("ChatSettings")(pr),hr=Object(er.connect)(Z,X)(mr),fr="@",gr="Enter",br="Escape",vr=" ",yr="videoChat.firstMessageSent",Sr=function(e){function t(t){var n=e.call(this,t)||this;n.onKeyDown=function(e){switch(e.key){case gr:e.preventDefault(),n.createComment();break;case vr:n.maybeUnpauseScrolling();break;case fr:n.setState({isMentionPaused:!n.state.isMentionPaused&&n.props.isScrollingSynced||n.state.isMentionPaused}),n.props.onScrollPause()}},n.createComment=function(){if(""!==n.state.newCommentText){if(n.props.isPostCooldownActive)return n.setState({showCoolDownState:!0}),void n.props.onError(ee());n.props.onCreateComment(n.state.newCommentText),oe.i.set(yr,!0),n.setState({newCommentText:""}),n.maybeUnpauseScrolling()}},n.maybeUnpauseScrolling=function(){n.state.isMentionPaused&&(n.setState({isMentionPaused:!1}),n.props.onScrollResume())},n.onChange=function(e){e.preventDefault(),n.setState({newCommentText:e.currentTarget.value})},n.onEmoticonClick=function(e){n.setState({newCommentText:n.state.newCommentText+" "+e}),n.maybeUnpauseScrolling()};var i=null!==n.props.currentUser&&(n.props.currentUser.id===n.props.videoOwnerID||!!n.props.currentUser.roles.isStaff),r=null!==n.props.currentUser&&(n.props.isModerator||n.props.currentUser.roles.isSiteAdmin||i);return n.state={isMentionPaused:!1,canSessionModerateMessages:r,canSessionEditModerationSettings:i,newCommentText:"",showCoolDownState:!1},n}return se.d(t,e),t.prototype.componentWillReceiveProps=function(e){e.isPostCooldownActive||this.setState({showCoolDownState:!1})},t.prototype.render=function(){var e=xt("form__input-group","form__input-group--2-icons-right",{"form__group--error":this.state.showCoolDownState}),t=null;(!this.props.isUpload||this.state.canSessionModerateMessages||this.state.canSessionEditModerationSettings)&&(t=Rt.createElement(dr.a,null,Rt.createElement(hr,{canSessionEditModerationSettings:this.state.canSessionEditModerationSettings,canSessionModerateMessages:this.state.canSessionModerateMessages,videoOwnerLogin:this.props.videoOwnerLogin,isUpload:this.props.isUpload})));var n=null;return oe.i.get(yr,!1)||(n=Rt.createElement(Qn.S,{padding:{bottom:.5},"data-test-selector":"video-chat-cta"},Rt.createElement(Qn.W,{label:"New"}),"",Object(oe.d)("Join the chat while watching the video!","MessageInput"))),Rt.createElement(Ai,null,Rt.createElement(Qn.S,{className:e},n,Rt.createElement(Qn.S,{position:Qn.Z.Relative},Rt.createElement(Pi,{className:"resize-none",maxLength:512,onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:Object(oe.d)("Post a message","CommentInput"),value:this.state.newCommentText,"data-a-target":"video-chat-input"}),Rt.createElement(ur.a,{channelOwnerID:this.props.videoOwnerID,onClickEmote:this.onEmoticonClick,attachTop:!0,attachRight:!0,position:Qn.Z.Absolute}))),Rt.createElement(Qn.S,{margin:{top:1},justifyContent:Qn.R.Between,display:Qn.G.Flex},t,Rt.createElement("span",null)," ",Rt.createElement(Qn.t,{onClick:this.createComment,disabled:this.state.showCoolDownState,"data-a-target":"video-chat-submit-button"},Rt.createElement(Qn.S,{display:Qn.G.Flex},Rt.createElement("span",null,Object(oe.d)("Post at ","CommentInput")),Rt.createElement(Qn.S,{margin:{x:.5},display:Qn.G.Flex},Rt.createElement(Qn._5,{asset:Qn._6.GlyphLength})),Rt.createElement("span",null,Wi(this.props.currentVideoTime))))))},t}(Rt.Component),kr=Object(sr.c)("MessageInput",{autoReportInteractive:!0})(Sr),Cr=(n(1558),function(e){var t=e.offset,n=e.onClick;return Rt.createElement(Qn._25,{align:Qn._26.Left,direction:Qn._27.Top,label:Object(oe.d)("Jump to video","TimeStamp")},Rt.createElement(Qn.N,{className:"vod-message__timestamp",margin:{right:.5},padding:{x:.5}},Rt.createElement("button",{onClick:n},Wi(t))))}),Er=n(1198),_r="ban-user",Tr="delete-comment-button",wr="reply-button",Nr="relative-time-title",Or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={confirmationAction:null,isMenuOpen:!1},t.onToggleMenu=function(){if(t.state.isMenuOpen)return void t.closeMenu();t.setState({isMenuOpen:!0}),t.props.onOpen()},t.getContent=function(){if("function"==typeof t.state.confirmationAction)return Rt.createElement(Qn.S,{padding:{y:1}},Rt.createElement(Qn.S,{className:"balloon__title",display:Qn.G.Flex},Object(oe.d)("Are you sure you want to perform this action?","chomments.moderation.confirmAction")),Rt.createElement(Qn.S,{display:Qn.G.Flex,justifyContent:Qn.R.Center,alignItems:Qn.c.Center},Rt.createElement(Qn.S,{display:Qn.G.Inline,padding:{right:1}},Rt.createElement(Qn.t,{type:Qn.y.Alert,onClick:t.onContinueClickHandler,"data-test-selector":Fi},Object(oe.d)("Continue","MessageOptionsMenu"))),Rt.createElement(Qn.t,{type:Qn.y.Hollow,onClick:t.onCancelClickHandler,"data-test-selector":Mi},Object(oe.d)("Cancel","MessageOptionsMenu"))));var e=[];t.props.isExpandedLayout||e.push(Rt.createElement(Qn.S,{key:t.props.context.comment.id,className:"balloon__title",display:Qn.G.Flex,"data-test-selector":Nr},Rt.createElement(Qn._16,{type:Qn._21.Span},Object(oe.d)("Posted ","MessageOptionsMenu"),Object(oe.f)(t.props.context.comment.createdAt))),Rt.createElement(Qn.S,{key:t.props.context.comment.id+"1",className:"balloon__stroke"}),Rt.createElement(Qn._12,{key:t.props.context.comment.id+"2",display:Qn.G.Flex,color:Qn.E.Link},Rt.createElement(Qn.Q,{onClick:t.onReplyClickHandler,"data-test-selector":wr},Rt.createElement(Qn.S,{padding:{y:.5,x:1}},Object(oe.d)("Reply to {userName}",{userName:t.props.context.author.displayName},"MessageOptionsMenu")))));var n=[];return t.props.isCurrentUserModerator&&n.push(Rt.createElement(Qn.S,{key:t.props.context.comment.id,display:Qn.G.Flex},Rt.createElement(Qn.Q,{alert:!0,onClick:t.onDeleteButtonClickHandler,"data-test-selector":Tr},Rt.createElement(Qn.S,{padding:{y:.5,x:1}},Object(oe.d)("Delete","MessageOptionsMenu")))),Rt.createElement(Qn.S,{key:t.props.context.comment.id+"1",className:"balloon__stroke"}),Rt.createElement(Qn.S,{key:t.props.context.comment.id+"2",display:Qn.G.Flex},Rt.createElement(Qn.Q,{alert:!0,onClick:t.onBanUserClickHandler,"data-test-selector":_r},Rt.createElement(Qn.S,{padding:{y:.5,x:1}},Object(oe.d)("Ban User","MessageOptionsMenu"))))),Rt.createElement(Qn.S,{padding:{y:1}},e,n)},t.closeMenu=function(){t.setState({isMenuOpen:!1,confirmationAction:null}),t.props.onClose()},t.onReplyClickHandler=function(){t.props.onReplyClick(t.props.context.author.displayName),t.closeMenu()},t.onBanUserClickHandler=function(){t.setState(function(e){return se.a({},e,{confirmationAction:t.props.onBanUserClick})})},t.onDeleteButtonClickHandler=function(){t.setState(function(e){return se.a({},e,{confirmationAction:t.props.onDeleteCommentClick})})},t.onContinueClickHandler=function(){"function"==typeof t.state.confirmationAction&&t.state.confirmationAction(),t.closeMenu()},t.onCancelClickHandler=function(){t.setState(function(e){return se.a({},e,{confirmationAction:null})})},t}return se.d(t,e),t.prototype.render=function(){return Rt.createElement(Qn.S,{position:Qn.Z.Relative},Rt.createElement(Ut.a,{onClickOut:this.closeMenu},Rt.createElement(Qn.u,{ariaLabel:Object(oe.d)("Message Actions Menu","VideoCommentsMenu"),size:Qn.w.Small,type:Qn.v.Secondary,"data-test-selector":"menu-button",icon:Qn._6.More,onClick:this.onToggleMenu}),Rt.createElement(Qn.p,{direction:Qn.q.BottomRight,show:this.state.isMenuOpen,size:Qn.r.Small},this.getContent())))},t}(Rt.Component),Dr=(n(1559),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={forceMenuVisibility:!1},t.onBanUserClickHandler=function(){t.props.onBanUserClick({bannedUser:t.props.context.comment.commenter,targetChannel:t.props.context.comment.channelId,comment:t.props.context.comment})},t.onDeleteCommentClickHandler=function(){t.props.onDeleteCommentClick(t.props.context.comment)},t.onMenuOpenHandler=function(){t.props.onDisableSync(),t.setState({forceMenuVisibility:!0})},t.onMenuCloseHandler=function(){t.setState({forceMenuVisibility:!1})},t}return se.d(t,e),t.prototype.render=function(){var e=this.props,t=e.context,n=e.badgeSets,i=e.currentUser,r=!!i&&t.comment.commenter===i.id,a=void 0!==t.comment.userBadges[Er.a],o=null;if(!this.props.isExpandedLayout||this.props.isCurrentUserModerator){var s=xt("video-chat__message-menu",{"video-chat__message-menu--force-visible":this.state.forceMenuVisibility});o=Rt.createElement(Qn.S,{className:s,"data-test-selector":"menu-options-wrapper",flexShrink:0},Rt.createElement(Or,{context:t,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.onBanUserClickHandler,onClose:this.onMenuCloseHandler,onDeleteCommentClick:this.onDeleteCommentClickHandler,onOpen:this.onMenuOpenHandler,onReplyClick:this.props.onReplyClick}))}var l=xt("video-chat__message-author",(u={},u["video-chat__message-author--me"]=r,u["video-chat__message-author--creator"]=a,u)),c=r||a?"":t.comment.message.userColor,d=Rt.createElement("span",{className:"pd-x-05"},":");return t.comment.message.isAction&&(d=Rt.createElement("span",{className:"pd-r-05"})),Rt.createElement(Qn.S,{alignItems:Qn.c.Start,display:Qn.G.Flex,flexWrap:Qn.I.NoWrap},Rt.createElement(Qn.S,{flexGrow:1},Rt.createElement(or.a,{badgesToRender:t.comment.userBadges,badgeSets:n}),Rt.createElement("a",{className:l,"data-test-selector":"comment-author-selector","data-tt_content":"tab_videos","data-tt_medium":"video-message-author",href:"/"+t.author.name,rel:"noopener noreferrer",target:"_blank",style:{color:c}},Rt.createElement(Qn._16,{type:Qn._21.Span},Ji(t.author))),Rt.createElement(Qn.S,{display:Qn.G.Inline,className:"video-chat__message","data-test-selector":"comment-message-selector"},d,Rt.createElement($i,{message:t.comment.message,allowActionTextColors:!0}))),o);var u},t}(Rt.Component)),Ir=(n(1560),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onReplyClickHandler=function(){t.props.replyCommentContext?t.props.onReplyClick(t.props.replyCommentContext.author.displayName):t.props.onReplyClick()},t}return se.d(t,e),t.prototype.render=function(){var e=Object(oe.d)("Reply","DashboardModerationReplyButton");return"vod-message"===this.props.context?Rt.createElement("button",{className:"video-chat-reply-button",onClick:this.onReplyClickHandler,"data-test-selector":"parent-reply-button"},Rt.createElement(Qn.S,{display:Qn.G.Flex},Rt.createElement(Qn.S,{className:"video-chat-reply-button__icon",display:Qn.G.Flex,padding:{right:.5}},Rt.createElement(Qn._5,{width:13,height:13,asset:Qn._6.Conversations,type:Qn._7.Inherit})),Rt.createElement(Qn._16,{align:Qn._32.Middle,type:Qn._21.Span},e))):"mod-dashboard"===this.props.context?Rt.createElement(Qn.S,{className:"video-chat-reply-button--moderation"},Rt.createElement(Qn.u,{ariaLabel:e,type:Qn.v.Hollow,icon:Qn._6.Conversations,onClick:this.onReplyClickHandler,"data-test-selector":"moderation-reply-button","data-a-selector":"qa-vod-chat-reply-button"})):Rt.createElement(Qn._12,{className:"video-chat-reply-button--child",color:Qn.E.Link,display:Qn.G.Inline,margin:{left:1}},Rt.createElement("button",{onClick:this.onReplyClickHandler,"data-test-selector":"reply-reply-button"},Rt.createElement(Qn._16,{type:Qn._21.Span},e)))},t}(Rt.Component)),Pr=(n(1561),function(e){function t(t){var n=e.call(this,t)||this;return n.submitReply=function(){if(""!==n.state.newReplyText){if(n.props.isCreationCoolDownActive)return n.setState({showCoolDownState:!0}),void(n.props.onError&&n.props.onError(te()));n.props.onReplySubmit(n.state.newReplyText),n.setState({newReplyText:""})}},n.onChange=function(e){e.preventDefault(),n.setState({newReplyText:e.currentTarget.value})},n.onEmoticonClick=function(e){n.setState({newReplyText:n.state.newReplyText+" "+e})},n.onKeyDown=function(e){e.key===gr&&(e.preventDefault(),n.submitReply()),n.props.onReplyFormClose&&e.key===br&&(e.preventDefault(),n.props.onReplyFormClose())},n.state={newReplyText:t.replyToUserDisplayName?"@"+t.replyToUserDisplayName+" ":"",showCoolDownState:!1},n}return se.d(t,e),t.prototype.componentWillReceiveProps=function(e){e.isCreationCoolDownActive||this.setState({showCoolDownState:!1}),e.replyToUserDisplayName&&e.replyToUserDisplayName!==this.props.replyToUserDisplayName&&this.setState({newReplyText:"@"+e.replyToUserDisplayName+" "})},t.prototype.render=function(){var e=xt("relative",this.props.classNames,{"form__group--error":this.state.showCoolDownState});return Rt.createElement(Ai,{className:e},Rt.createElement(Pi,{className:xt("resize-none","anim-fade","qa-vod-chat-reply-input"),onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:"Reply",maxLength:512,value:this.state.newReplyText,focusOnMount:!0}),Rt.createElement(ur.a,{channelOwnerID:this.props.videoOwnerID,onClickEmote:this.onEmoticonClick,attachTop:!0,attachRight:!0,position:Qn.Z.Absolute}))},t}(Rt.Component)),Ar=function(e){return Rt.createElement(Qn.S,{padding:{y:.5,left:1}},Rt.createElement(Qn.S,{className:"vod-message__content"},Rt.createElement(Dr,{badgeSets:e.badgeSets,context:e.context,currentUser:e.currentUser,isCurrentUserModerator:e.isCurrentUserModerator,isExpandedLayout:e.isExpandedLayout,onBanUserClick:e.onBanUserClick,onDeleteCommentClick:e.onDeleteCommentClick,onDisableSync:e.onDisableSync,onReplyClick:e.onReplyClick})))},xr="vod-message-reply",Rr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.makeReplyButtonAndRelativeTime=function(e){return Rt.createElement(Qn.S,{display:Qn.G.Flex,alignItems:Qn.c.Center},Rt.createElement(Ir,{context:xr,onReplyClick:t.props.onReplyClick,replyCommentContext:e}),Rt.createElement(Qn.N,{margin:{left:.5}},Rt.createElement(Qn._16,{color:Qn.E.Alt2,fontSize:7,type:Qn._21.Span},"  "+Object(oe.f)(e.comment.createdAt))))},t.makeReply=function(e){var n=null;return t.props.isExpandedLayout&&(n=t.makeReplyButtonAndRelativeTime(e)),Rt.createElement("li",{key:e.comment.id},Rt.createElement(Ar,{badgeSets:t.props.badgeSets,context:e,currentUser:t.props.currentUser,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:t.props.isExpandedLayout,onBanUserClick:t.props.onBanUserClick,onDeleteCommentClick:t.props.onDeleteCommentClick,onDisableSync:t.props.onDisableSync,onReplyClick:t.props.onReplyClick}),n)},t}return se.d(t,e),t.prototype.render=function(){var e=this.props.replies,t=e.map(this.makeReply.bind(this));return Rt.createElement("ul",null,t)},t}(Rt.Component),Fr=(n(1562),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onParentReplyClickHandler=function(){t.props.onReplyClick(t.props.parentMessage.author.displayName)},t}return se.d(t,e),t.prototype.render=function(){var e=null;!this.props.parentMessage.comment.moreReplies||this.props.isReplayFilterOn&&!this.props.isExpandedLayout||(e=Rt.createElement(Qn.S,{display:Qn.G.InlineBlock,className:"vod-message__show-more-replies"},Rt.createElement(Kn,{onClick:this.props.onLoadMoreRepliesClick})));var t=null;this.props.showReplyForm&&(t=Rt.createElement(Qn.S,{margin:{top:.5,bottom:1,x:1}},Rt.createElement(Pr,{isCreationCoolDownActive:this.props.isCreationCoolDownActive||!1,onError:this.props.onError,onReplyFormClose:this.props.onReplyFormClose,onReplySubmit:this.props.onReplySubmit,replyToUserDisplayName:this.props.replyToUserDisplayName,videoOwnerID:this.props.parentMessage.comment.channelId})));var n=null;return this.props.isExpandedLayout&&(n=Rt.createElement(Qn.S,{alignItems:Qn.c.Center,display:Qn.G.Flex},Rt.createElement(Ir,{context:"vod-message",onReplyClick:this.onParentReplyClickHandler}),Rt.createElement(Qn.N,{margin:{left:.5}},Rt.createElement(Qn._16,{color:Qn.E.Alt2,fontSize:7,type:Qn._21.Span},"  "+Object(oe.f)(this.props.parentMessage.comment.createdAt))))),Rt.createElement(Qn.S,null,n,Rt.createElement(Qn.S,{margin:{y:.5,left:.5},className:xt("vod-message__reply","qa-vod-chat-reply")},e,Rt.createElement(Rr,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.props.onReplyClick,replies:this.props.parentMessage.replies}),t))},t}(Rt.Component)),Mr=(n(1563),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showReplyForm:!1,replyToUserDisplayName:""},t.onReplyClickHandler=function(e){t.setState({showReplyForm:!0,replyToUserDisplayName:e},t.props.onDisableSync)},t.onReplyFormCloseHandler=function(){t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onReplySubmitHandler=function(e){t.props.onCreateReply(e,t.props.messageContext.comment.id),t.setState({showReplyForm:!1,replyToUserDisplayName:""})},t.onTimestampClickHandler=function(){t.props.onTimeStampClick(t.props.messageContext.comment.contentOffset,t.props.messageContext.comment)},t.onLoadMoreRepliesClickHandler=function(){t.props.onLoadMoreRepliesClick(t.props.messageContext.comment.id,t.props.messageContext.comment.contentId)},t.refHandler=function(e){t.shouldFocusMessage()&&t.props.onFocus(e)},t}return se.d(t,e),t.prototype.render=function(){var e=null;(this.props.isExpandedLayout||this.props.messageContext.replies.length>0||this.state.showReplyForm)&&(e=Rt.createElement(Fr,{badgeSets:this.props.badgeSets,currentUser:this.props.currentUser,isCreationCoolDownActive:this.props.isCreationCoolDownActive,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,isReplayFilterOn:this.props.isReplayFilterOn,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onError:this.props.onError,onLoadMoreRepliesClick:this.onLoadMoreRepliesClickHandler,onReplyClick:this.onReplyClickHandler,onReplyFormClose:this.onReplyFormCloseHandler,onReplySubmit:this.onReplySubmitHandler,parentMessage:this.props.messageContext,replyToUserDisplayName:this.state.replyToUserDisplayName,showReplyForm:this.state.showReplyForm}));var t=null;!1===this.props.hideTimestamp&&(t=Rt.createElement(Qn.S,{className:"vod-message__header","data-test-selector":"message-timestamp",display:Qn.G.Flex,flexShrink:0,textAlign:Qn._17.Right},Rt.createElement(Cr,{offset:this.props.messageContext.comment.contentOffset,onClick:this.onTimestampClickHandler})));var n=xt("vod-message",(r={},r["vod-message--focused"]=this.shouldFocusMessage(),r)),i=Rt.createElement(Qn.S,{alignItems:Qn.c.Start,className:n,"data-test-selector":"message-layout",display:Qn.G.Flex,flexWrap:Qn.I.NoWrap,fullWidth:!0,padding:{y:.5,left:this.props.hideTimestamp?2:.5},refDelegate:this.refHandler},t,Rt.createElement(Qn.S,{fullWidth:!0},Rt.createElement(Dr,{badgeSets:this.props.badgeSets,context:this.props.messageContext,currentUser:this.props.currentUser,isCurrentUserModerator:this.props.isCurrentUserModerator,isExpandedLayout:this.props.isExpandedLayout,onBanUserClick:this.props.onBanUserClick,onDeleteCommentClick:this.props.onDeleteCommentClick,onDisableSync:this.props.onDisableSync,onReplyClick:this.onReplyClickHandler}),e));return this.props.messageContext.comment.highlight||!1?Rt.createElement(Qn.e,{duration:Qn.g.Medium,enabled:!0,type:Qn.i.FadeIn},i):i;var r},t.prototype.shouldFocusMessage=function(){return this.props.highlight},t}(Rt.Component)),Ur=(n(1564),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={firstScroll:!0},t.componentInitiatedScroll=!1,t.mouseDragging=!1,t.preventScrolling=!1,t.allowScrolling=function(){t.preventScrolling=!1},t.atBottom=function(){var e=t.commentListRef.scrollTop,n=t.commentListRef.scrollHeight;return e+t.commentListRef.clientHeight===n},t.bindCommentListRef=function(e){t.commentListRef=e},t.onMouseDown=function(){t.preventScrolling=!1,t.mouseDragging=!0},t.onMouseUp=function(){t.mouseDragging=!1},t.onScroll=function(){t.shouldFireOnScroll()&&(t.componentInitiatedScroll||(t.atBottom()?t.props.onScrollBottom():t.props.onScrollOffBottom()),t.componentInitiatedScroll=!1,t.preventScrolling=!0)},t.syncButtonClick=function(){t.preventScrolling=!1,t.props.onSyncScrollClick()},t}return se.d(t,e),t.prototype.componentDidMount=function(){this.props.onMount()},t.prototype.componentDidUpdate=function(){this.preventScrolling=!0,this.props.isScrollingSynced&&(this.preventScrolling=!1,this.componentInitiatedScroll=!0,this.commentListRef.scrollTop=this.commentListRef.scrollHeight)},t.prototype.render=function(){var e=xt("video-chat__message-list-wrapper",(n={},n["video-chat__message-list-wrapper--unsynced"]=!this.props.isScrollingSynced,n)),t=null;return!1===this.props.isScrollingSynced&&(t=Rt.createElement(Mt,{blurAfterClick:!0,className:"video-chat__sync-button",onClick:this.syncButtonClick},Object(Tt.d)("Resume auto scroll","MessageScrollArea"))),Rt.createElement(Qn._12,{className:"video-chat--full-height",fullHeight:!0,overflow:Qn.V.Hidden,position:Qn.Z.Relative},Rt.createElement("div",{className:e,onKeyDown:this.allowScrolling,onMouseMove:this.allowScrolling,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onScroll:this.onScroll,onWheel:this.allowScrolling,ref:this.bindCommentListRef,tabIndex:-1},this.props.children),t);var n},t.prototype.shouldFireOnScroll=function(){return!this.mouseDragging&&this.preventScrolling?(this.componentInitiatedScroll=!1,!1):!(this.state.firstScroll&&!this.props.startSynced)||(this.setState({firstScroll:!1}),!1)},t}(Rt.Component)),Lr=(n(1565),5e3),jr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={commentAlreadyFocused:!1},t.badgeSets=new or.b([],[],""),t.createComment=function(e){var n={contentId:t.props.videoID,contentOffsetSeconds:t.props.currentVideoTime,contentType:ot,message:e};t.onCreate(n)},t.createReply=function(e,n){var i={message:e,parentId:n};t.onCreate(i)},t.onErrorDismissedHandler=function(e){t.props.onError("");var n=t.props.errorMessage===a().chatReplayFilterError;e&&t.props.shouldSendReplayFilterError&&n&&t.props.onErrorDismissClick()},t.onErrorMessageClickHandler=function(){t.props.onError(""),t.props.onTurnOffReplayFilter()},t.onMessageScrollAreaMount=function(){t.props.highlightedMessageID&&""!==t.props.highlightedMessageID&&t.props.onDisableSync()},t.onError=function(e){t.props.onError(e)},t.onLoadMoreRepliesHandler=function(e,n){var i=t.props.data.video.owner.cheer&&t.props.data.video.owner.cheer.emotes||[];t.props.onLoadMoreReplies(e,t.props.replyCursorMap,n,Object(tr.a)(i))},t.focusedCommentCallback=function(e){t.setState({commentToFocus:e})},t.startUnfocusTimeout=function(){t.focusTimer=setTimeout(function(){t.setState({commentAlreadyFocused:!0})},Lr)},t}return se.d(t,e),t.prototype.componentWillMount=function(){this.props.onWillMount()},t.prototype.componentWillReceiveProps=function(e){void 0!==e.highlightedMessageID&&this.props.highlightedMessageID!==e.highlightedMessageID&&(this.props.onPlayerSeekRequest(e.highlightTimestamp),this.props.onDisableSync(),this.setState({commentAlreadyFocused:!1})),ne(this.props,e)&&(this.badgeSets=new or.b([],[],""),e.data.loading||e.data.error||(this.badgeSets=new or.b(e.data.badges,e.data.video.owner.broadcastBadges,e.data.video.owner.login))),(0,this.props.onUpdateBegan)(e,this.props)},t.prototype.componentDidUpdate=function(){if(this.props.data.loading||this.props.data.error||!this.props.hasFetchedComments||this.props.latencyTracking.reportInteractive(),this.state.commentToFocus){(this.state.commentToFocus.nextElementSibling||this.state.commentToFocus).scrollIntoView(!1),this.setState({commentToFocus:void 0}),this.startUnfocusTimeout()}},t.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimer),this.props.onUnmount()},t.prototype.render=function(){var e,t=this,n=this.props,i=n.comments,r=n.highlightedMessageID,a=n.data;if(this.props.data.loading)e=Rt.createElement(Qn.U,{fillContent:!0});else if(this.props.data.error)e=Rt.createElement(Qn.S,{alignItems:Qn.c.Center,"data-test-selector":"video-chat-error",fullHeight:!0,justifyContent:Qn.R.Center},Rt.createElement(Qn._16,{italic:!0},Object(Tt.d)("Video Chat is currently unavailable.","VideoChat")));else{var o=void 0;o=this.props.hasFetchedComments&&this.props.offsetRange===yn?Rt.createElement(Qn.N,{display:Qn.G.Flex,margin:{x:1,top:2,bottom:1},alignItems:Qn.c.Center},Rt.createElement("li",{"data-test-selector":"no-comments-cta"},Rt.createElement("img",{className:"mg-r-1",src:cn(65),srcSet:dn(65)}),Object(Tt.d)("Join the chat while watching the video!","VideoChatComponent"))):i.map(function(e,n){var i=!t.state.commentAlreadyFocused&&e.comment.id===r,o=n+1===t.props.comments.length,s=!t.props.isScrollingSynced&&o;return Rt.createElement(Qn.N,{padding:s?{bottom:3}:{},key:e.comment.id,fullWidth:!0},Rt.createElement("li",null,Rt.createElement(Mr,{badgeSets:t.badgeSets,currentUser:a.currentUser,highlight:i,isCreationCoolDownActive:t.props.isCreationCoolDownActive,isCurrentUserModerator:t.props.isCurrentUserModerator,isExpandedLayout:a.video.broadcastType===Gt.a.Upload,isReplayFilterOn:t.props.isReplayFilterOn,messageContext:e,onBanUserClick:t.props.onBanUser,onCreateReply:t.createReply,onDeleteCommentClick:t.props.onDeleteComment,onDisableSync:t.props.onDisableSync,onError:t.onError,onFocus:t.focusedCommentCallback,onLoadMoreRepliesClick:t.onLoadMoreRepliesHandler,onTimeStampClick:t.props.onPlayerSeekRequest,hideTimestamp:t.props.hideTimestamps})))}),e=Rt.createElement("ul",{style:{minHeight:0}},o)}var s=void 0===this.props.highlightedMessageID,l=null;""!==this.props.errorMessage&&(l=Rt.createElement(cr,{message:this.props.errorMessage,onErrorDismissed:this.onErrorDismissedHandler,onMessageClick:this.onErrorMessageClickHandler}));var c;return c=this.props.data.loading||this.props.data.error?Rt.createElement(Qn.Y,{"data-test-selector":"message-input-placeholder",height:120,width:340}):Rt.createElement(kr,{currentUser:this.props.data.currentUser,currentVideoTime:this.props.currentVideoTime,onError:this.onError,isModerator:!!this.props.data.video.owner.self&&this.props.data.video.owner.self.isModerator,isReplayMode:this.props.isReplayFilterOn,isScrollingSynced:this.props.isScrollingSynced,isPostCooldownActive:this.props.isCreationCoolDownActive,isUpload:a.video.broadcastType===Gt.a.Upload,onCreateComment:this.createComment,onScrollPause:this.props.onDisableSync,onScrollResume:this.props.onEnableSync,videoOwnerID:this.props.data.video.owner.id,videoOwnerLogin:this.props.data.video.owner.login}),Rt.createElement(Qn._12,{className:xt("video-chat","qa-vod-chat","video-chat--full-height"),display:Qn.G.Flex,borderLeft:!0,color:Qn.E.Alt,flexDirection:Qn.H.Column,flexShrink:0,flexWrap:Qn.I.NoWrap,fullHeight:!0,fullWidth:!0,position:Qn.Z.Relative},Rt.createElement(Qn.S,{alignItems:Qn.c.Center,className:"video-chat__header",display:Qn.G.Flex,justifyContent:Qn.R.Center},Rt.createElement(Qn._16,{type:Qn._21.Span},Object(Tt.d)("Chat on Videos","VideoChatPresentation"))),l,Rt.createElement(Ur,{startSynced:s,isScrollingSynced:this.props.isScrollingSynced,onScrollOffBottom:this.props.onDisableSync,onScrollBottom:this.props.onEnableSync,onMount:this.onMessageScrollAreaMount,onSyncScrollClick:this.props.onEnableSync},Rt.createElement(Qn.S,{className:"video-chat--full-height",display:Qn.G.Flex,flexDirection:Qn.H.Column,fullHeight:!0,justifyContent:Qn.R.End},Rt.createElement(Qn.N,{display:Qn.G.Flex,alignItems:Qn.c.End,fullWidth:!0},e))),Rt.createElement(Qn.S,{className:"video-chat__input",padding:{top:1,bottom:2,x:2},flexShrink:0,fullWidth:!0},c))},t.prototype.onCreate=function(e){this.props.isLoggedIn?this.props.onCreate(e):this.props.onShowLogin()},t}(Rt.Component),Br=Object(sr.c)("VideoChat")(jr),Vr=n(1566),Hr=2,Wr=function(e,t,n){var i=t.onDisableSync;e.isScrollingSynced||(i=function(){});var r=t.onCreate;return e.shouldSendReplayFilterError&&(r=function(e){t.onError(a().chatReplayFilterError),t.onCreate(e)}),se.a({},e,t,{onDisableSync:i,onCreate:r,data:n.data})},qr=Object(er.connect)(ie,re,Wr)(Br),Gr=Object(Xi.graphql)(Vr,{options:function(e){return{variables:{videoID:e.videoID}}},props:function(e){var t=e.ownProps,n=e.data,i=Object(tr.a)(n&&!n.loading&&!n.error&&n.video.owner.cheer&&n.video.owner.cheer.emotes||[]);return se.a({},t,{data:n,bitsConfig:i})}})(qr);n.d(t,"e",function(){return Mt}),n.d(t,!1,function(){return"hollow"}),n.d(t,!1,function(){return"text"}),n.d(t,"b",function(){return Bt}),n.d(t,"d",function(){return Wt}),n.d(t,"c",function(){return Vt}),n.d(t,"r",function(){return"down"}),n.d(t,"w",function(){return"right"}),n.d(t,!1,function(){return qt}),n.d(t,"P",function(){return En}),n.d(t,"B",function(){return Me}),n.d(t,"D",function(){return at}),n.d(t,"I",function(){return F}),n.d(t,"J",function(){return M}),n.d(t,"A",function(){return P}),n.d(t,"z",function(){return Gn}),n.d(t,"L",function(){return qn}),n.d(t,"N",function(){return zn}),n.d(t,"O",function(){return $n}),n.d(t,"Q",function(){return z}),n.d(t,"R",function(){return $}),n.d(t,"v",function(){return Kn}),n.d(t,"C",function(){return ki}),n.d(t,"E",function(){return Ci}),n.d(t,"M",function(){return Si}),n.d(t,"W",function(){return Ei}),n.d(t,"S",function(){return wi}),n.d(t,"T",function(){return Oi}),n.d(t,"U",function(){return Ni}),n.d(t,"V",function(){return Di}),n.d(t,"n",function(){return Pi}),n.d(t,"l",function(){return Ai}),n.d(t,"k",function(){return"form__group"}),n.d(t,"g",function(){return"pending_review"}),n.d(t,"i",function(){return"unpublished"}),n.d(t,"f",function(){return"pending_review_spam"}),n.d(t,"h",function(){return"published"}),n.d(t,"K",function(){return ct}),n.d(t,"j",function(){return Ui}),n.d(t,!1,function(){return"Spam, Scams, or Other Malicious Content"}),n.d(t,!1,function(){return"Site Suspension Evasion"}),n.d(t,"a",function(){return Li}),n.d(t,"u",function(){return Gi}),n.d(t,"q",function(){return $i}),n.d(t,"G",function(){return Wi}),n.d(t,"H",function(){return vn}),n.d(t,"x",function(){return Qi.c}),n.d(t,"F",function(){return Ji}),n.d(t,"m",function(){return Zi}),n.d(t,"o",function(){return"mod-dashboard"}),n.d(t,"p",function(){return"mod-comment"}),n.d(t,"y",function(){return Gr}),n.d(t,"t",function(){return Pr}),n.d(t,"s",function(){return Ir})},1201:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"cheer"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"prefix"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"tiers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bits"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"color"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"images"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"theme"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"isAnimated"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"dpiScale"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}]}}],loc:{start:0,end:270}};n.loc.source={body:"fragment cheer on User {\n  cheer {\n    id\n    emotes {\n      id\n      prefix\n      type\n      tiers {\n        id\n        bits\n        color\n        images {\n          id\n          url\n          theme\n          isAnimated\n          dpiScale\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1202:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i="AD",r="BUNDLE"},1203:function(e,t,n){"use strict";function i(e){return"https://www.twitch.tv/"+e+"/subscribe?ref=in_chat_subscriber_link"}function r(e){switch(e.clickAction){case o.d:return e.clickURL;case o.b:return e.channelName?i(e.channelName):"";case o.c:return l;default:return""}}var a=n(0),o=n(1198),s=n(3),l=(n(1235),"https://www.twitch.tv/products/turbo?ref=chat_badge"),c=function(e){var t=e.badge,n=a.createElement("img",{alt:t.title,className:"chat-badge",src:t.image1x,srcSet:t.image1x+" 1x, "+t.image2x+" 2x, "+t.image4x+" 4x"}),i=r(t);return""!==i&&(n=a.createElement("a",{href:i,target:"_blank"},n)),a.createElement(s._25,{key:t.image1x,label:t.title,display:s.G.Inline,align:s._26.Left,offsetY:"0.9rem","data-a-target":"chat-badge"},n)};n.d(t,"a",function(){return d});var d=function(e){var t=Object.keys(e.badgesToRender).map(function(t){var n=e.badgesToRender[t],i=e.badgeSets.getBadge(t,n);return null===i?null:a.createElement(c,{key:i.setID+"/"+i.version,badge:i})}),n=t.filter(function(e){return null!==e});return a.createElement("span",null,n)}},1207:function(e,t,n){"use strict";function i(e){return Object(m.bindActionCreators)({closeModal:c.c},e)}function r(e){return u.b(this,void 0,void 0,function(){var t,n,i,r,a;return u.e(this,function(o){switch(o.label){case 0:if(t=h.b.get("bits_truex_partner_hash",""),!(n=h.b.get("bits_truex_api_url",""))||!t)return h.g.warn("Truex API info missing from dynamic settings"),[2,v.Error];o.label=1;case 1:return o.trys.push([1,5,,6]),[4,fetch(n+"?placement.key="+t+"&user.uid="+e+"&max_activities=1")];case 2:return i=o.sent(),i.ok?[4,i.json()]:[3,4];case 3:if((r=o.sent())&&Array.isArray(r)&&r.length)return[2,v.Available];o.label=4;case 4:return[2,v.Unavailable];case 5:return a=o.sent(),h.g.warn("Failed checking ad availability from TrueX, probably due to AdBlock",a),[2,v.AdBlocked];case 6:return[2]}})})}function a(e){return{adModalOpen:Object(d.b)(e,_)}}function o(e){return{showWatchAdModal:function(t){return e(Object(c.d)(_,t))}}}var s,l=n(10),c=n(39),d=n(104),u=n(1),p=n(0),m=n(11),h=n(2),f=n(128),g=n(8),b=n(25);!function(e){e[e.ExitEarly=0]="ExitEarly",e[e.Unknown=1]="Unknown",e[e.Adblock=2]="Adblock",e[e.LimitReached=3]="LimitReached"}(s||(s={}));var v,y=n(499),S=n(1186),k=n(3),C=n(1228),E=(n(1229),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.hasAwarded=!1,t.messageHandler=function(e){return u.b(t,void 0,void 0,function(){var t,n,i,r,r,a,o;return u.e(this,function(l){switch(l.label){case 0:if(e.origin!==window.location.origin)return[2];if(!(t=e.data)||"trueXAd"!==t.msgSrc)return[2];switch(n=t.type){case y.a.Ready:return[3,1];case y.a.RequestAd:return[3,2];case y.a.Dimensions:return[3,3];case y.a.OnStart:return[3,4];case y.a.OnCredit:return[3,5];case y.a.OnClose:case y.a.OnFinish:case y.a.LimitReached:case y.a.Adblock:case y.a.OnError:return[3,9]}return[3,10];case 1:return i={msgSrc:"wateb-ad-modal",tuid:this.props.tuid},e.source.postMessage(i,"*"),[2];case 2:try{if(!(r=JSON.parse(t.activityJSON)))return[2];Object(S.f)({campaignID:r.campaign_id.toString(),requestID:t.requestID,requestMethod:this.props.requestRef})}catch(e){}return[2];case 3:return t.height&&t.width&&this.setState({customDimensions:{height:t.height,width:t.width}}),[3,10];case 4:try{if(!(r=JSON.parse(t.activityJSON)))return[2];Object(S.e)({requestID:t.requestID,adblock:!1,campaignID:r.campaign_id.toString()})}catch(e){}return[2];case 5:return l.trys.push([5,7,,8]),[4,this.props.redeemTrueXAd(Object(b.a)({args:t.engagement.signature_argument_string,signature:t.engagement.signature,trueXAd:{creativeID:t.engagement.ad.creative_id,campaignID:t.engagement.ad.campaign_id,name:t.engagement.ad.name,currencyAmount:t.engagement.ad.currency_amount},targetID:this.props.channelID}))];case 6:return a=l.sent(),this.hasAwarded=!0,this.props.onBitsAwarded&&this.props.onBitsAwarded(a.data.redeemTrueXAd.grantedBits),[3,8];case 7:return o=l.sent(),h.g.warn("Error while redeeming bits for truex ad",o),this.props.onError&&this.props.onError(s.Unknown),[3,8];case 8:return[3,10];case 9:return this.props.onError&&(t.type===y.a.LimitReached?this.props.onError(s.LimitReached):t.type===y.a.Adblock?this.props.onError(s.Adblock):t.type===y.a.OnError?this.props.onError(s.Unknown):this.hasAwarded||this.props.onError(s.ExitEarly)),this.props.closeModal(),[3,10];case 10:return[2]}})})},t}return u.d(t,e),t.prototype.componentWillMount=function(){window.addEventListener("message",this.messageHandler)},t.prototype.componentWillUnmount=function(){window.removeEventListener("message",this.messageHandler)},t.prototype.render=function(){return p.createElement(k._12,{background:k.m.Base},p.createElement("div",{className:"t-watch-ads-modal",style:this.state.customDimensions},p.createElement(f.a,null),p.createElement("iframe",{src:"/products/bits/ad"})))},t=u.c([Object(g.a)(C,{name:"redeemTrueXAd"})],t)}(p.Component)),_=Object(l.connect)(null,i)(E),T=n(4),w=n(38),N=n(1194);!function(e){e[e.Error=0]="Error",e[e.AdBlocked=1]="AdBlocked",e[e.Unavailable=2]="Unavailable",e[e.Available=3]="Available"}(v||(v={}));var O,D=n(1189),I=function(e){return p.createElement(k.S,{display:k.G.Flex,flexGrow:1,flexDirection:k.H.Column,alignItems:k.c.Center,fullWidth:!0,flexWrap:k.I.NoWrap,padding:{y:1}},p.createElement(D.a,{prefix:"cheer",amount:e.amount,bitsConfig:e.bitsConfig}),p.createElement(k.S,{display:k.G.Flex,padding:{top:1},flexGrow:1,flexDirection:k.H.Column,alignItems:k.c.Center,flexWrap:k.I.NoWrap},p.createElement(k._16,{type:k._21.H4,bold:!0},Object(h.d)("You got {bitsAmount,number} Bits!",{bitsAmount:e.amount},"Bits--WatchAdAward")),p.createElement(k.N,{padding:{top:1}},p.createElement(k._16,{color:k.E.Alt2},Object(h.d)("{bitsAmount,number} Bits were added to your Bit inventory.",{bitsAmount:e.amount},"Bits--WatchAdAward"),p.createElement("br",null),Object(h.d)("You can use these Bits to Cheer!","Bits--WatchAdAward")))),p.createElement(k.S,{display:k.G.Flex,padding:{x:1,top:3},alignSelf:k.d.Stretch,justifyContent:k.R.Between},p.createElement(k.t,{onClick:e.onStartCheering},Object(h.d)("Start Cheering","Bits--WatchAdAward")),p.createElement(k.t,{type:k.y.Hollow,onClick:e.onWatchAnother,disabled:!e.hasAdAvailable},Object(h.d)("Watch Another","Bits--WatchAdAward"))))},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasAdAvailable:!0},t}return u.d(t,e),t.prototype.componentWillMount=function(){return u.b(this,void 0,void 0,function(){var e;return u.e(this,function(t){switch(t.label){case 0:return[4,r(this.props.truexUserID)];case 1:return e=t.sent(),e!==v.Available&&this.setState({hasAdAvailable:!1}),[2]}})})},t.prototype.render=function(){return p.createElement(I,u.a({},this.props,{hasAdAvailable:this.state.hasAdAvailable}))},t}(p.Component),A=n(320),x=(n(1231),function(e){var t=Object(h.d)("Something's wrong!","Bits--WatchAdError"),n=Object(h.d)("Something went wrong. Wait a while and try again.","Bits--WatchAdError"),i="adserrorgeneric";switch(e.type){case s.Adblock:i="adserroradblock",n=Object(h.d)("We can't load this Ad, probably because Ad Blocking software is running. To watch an ad and get Bits, please disable all Ad Blocking software.","Bits--WatchAdError");break;case s.LimitReached:i="adserrorlimit",t=Object(h.d)("Ad Limit Reached","Bits--WatchAdError"),n=Object(h.d)("That's all the Ads we have for now. Try again tomorrow!","Bits--WatchAdError");break;case s.ExitEarly:n=Object(h.d)("To get Bits, you must view and interact with the Ad for the minimum amount of time.","Bits--WatchAdError")}var r=p.createElement(k.S,{className:"watch-ad-error__footer",display:k.G.Flex,padding:{top:2},alignSelf:k.d.Stretch,justifyContent:k.R.Center},p.createElement(k.t,{onClick:e.onTryAgain},Object(h.d)("Try Again","Bits--WatchAdError")));return e.type===s.LimitReached&&(r=p.createElement(k.S,{className:"watch-ad-error__footer",display:k.G.Flex,padding:{top:2},alignSelf:k.d.Stretch,justifyContent:k.R.Between},p.createElement(k.t,{onClick:e.onClose},Object(h.d)("Got It","Bits--WatchAdError")),p.createElement(k.t,{onClick:e.onTryAgain,type:k.y.Hollow},Object(h.d)("Buy Bits","Bits--WatchAdError")))),p.createElement(k.S,{padding:{x:1},display:k.G.Flex,flexGrow:1,flexDirection:k.H.Column,alignItems:k.c.Center,fullWidth:!0,flexWrap:k.I.NoWrap},p.createElement(k.S,{padding:{y:2}},p.createElement("img",{className:"watch-ad-error__error-image",src:A.a+"/light/static/1/"+i+".png"})),p.createElement(k.S,{padding:{bottom:1}},p.createElement(k._16,{type:k._21.H4,bold:!0},t)),p.createElement(k._16,{color:k.E.Alt2},n),r)}),R=function(e){var t=null;return e.disableWatchAd&&(t=Object(h.d)("Try again later","Bits--WatchAdOffer")),p.createElement(k._12,{className:"bits-buy-card__offer-row",display:k.G.Flex,flexShrink:0,borderBottom:!0,justifyContent:k.R.Between,flexWrap:k.I.NoWrap,padding:{x:1,top:1,bottom:.5}},p.createElement(k.S,{padding:{right:4}},p.createElement("strong",null,Object(h.d)("Get {minBitsCount} or more Bits by watching short ads",{minBitsCount:e.minPayout},"Bits--WatchAdOffer"))),p.createElement(k.S,{flexShrink:0,display:k.G.Flex,flexDirection:k.H.Column,alignItems:k.c.End},p.createElement(k.t,{type:k.y.Hollow,"data-a-target":"bits-watch-ad",onClick:e.onWatchAdClick,disabled:e.disableWatchAd},Object(h.d)("Watch Ad","Bits--WatchAdOffer")),t&&p.createElement(k.S,{className:"bits-buy-card__sub-text",alignSelf:k.d.Stretch,textAlign:k._17.Center,margin:{top:.5}},t)))},F=/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={enableWatchAd:!0},t}return u.d(t,e),t.prototype.componentWillMount=function(){return u.b(this,void 0,void 0,function(){var e;return u.e(this,function(t){switch(t.label){case 0:return[4,r(this.props.truexUserID)];case 1:return e=t.sent(),Object(S.d)({channel:this.props.channelLogin,channelID:this.props.channelID,available:e===v.Available}),e!==v.Available&&e!==v.AdBlocked&&this.setState({enableWatchAd:!1}),[2]}})})},t.prototype.render=function(){return F.test(navigator.userAgent)?null:p.createElement(R,u.a({},this.props,{disableWatchAd:!this.state.enableWatchAd}))},t}(p.Component),U=n(1202),L=n(491),j=n(1191),B=n(494),V=n(492),H=n(1232);n(1233);!function(e){e[e.GetBitsButton=0]="GetBitsButton",e[e.ChatTooltip=1]="ChatTooltip"}(O||(O={}));var W;!function(e){e[e.Inactive=0]="Inactive",e[e.Error=1]="Error",e[e.Awarded=2]="Awarded"}(W||(W={}));var q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={wateb:W.Inactive,watebError:null,bitsAwarded:0},t.handleBuyClick=function(e){var n=t.props.data&&t.props.data.user?t.props.data.user.id:"",i=Object(j.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:n,purchaseUrl:e.currentTarget.dataset.purchaseUrl,bitsAmount:e.currentTarget.dataset.bitsAmount,closeAllBits:t.props.closeAllBits});i&&(t.onBuyPopupClose(i),t.props.onClose())},t.onBuyPopupClose=function(e){Object(N.a)(e,function(){t.props.data&&t.props.data.refetch()})},t.onAdBitsAwarded=function(e){t.props.data&&!t.props.data.loading&&t.props.data.refetch(),t.setState({wateb:W.Awarded,bitsAwarded:e})},t.handleWatchAdClick=function(){return u.b(t,void 0,void 0,function(){return u.e(this,function(e){return this.props.data&&this.props.data.currentUser&&this.props.data.user?(this.props.showWatchAdModal({tuid:this.props.data.currentUser.idSHA1,onBitsAwarded:this.onAdBitsAwarded,onError:this.receiveAdErrorState,requestRef:S.b.ShowAdButton,channelID:this.props.data.user.id}),[2]):[2]})})},t.receiveAdErrorState=function(e){t.setState({wateb:W.Error,watebError:e})},t.resetAdErrorState=function(){t.state.wateb===W.Error&&(t.setState({wateb:W.Inactive}),t.props.data&&t.props.data.refetch())},t}return u.d(t,e),t.prototype.shouldComponentUpdate=function(e){return!e.adModalOpen},t.prototype.render=function(){var e=this,t={border:!0,background:k.m.Base,fullWidth:!0,elevation:3},n=T({"bits-buy-card":!0,"bits-buy-card__chat-tooltip":this.props.location===O.ChatTooltip}),i=null;if(this.props.location===O.ChatTooltip&&(i=p.createElement("button",{className:"bits-buy-card__close",onClick:this.props.onClose,"data-a-target":"bits-buy-card-close-button"},p.createElement(k._5,{asset:k._6.Close,height:11,width:11}))),!this.props.data||this.props.data.loading)return p.createElement(k._12,u.a({className:n,"data-a-target":"bits-buy-card-loading",display:k.G.Flex,flexDirection:k.H.Column,alignItems:k.c.Center,justifyContent:k.R.Center,textAlign:k._17.Center},t),p.createElement(k.U,{delay:0}),p.createElement(k.S,{padding:{top:2}},p.createElement(k._16,{italic:!0},Object(h.d)("Fetching bits","Bits--BuyCard"))));if(this.props.data.error||!this.props.data.currentUser)return p.createElement(k.S,u.a({className:"bits-buy-card bits-buy-card--shorter",display:k.G.Flex,flexDirection:k.H.Column,alignItems:k.c.Center,justifyContent:k.R.Center,padding:2,textAlign:k._17.Center,"data-a-target":"bits-buy-card-error"},t),i,p.createElement(k._16,{italic:!0},Object(h.d)("Bits prices are unavailable right now. Check back again later.","Bits--BuyCard")));var r=this.renderWatebCard();if(r)return p.createElement(k._12,u.a({className:"bits-buy-card bits-buy-card--shorter",display:k.G.Flex,flexDirection:k.H.Column,alignItems:k.c.Center,justifyContent:k.R.Center,textAlign:k._17.Center,padding:1},t),i,r);var a=this.props.data.currentUser.bitsOffers.length,o=null,s=null,l=[],c=null;this.props.data.currentUser.bitsOffers.filter(function(e){return e.type===U.b}).some(function(e){return e.includesVAT})&&(c=p.createElement(k._16,{italic:!0,type:k._21.P,color:k.E.Alt},Object(h.d)("Prices include VAT","Bits--BuyCard")));var d=this.props.data.user?this.props.data.user.id:"";this.props.data.currentUser.bitsOffers.forEach(function(t,n){if(t.type===U.a){var i=e.props.data&&e.props.data.currentUser?e.props.data.currentUser.idSHA1:"";return void(o=p.createElement(M,{key:"wateb",minPayout:t.bits,onWatchAdClick:e.handleWatchAdClick,truexUserID:i,channelID:d,channelLogin:e.props.channelLogin}))}var r=t.id===h.b.get("bits_special_promo_offer_id",""),c=null,m=null;if(r){c=p.createElement(k.S,{className:"bits-buy-card__bonus-text bits-buy-card__bonus-text-headline"},p.createElement(k._16,{type:k._21.Strong,fontSize:k.J.Size7},Object(h.d)("Special Offer: 1st Time Buyers","Bits--BuyCard")));var f=h.b.get("bits_special_promo_bonus_payout",0);f&&(m=p.createElement("span",{className:"bits-buy-card__bonus-text"},Object(h.d)("+{bonusAmount} Bonus Bits",{bonusAmount:f},"Bits--BuyCard")));var g=h.b.get("bits_special_promo_base_payout",0);g&&(t=u.a({},t,{bits:g}))}var b=null;t.discount&&(b=p.createElement("div",{className:"bits-buy-card__sub-text"},Object(h.d)("{percentOff,number,percent} discount",{percentOff:t.discount},"Bits--BuyCard")));var v=null;r&&(v=p.createElement("div",{className:"bits-buy-card__sub-text"},Object(h.d)("one per account","Bits--BuyCard")));var y=n+1<a,S=y?k._12:k.S,C=p.createElement(S,{className:"bits-buy-card__offer-row",key:t.id,flexShrink:0,display:k.G.Flex,borderBottom:y,flexDirection:k.H.Column,padding:{x:1,top:1,bottom:.5}},c,p.createElement(k.S,{display:k.G.Flex,justifyContent:k.R.Between},p.createElement(k.S,{flexGrow:1},p.createElement("strong",null,t.bits," Bits ",m),e.getAvailableTiers(t.bits)),p.createElement(k.S,{flexShrink:0,display:k.G.Flex,flexDirection:k.H.Column,alignItems:k.c.End},p.createElement(k.t,{onClick:e.handleBuyClick,"data-purchase-url":t.url,"data-bits-amount":t.bits,"data-a-target":"bits-purchase-button-"+t.bits},t.price),(b||v)&&p.createElement(k.S,{alignSelf:k.d.Stretch,textAlign:k._17.Center,margin:{top:.5}},b,v))));r?s=C:l.push(C)}),s&&!this.props.hidePromos&&l.unshift(s),o&&!this.props.hideWateb&&l.unshift(o);var m=null;this.props.data&&this.props.data.user&&this.props.data.user.cheer.settings.cheerMinimumBits>1&&(m=p.createElement(k._16,{color:k.E.Alt},Object(h.d)("{displayName} requires {minBits} Bits to Cheer in this channel.",{displayName:this.props.data.user.displayName||this.props.channelLogin,minBits:this.props.data.user.cheer.settings.cheerMinimumBits},"Bits--BuyCard")));var f=null;return this.props.location===O.ChatTooltip&&(f=p.createElement(k._12,{className:"bits-buy-card__header",padding:{x:1,bottom:1},borderBottom:!0,flexShrink:0},p.createElement(k.S,{margin:{bottom:1}},p.createElement(k._16,{type:k._21.H4,color:k.E.Alt},Object(h.d)("Purchase Bits","Bits--BuyCard")),c),p.createElement(k._16,{color:k.E.Alt},Object(h.d)("You have {totalBits}",{totalBits:p.createElement("strong",{"data-a-target":"buy-card-bits-count"},this.props.data.currentUser.bitsBalance," Bits")},"Bits--BuyCard")),m)),p.createElement(k._12,u.a({className:n,padding:{y:1},display:k.G.Flex,flexDirection:k.H.Column,"data-a-target":"bits-buy-card"},t),i,f,p.createElement(w.c,{className:"bits-buy-card__scroll-view flex-nowrap",height:285},p.createElement(k.S,{flexGrow:1,flexWrap:k.I.NoWrap,display:k.G.Flex,flexDirection:k.H.Column},l)))},t.prototype.renderWatebCard=function(){if(this.props.data&&this.props.data.currentUser)switch(this.state.wateb){case W.Awarded:return p.createElement(P,{bitsConfig:this.props.bitsConfig,amount:this.state.bitsAwarded,onStartCheering:this.props.onClose,onWatchAnother:this.handleWatchAdClick,truexUserID:this.props.data.currentUser.idSHA1});case W.Error:return p.createElement(x,{type:this.state.watebError||s.Unknown,onClose:this.props.onClose,onTryAgain:this.resetAdErrorState});default:return!1}},t.prototype.getAvailableTiers=function(e){var t=this.props.bitsConfig.indexedActions[A.f];t||(t=Object(B.a)());var n=t.orderedTiers.filter(function(t){return t.bits<=e}).reverse();return p.createElement("div",{className:"bits-buy-card__tier-bits-images"},n.map(function(e){return p.createElement(V.a,{key:e.bits,sources:Object(L.b)(e,2,!1)})}))},t=u.c([Object(g.a)(H,{name:"data",skip:function(e){return!e.channelLogin},options:function(e){return{variables:{channelLogin:e.channelLogin}}}})],t)}(p.Component),G=q,z=Object(l.connect)(a,o)(G);n.d(t,!1,function(){return a}),n.d(t,!1,function(){return o}),n.d(t,"a",function(){return z}),n.d(t,"b",function(){return O})},1208:function(e,t,n){"use strict";var i=n(0),r=n(2),a=n(320),o=n(492),s=n(3),l=(n(1234),{themed:!0,dark:{"1x":a.a+"/dark/animated/1/cheertutorial.gif"},light:{"1x":a.a+"/light/animated/1/cheertutorial.gif"}}),c=function(){return i.createElement(s.S,{display:s.G.Flex,flexGrow:1,flexDirection:s.H.Column,justifyContent:s.R.Center,alignItems:s.c.Center},i.createElement(s._16,{type:s._21.H4,bold:!0},i.createElement(o.a,{className:"cheermote-help__tutorial-image",sources:l}),Object(r.d)("How to Cheer","Bits--CheermoteHelp")),i.createElement("p",{className:"t-bits-card__contents-body t-bits-card__contents-body--narrow"},Object(r.d)('Type "cheer" + the number of Bits you want to Cheer.',"Bits--CheermoteHelp")))};n.d(t,"a",function(){return c})},1209:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(1),r=n(2),a=n(20),o=function(){function e(){}return e.get=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.b(this,void 0,void 0,function(){return i.e(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.a({},t,{method:"GET"}),n)];case 1:return[2,r.sent()]}})})},e.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.b(this,void 0,void 0,function(){return i.e(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.a({},t,{method:"PUT"}),n)];case 1:return[2,r.sent()]}})})},e.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.b(this,void 0,void 0,function(){return i.e(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.a({},t,{method:"POST"}),n)];case 1:return[2,r.sent()]}})})},e.delete=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.b(this,void 0,void 0,function(){return i.e(this,function(r){switch(r.label){case 0:return[4,this.request(e,i.a({},t,{method:"DELETE"}),n)];case 1:return[2,r.sent()]}})})},e.request=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),i.b(this,void 0,void 0,function(){var r,a;return i.e(this,function(i){switch(i.label){case 0:return t=this.constructOptions(t,n),r=t.headers?t.headers["Content-Type"]:void 0,t.body=this.serialize(t.body,r),[4,this._fetch(e,t)];case 1:return a=i.sent(),[4,this.constructLegacyAPIResponse(a)];case 2:return[2,i.sent()]}})})},e.getAPIURL=function(e){return new URL(e,r.k.config.apiBaseURL)},e.constructLegacyAPIResponse=function(e){return i.b(this,void 0,void 0,function(){var t,n,r;return i.e(this,function(i){switch(i.label){case 0:t={status:e.status},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.json()];case 2:return n=i.sent(),e.ok?t.body=n:t.error=n,[3,4];case 3:return r=i.sent(),t.requestError=r,[3,4];case 4:return[2,t]}})})},e._fetch=function(e,t){return void 0===t&&(t={}),i.b(this,void 0,void 0,function(){return i.e(this,function(n){switch(n.label){case 0:return[4,fetch(this.getAPIURL(e).toString(),t)];case 1:return[2,n.sent()]}})})},e.constructOptions=function(e,t){return e=Object.assign({},e,{headers:i.a({},this.getDefaultHeaders(e,t),e.headers)})},e.serialize=function(e,t){return"application/json; charset=UTF-8"===t?JSON.stringify(e):e},e.getDefaultHeaders=function(e,t){var n=r.k.store.getState(),i={Accept:"application/vnd.twitchtv.v"+(t.version||5)+"+json; charset=UTF-8","Accept-Language":"en-us","Client-ID":r.k.config.legacyClientID,"X-Requested-With":"XMLHttpRequest"};e.body&&FormData.prototype.isPrototypeOf(e.body)||(i["Content-Type"]="application/json; charset=UTF-8");var o=Object(a.c)(n);return o&&(i.Authorization="OAuth "+o.authToken,o.legacyToken&&(i["Twitch-Api-Token"]=o.legacyToken)),i},e}()},1210:function(e,t,n){"use strict";function i(e){return Object(u.a)(p,{u:e})}function r(e,t){return Object(u.a)(m,{url:e,text:t})}function a(e,t){return Object(u.a)(h,{url:e,title:t})}function o(e){return Object(u.a)(f,{url:e})}var s=n(1),l=n(0),c=n(2),d=n(1244),u=n(176),p="https://www.facebook.com/sharer/sharer.php",m="https://www.twitter.com/share",h="https://www.reddit.com/submit",f="https://vk.com/share.php",g=n(3);n(1253);n.d(t,"b",function(){return b}),n.d(t,"a",function(){return v});var b;!function(e){e[e.Twitter=0]="Twitter",e[e.Reddit=1]="Reddit",e[e.VKontakte=2]="VKontakte",e[e.Facebook=3]="Facebook",e[e.Copy=4]="Copy"}(b||(b={}));var v=function(e){function t(t){var n=e.call(this,t)||this;return n.renderLink=function(){var e="social-button__link "+n.addSocialClassModifier("social-button__link");return n.isLink()?l.createElement("a",s.a({href:n.getLinkTarget(),target:"_blank",className:e,onClick:n.onShareClickHandler},Object(g._34)(n.props)),n.renderIcon()):l.createElement("button",s.a({onClick:n.copyPageUrl,onMouseLeave:n.clearIsCopiedStatus,className:e},Object(g._34)(n.props)),n.renderIcon())},n.onShareClickHandler=function(){n.props.onShareClick&&n.props.onShareClick(n.props.type)},n.clearIsCopiedStatus=function(){n.setState({isCopied:!1})},n.getUrl=function(){return n.props.url||window.location.href},n.copyPageUrl=function(e){e&&e.preventDefault(),n.props.onShareClick&&n.props.onShareClick(n.props.type),Object(d.a)(n.getUrl()),n.setState({isCopied:!0})},n.renderIcon=function(){var e=n.getAssetFromType();return l.createElement(g.S,{className:"social-button__icon "+n.addSocialClassModifier("social-button__icon")},l.createElement(g._5,{asset:e,width:30,height:30}))},n.isLink=function(){return n.props.type!==b.Copy},n.getTooltipFromType=function(){switch(n.props.type){case b.Twitter:return"Twitter";case b.Reddit:return"Reddit";case b.Facebook:return"Facebook";case b.VKontakte:return"VKontakte";case b.Copy:return n.state.isCopied?Object(c.d)("Copied","SocialButton"):Object(c.d)("Copy to clipboard","SocialButton");default:return""}},n.getAssetFromType=function(){switch(n.props.type){case b.Twitter:return g._6.Twitter;case b.Facebook:return g._6.Facebook;case b.VKontakte:return g._6.VKontakte;case b.Reddit:return g._6.Reddit;case b.Copy:default:return g._6.Copy}},n.addSocialClassModifier=function(e){switch(n.props.type){case b.Twitter:return e+"--twitter";case b.Reddit:return e+"--reddit";case b.Facebook:return e+"--facebook";case b.VKontakte:return e+"--vkontakte";case b.Copy:return e+"--copy";default:return""}},n.getLinkTarget=function(){var e=n.props,t=e.text,s=e.type,l=n.getUrl(),c=t||"";switch(s){case b.Reddit:return a(l,c);case b.VKontakte:return o(l);case b.Facebook:return i(l);case b.Twitter:return r(l,c);default:return""}},n.state={isCopied:!1},n}return s.d(t,e),t.prototype.render=function(){return l.createElement(g.S,{className:"social-button"},l.createElement(g._25,{label:this.getTooltipFromType(),direction:g._27.Top},this.renderLink()))},t}(l.Component)},1211:function(e,t,n){"use strict";function i(e,t){return c.b(this,void 0,void 0,function(){var n,i,r,a,o;return c.e(this,function(s){switch(s.label){case 0:n="https://api.twitch.tv/api/premium/credit/spend_token?channel_id="+e,i=1,s.label=1;case 1:if(!(i<=T))return[3,7];s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(n,{method:"POST",headers:{"Client-ID":h.k.config.legacyClientID,Accept:"application/json; charset=UTF-8","content-type":"application/json; charset=UTF-8",Authorization:"OAuth "+t}})];case 3:return r=s.sent(),[4,r.body];case 4:return a=s.sent(),[2,a];case 5:if(o=s.sent(),i===T)throw o;return[3,6];case 6:return++i,[3,1];case 7:return[2]}})})}function r(e){return"$"+(e/100).toFixed(2).toString()}function a(e){if(e[0].self&&e[1].self&&e[2].self){if(e[0].self.isEligibleForDiscount)return!0;if(e[1].self.isEligibleForDiscount)return!0;if(e[2].self.isEligibleForDiscount)return!0}return!1}function o(e){return"subscribe-button-modal-tab-"+e}function s(e){return{authToken:Object(p.a)(e)}}var l,c=n(1),d=n(0),u=n(10),p=n(20),m=n(6),h=n(2),f=n(74),g=n(8),b=n(127),v={Prime:"prime",Tier1:"1000",Tier2:"2000",Tier3:"3000"},y=n(180),S=n(25),k=n(42),C=n(21),E=n(177),_=n(503),T=3,w=n(321),N=n(3),O="subscribe-button__subscribe-with-prime",D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isSubscribing:!1},t.handleStartPrimeTrialClick=function(){t.props.reportSubMenuAction({action:w.a.ClickSignupForPrime})},t.handleSubWithPrimeClick=function(){t.setState({isSubscribing:!0},function(){return c.b(t,void 0,void 0,function(){var e;return c.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),this.props.authToken&&this.props.userHasPrime?[4,i(this.props.subLogin,this.props.authToken)]:[3,2];case 1:t.sent(),this.props.onSubscribedWithPrime(),t.label=2;case 2:return[3,5];case 3:return e=t.sent(),h.g.error(e,"Failed to subscribe with Prime",{subLogin:this.props.subLogin}),[3,5];case 4:return this.setState({isSubscribing:!1}),[7];case 5:return[2]}})})})},t}return c.d(t,e),t.prototype.componentWillMount=function(){this.setMessages()},t.prototype.render=function(){var e=this.props.isSubscribedWithPrime&&this.props.canPrimeSubscribe;return this.props.userHasPrime?this.props.isSubscribed&&!e?d.createElement(N.t,c.a({ariaLabel:this.messages.subscribed,"data-test-selector":O,disabled:!0,icon:N._6.Crown},Object(N._34)(this.props)),this.messages.subscribed):this.props.canPrimeSubscribe?d.createElement(N.t,c.a({ariaLabel:this.messages.subscribeFree,"data-test-selector":O,disabled:this.state.isSubscribing,icon:N._6.Crown,state:this.state.isSubscribing?N.x.Loading:N.x.Default,onClick:this.handleSubWithPrimeClick},Object(N._34)(this.props)),e?this.messages.resubscribeFree:this.messages.subscribeFree):d.createElement(N.t,c.a({ariaLabel:this.messages.primeSubNotAvailable,"data-test-selector":O,disabled:!0,icon:N._6.Crown},Object(N._34)(this.props)),this.messages.primeSubNotAvailable):d.createElement(N.t,c.a({ariaLabel:this.messages.startPrimeTrial,"data-test-selector":O,icon:N._6.Crown,linkTo:h.a.tryPrimeURI,onClick:this.handleStartPrimeTrialClick},Object(N._34)(this.props),{targetBlank:!0}),this.messages.startPrimeTrial)},t.prototype.setMessages=function(){this.messages={subscribed:Object(h.d)("Subscribed","SubscribeWithPrime"),startPrimeTrial:Object(h.d)("Start Your Free Trial","SubscribeWithPrime"),primeSubNotAvailable:Object(h.d)("Not yet!","SubscribeWithPrime"),subscribeFree:Object(h.d)("Subscribe Free","SubscribeWithPrime"),resubscribeFree:Object(h.d)("Resubscribe Free","SubscribeWithPrime")}},t}(d.Component),I=D;n(1222);!function(e){e[e.Prime=0]="Prime",e[e.Tier1=1]="Tier1",e[e.Tier2=2]="Tier2",e[e.Tier3=3]="Tier3"}(l||(l={}));var P=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleActiveTab=function(e){if(e.currentTarget.parentElement)switch(e.currentTarget.parentElement.getAttribute("data-a-target")){case"subscribe-button-modal-tab-"+l.Prime:n.setState({activeTab:l.Prime,currentPurchasePrice:n.messages.tier1Price}),n.props.onSelectTierTab(j);break;case"subscribe-button-modal-tab-"+l.Tier1:n.setState({activeTab:l.Tier1,currentPurchasePrice:n.messages.tier1Price}),n.props.onSelectTierTab(n.messages.tier1Price);break;case"subscribe-button-modal-tab-"+l.Tier2:n.setState({activeTab:l.Tier2,currentPurchasePrice:n.messages.tier2Price}),n.props.onSelectTierTab(n.messages.tier2Price);break;case"subscribe-button-modal-tab-"+l.Tier3:n.setState({activeTab:l.Tier3,currentPurchasePrice:n.messages.tier3Price}),n.props.onSelectTierTab(n.messages.tier3Price);break;default:n.setState({activeTab:l.Prime,currentPurchasePrice:n.messages.tier1Price}),n.props.onSelectTierTab(j)}},n.getTabTitle=function(){switch(n.state.activeTab){case l.Prime:return n.messages.freeSubWithPrime;case l.Tier1:return n.messages.tier1Sub;case l.Tier2:return n.messages.tier2Sub;case l.Tier3:return n.messages.tier3Sub;default:return n.messages.freeSubWithPrime}},n.getTierSubscribeButton=function(){if(n.state.activeTab===l.Prime)return d.createElement(I,{authToken:n.props.authToken,isSubscribed:n.props.isSubscribed,isSubscribedWithPrime:n.props.subbedTier===j,onSubscribedWithPrime:n.props.onSubscribedWithPrime,subLogin:n.props.subLogin,reportSubMenuAction:n.props.reportSubMenuAction,userHasPrime:n.props.userHasPrime,canPrimeSubscribe:n.props.canPrimeSubscribe,"data-a-target":"subscribe-with-prime-button"});if(n.state.subbedTier===n.state.activeTab)return d.createElement(_.a,{isSubbedToTier:!0,tierPrice:n.state.currentPurchasePrice,reportSubAction:n.props.reportSubMenuAction,url:"","data-a-target":"subscribe-now-button"});var e=n.props.subscriptionProducts[n.state.activeTab-1];return d.createElement(_.a,{isSubbedToTier:!1,tierPrice:n.state.currentPurchasePrice,reportSubAction:n.props.reportSubMenuAction,url:e.url,"data-a-target":"subscribe-now-button"})},n.mapSubbedTierToTabs=function(){n.props.subbedTier===v.Prime?(n.setState({activeTab:l.Prime,subbedTier:l.Prime}),n.props.onSelectTierTab(j)):n.props.subbedTier===v.Tier1?(n.setState({activeTab:l.Tier1,subbedTier:l.Tier1}),n.props.onSelectTierTab(n.messages.tier1Price)):n.props.subbedTier===v.Tier2?(n.setState({activeTab:l.Tier2,subbedTier:l.Tier2}),n.props.onSelectTierTab(n.messages.tier2Price)):n.props.subbedTier===v.Tier3?(n.setState({activeTab:l.Tier3,subbedTier:l.Tier3}),n.props.onSelectTierTab(n.messages.tier3Price)):n.props.onSelectTierTab(j)},n.getExtraEmotes=function(e){return(e===l.Tier2?Object(E.b)(n.props.subscriptionProducts[1].emotes):Object(E.b)(n.props.subscriptionProducts[2].emotes.concat(n.props.subscriptionProducts[1].emotes))).map(function(e){return d.createElement(N.S,{display:N.G.InlineFlex,margin:{right:.5},key:e.id},d.createElement("img",{srcSet:"https://static-cdn.jtvnw.net/emoticons/v1/"+e.srcSet}))})},n.handlePrimeFAQClick=function(){n.props.reportSubMenuAction({action:w.a.ClickPrimeFAQ})},n.state={activeTab:t.inPrimeRegion||t.userHasPrime?l.Prime:l.Tier1,currentPurchasePrice:n.props.subscriptionProducts[0].price,subbedTier:null},n}return c.d(t,e),t.prototype.componentWillMount=function(){this.setMessages(),this.mapSubbedTierToTabs()},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=null;this.state.subbedTier&&(e=d.createElement(N.S,{display:N.G.InlineFlex,margin:{right:.5},className:"subscription-balloon-options__subbed-star"},d.createElement(N._5,{asset:N._6.Star})));var t=d.createElement(N._16,null),n=null,i=null,a=null,s=d.createElement(N.S,{display:N.G.InlineFlex},this.state.subbedTier===l.Tier3&&e,d.createElement(N._13,{active:this.state.activeTab===l.Tier3,"data-a-target":o(l.Tier3),onClick:this.toggleActiveTab},this.messages.tier3TabName));this.hasDiscount()&&this.state.activeTab!==l.Prime&&(t=d.createElement(N.S,null,d.createElement(N._16,{className:"tw-subscription-modal__old-price"},d.createElement("s",null,r(this.props.subscriptionProducts[this.state.activeTab-1].self.oldPrice)," / Month")),d.createElement(N._16,{className:"tw-subscription-modal__new-price",type:N._21.H5,bold:!0},r(this.props.subscriptionProducts[this.state.activeTab-1].self.newPrice)," for the first month (Save 50%)"))),this.props.subbedTier&&this.props.subbedTier!==v.Prime||!this.props.inPrimeRegion&&!this.props.userHasPrime||(n=d.createElement(N.S,{display:N.G.InlineFlex,margin:{right:2}},d.createElement(N.S,{display:N.G.InlineFlex,margin:{right:1},className:"subscription-balloon-options__prime-crown"},d.createElement(N._5,{asset:N._6.Crown})),d.createElement(N._13,{active:this.state.activeTab===l.Prime,"data-a-target":o(l.Prime),onClick:this.toggleActiveTab},this.messages.prime))),this.props.subbedTier&&this.props.subbedTier!==v.Tier1||(i=d.createElement(N.S,{display:N.G.InlineFlex,margin:{right:2}},this.state.subbedTier===l.Tier1&&e,d.createElement(N._13,{active:this.state.activeTab===l.Tier1,"data-a-target":o(l.Tier1),onClick:this.toggleActiveTab},this.messages.tier1TabName))),this.props.subbedTier&&this.props.subbedTier!==v.Prime&&this.props.subbedTier!==v.Tier1&&this.props.subbedTier!==v.Tier2||(a=d.createElement(N.S,{display:N.G.InlineFlex,margin:{right:2}},this.state.subbedTier===l.Tier2&&e,d.createElement(N._13,{active:this.state.activeTab===l.Tier2,"data-a-target":o(l.Tier2),onClick:this.toggleActiveTab},this.messages.tier2TabName)));var c=null;return(this.messages.tier2EmoteCount>0&&this.state.activeTab===l.Tier2||this.messages.tier3EmoteCount>0&&this.state.activeTab===l.Tier3)&&(c=d.createElement(N.S,{display:N.G.InlineFlex,alignItems:N.c.Center},this.getExtraEmotes(this.state.activeTab),d.createElement(N._16,{bold:!0},Object(h.d)("Plus {extraEmoteCount, number} extra channel emote(s)",{extraEmoteCount:this.state.activeTab===l.Tier2?this.messages.tier2EmoteCount:this.messages.tier3EmoteCount},"SubTierTabs")))),d.createElement(N.S,{className:"channel-header__subscription-balloon-options"},d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._14,null,n,i,a,s)),d.createElement(N.S,null,d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._16,{type:N._21.H5,bold:!0},this.getTabTitle())),d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._16,null,this.state.activeTab===l.Prime?this.messages.subWithPrime:this.messages.subTierBenefits)),c,t,d.createElement(N.S,{margin:{top:1,right:1}},this.getTierSubscribeButton())))},t.prototype.setMessages=function(){var e=Object(h.d)("Use your free channel subscription to directly support your favorite streamer. {upsellTextLink}",{upsellTextLink:d.createElement("a",{href:"https://help.twitch.tv/customer/en/portal/articles/2572060-twitch-prime-guide",onClick:this.handlePrimeFAQClick,target:"_blank","data-test-selector":"subscribe-button__prime-faq-link"},Object(h.d)("Learn more about your free sub","SubTierTabs"))},"SubTierTabs"),t=Object(h.d)("{upsellTextBold}, plus get free game loot every month, ad-free viewing, and loads more with Twitch Prime.",{upsellTextBold:d.createElement("strong",null,"Support your favorite streamer")},"SubTierTabs"),n=this.props.userHasPrime?e:t,i=this.props.subscriptionProducts[1].emotes.length,a=i+this.props.subscriptionProducts[2].emotes.length;this.messages={useFreeChannelSub:e,primeUpsell:t,subWithPrime:n,tier2EmoteCount:i,tier3EmoteCount:a,prime:Object(h.d)("Prime","SubTierTabs"),subscribed:Object(h.d)("Subscribed","SubTierTabs"),subTierBenefits:Object(h.d)("Includes {availableEmoteCount, number} emoticon(s), subscriber badge, customizable messages upon subscribing, and ad-free viewing",{availableEmoteCount:this.props.subscriptionProducts[0].emotes.length},"SubTierTabs"),tier1Price:Object(h.d)("{tier1Price}",{tier1Price:this.props.subscriptionProducts[0].price},"SubTierTabs"),tier2Price:Object(h.d)("{tier2Price}",{tier2Price:this.props.subscriptionProducts[1].price},"SubTierTabs"),tier3Price:Object(h.d)("{tier3Price}",{tier3Price:this.props.subscriptionProducts[2].price},"SubTierTabs"),tier1TabName:this.props.subscriptionProducts[0].price,tier2TabName:this.props.subscriptionProducts[1].price,tier3TabName:this.props.subscriptionProducts[2].price,subscribeNow:Object(h.d)("Subscribe Now","SubTierTabs"),freeSubWithPrime:Object(h.d)("Free Channel Sub with Twitch Prime","SubTierTabs"),tier1Sub:Object(h.d)("Channel Subscription ({channelDisplayName})",{channelDisplayName:this.props.channelDisplayName},"SubTierTabs"),tier2Sub:Object(h.d)("Channel Subscription ({channelDisplayName}): {tier2Price} Sub",{channelDisplayName:this.props.channelDisplayName,tier2Price:this.props.subscriptionProducts[1].price},"SubTierTabs"),tier3Sub:Object(h.d)("Channel Subscription ({channelDisplayName}): {tier3Price} Sub",{channelDisplayName:this.props.channelDisplayName,tier3Price:this.props.subscriptionProducts[2].price},"SubTierTabs")},this.hasDiscount()&&(this.messages.tier1Price=r(this.props.subscriptionProducts[0].self.newPrice),this.messages.tier2Price=r(this.props.subscriptionProducts[1].self.newPrice),this.messages.tier3Price=r(this.props.subscriptionProducts[2].self.newPrice))},t.prototype.isSubscriptionDiscountReady=function(e){return void 0!==e.subscriptionProducts[0].self},t.prototype.hasDiscount=function(){var e=this.props;return!!this.isSubscriptionDiscountReady(e)&&a(e.subscriptionProducts)},t=c.c([Object(m.c)("SubTierTabs")],t)}(d.Component),A=P,x=n(1223),R=(n(1224),function(e){function t(t){var n=e.call(this,t)||this;return n.handleTopPageSubButtonClick=function(){n.props.reportSubMenuAction({action:w.a.ClickCheckout,checkoutButtonTier:n.messages.tier1Price})},n.toggleShowSubOptionsState=function(e){e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation(),n.props.reportSubMenuAction({action:n.state.showSubOptions?w.a.ClickBack:w.a.ClickMoreSubOptions,modalLevel:n.state.showSubOptions?"top_page":"second_page"}),n.setState(function(e){return{showSubOptions:!e.showSubOptions}})},n.state={showSubOptions:!1},n}return c.d(t,e),t.prototype.componentWillMount=function(){this.setMessages()},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){if(!this.isSubscriptionDiscountReady(e)&&this.isDiscountDataReady(e)){if(e.data.error)return;var t=Object.assign({},e.data.user.subscriptionProducts);this.props.setPromotionData(t)}},t.prototype.componentDidUpdate=function(){this.setMessages()},t.prototype.render=function(){this.setMessages();var e=this.props.userHasPrime?this.messages.useFreeChannelSub:this.messages.primeUpsell,t=null,n=null;if(this.props.isNonStandardSub||(t=d.createElement(N.t,{ariaLabel:this.messages.seeMoreSubOptions,onClick:this.toggleShowSubOptionsState,type:N.y.Hollow,"data-test-selector":"subscribe-button__more-sub-options-button","data-a-target":"see-more-sub-options-button"},this.messages.seeMoreSubOptions)),this.state.showSubOptions)n=d.createElement(N.S,{padding:2},d.createElement(N.S,{margin:{bottom:1}},d.createElement(N.S,{display:N.G.Flex,justifyContent:N.R.Between,alignItems:N.c.Center,margin:{bottom:1}},d.createElement(N._16,{type:N._21.H4,bold:!0},this.messages.allSubscriptions),d.createElement(N.t,{type:N.y.Text,"data-a-target":"subscribe-back-button","data-test-selector":"subscribe-button__back-button",icon:N._6.AngleLeft,onClick:this.toggleShowSubOptionsState},d.createElement(N.S,{alignItems:N.c.Center,display:N.G.InlineFlex},d.createElement(N._16,null,this.messages.back)))),d.createElement(A,{authToken:this.props.authToken,canPrimeSubscribe:this.props.canPrimeSubscribe,channelDisplayName:this.props.channelDisplayName,inPrimeRegion:this.props.inPrimeRegion,isSubscribed:!1,onSelectTierTab:this.props.onSelectTierTab,onSubscribedWithPrime:this.props.onSubscribedWithPrime,reportSubMenuAction:this.props.reportSubMenuAction,subLogin:this.props.subLogin,subscriptionProducts:this.props.subscriptionProducts,userHasPrime:this.props.userHasPrime})));else{var i=null,a=d.createElement(N._16,null,this.messages.tier1PricePerMonth),o=this.messages.tier1Price;this.hasDiscount()&&(a=d.createElement(N.S,null,d.createElement(N._16,{className:"tw-subscription-modal__old-price"},d.createElement("s",null,this.messages.tier1PricePerMonth)),d.createElement(N._16,{className:"tw-subscription-modal__new-price",type:N._21.H5,bold:!0},this.messages.discountMessage," ")),o=r(this.props.subscriptionProducts[0].self.newPrice)),(this.props.inPrimeRegion||this.props.userHasPrime)&&(i=d.createElement(N.S,{margin:{bottom:2}},d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._16,{type:N._21.H4,bold:!0},this.messages.freeSubWithPrime)),d.createElement(N.S,null,d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._16,null,e)),d.createElement(I,{authToken:this.props.authToken,"data-a-target":"subscribe-with-prime-button",isSubscribed:!1,isSubscribedWithPrime:!1,onSubscribedWithPrime:this.props.onSubscribedWithPrime,reportSubMenuAction:this.props.reportSubMenuAction,subLogin:this.props.subLogin,userHasPrime:this.props.userHasPrime,canPrimeSubscribe:this.props.canPrimeSubscribe})))),n=d.createElement(N.S,{padding:2},i,d.createElement(N.S,null,d.createElement(N._16,{type:N._21.H4,bold:!0},this.messages.paidSubscription),a,d.createElement(N.S,{display:N.G.InlineFlex,margin:{top:1,right:1}},d.createElement(N.t,{ariaLabel:this.messages.subscribeTier1,"data-a-target":"tier1-subscribe-button","data-test-selector":"subscribe-button__top-page-sub-button",linkTo:this.props.subscriptionProducts[0].url,onClick:this.handleTopPageSubButtonClick,purchase:o,targetBlank:!0},this.messages.subscribe)),t))}return n},t.prototype.setMessages=function(){var e=this.props.subscriptionProducts[0].price;this.hasDiscount()&&this.props.subscriptionProducts[0].self.isEligibleForDiscount&&(e=r(this.props.subscriptionProducts[0].self.newPrice)),this.messages={useFreeChannelSub:Object(h.d)("Use your free channel subscription to directly support your favorite streamer. {upsellTextLink}",{upsellTextLink:d.createElement("a",{href:"https://help.twitch.tv/customer/en/portal/articles/2572060-twitch-prime-guide",target:"_blank"},"Learn more about your free sub")},"BalloonNonSubbedUser"),primeUpsell:Object(h.d)("{upsellTextBold}, plus get free game loot every month, ad-free viewing, and loads more with Twitch Prime.",{upsellTextBold:d.createElement("strong",null,"Support your favorite streamer")},"BalloonNonSubbedUser"),freeSubWithPrime:Object(h.d)("Free Channel Sub with Twitch Prime","BalloonNonSubbedUser"),changeSubscription:Object(h.d)("Change Your Subscription","BalloonNonSubbedUser"),seeMoreSubOptions:Object(h.d)("See More Sub Options","BalloonNonSubbedUser"),tier1Price:Object(h.d)("{tier1Price}",{tier1Price:e},"BalloonNonSubbedUser"),paidSubscription:Object(h.d)("Paid Subscription","BalloonNonSubbedUser"),tier1PricePerMonth:Object(h.d)("{price} / Month",{price:this.props.subscriptionProducts[0].price},"BalloonNonSubbedUser"),subscribeTier1:Object(h.d)("Subscribe {tier1Price}",{tier1Price:e},"BalloonNonSubbedUser"),subscribeToUser:Object(h.d)("Subscribe to {username}",{username:this.props.channelDisplayName},"BalloonNonSubbedUser"),subscribe:Object(h.d)("Subscribe","BalloonNonSubbedUser"),back:Object(h.d)("Back","BalloonNonSubbedUser"),allSubscriptions:Object(h.d)("All Subscriptions","BalloonNonSubbedUser"),discountMessage:Object(h.d)("{price} for the first month (Save 50%)",{price:e},"BalloonNonSubbedUser")}},t.prototype.isDiscountDataReady=function(e){return e.data.user&&e.data.user.subscriptionProducts&&e.data.user.subscriptionProducts.length>0&&e.data.user.subscriptionProducts[0]&&e.data.user.subscriptionProducts[0].self&&void 0!==e.data.user.subscriptionProducts[0].self.isEligibleForDiscount},t.prototype.isSubscriptionDiscountReady=function(e){return void 0!==e.subscriptionProducts[0].self},t.prototype.hasDiscount=function(){var e=this.props;return!!this.isDiscountDataReady(e)&&a(this.props.subscriptionProducts)},t=c.c([Object(g.a)(x,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(m.c)("BalloonNonSubbedUser")],t)}(d.Component)),F=R,M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.d(t,e),t.prototype.componentWillMount=function(){this.setMessages()},t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return d.createElement(N.S,{className:"channel-header__subscription-modal-main",padding:2},d.createElement(N.S,{margin:{bottom:2}},d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._16,{type:N._21.H4,bold:!0},this.messages.balloonMainHeader)),d.createElement(N.S,{margin:{bottom:1}},d.createElement(N._16,null,this.messages.balloonMainSubtext))),d.createElement(N.S,null,d.createElement(N._16,{type:N._21.H4,bold:!0},this.messages.changeSubscription),d.createElement(A,{authToken:this.props.authToken,canPrimeSubscribe:this.props.canPrimeSubscribe,channelDisplayName:this.props.channelDisplayName,inPrimeRegion:this.props.inPrimeRegion,isSubscribed:!0,onSelectTierTab:this.props.onSelectTierTab,onSubscribedWithPrime:this.props.onSubscribedWithPrime,subbedTier:this.props.subbedTier,subscriptionProducts:this.props.subscriptionProducts,subLogin:this.props.subLogin,reportSubMenuAction:this.props.reportSubMenuAction,userHasPrime:this.props.userHasPrime})))},t.prototype.setMessages=function(){var e;switch(this.props.subbedTier){case v.Tier1:e=this.props.subscriptionProducts[0].price;break;case v.Tier2:e=this.props.subscriptionProducts[1].price;break;case v.Tier3:e=this.props.subscriptionProducts[2].price;break;default:e=this.props.subscriptionProducts[0].price}this.messages={balloonMainHeader:Object(h.d)("Your Subscription","BalloonSubbedUser"),balloonMainSubtext:this.props.subbedTier===v.Prime?Object(h.d)("Free Prime subscription. {upsellTextLink}",{upsellTextLink:d.createElement("a",{href:"https://help.twitch.tv/customer/en/portal/articles/2572060-twitch-prime-guide",target:"_blank"},Object(h.d)("Learn more about your free sub","BalloonSubbedUser"))},"BalloonSubbedUser"):Object(h.d)("Paid Subscription - {subbedTierPrice} / Month",{subbedTierPrice:e},"BalloonSubbedUser"),changeSubscription:Object(h.d)("Change Your Subscription","BalloonSubbedUser")}},t=c.c([Object(m.c)("BalloonSubbedUser")],t)}(d.Component),U=M,L=(n(1225),n(1226)),j="prime",B=function(e){function t(t){var n=e.call(this,t)||this;return n.modalLevel="top_page",n.reportSubMenuAction=function(e){Object(w.b)({action:e.action||"",channelLogin:n.props.channelLogin||"",channelID:n.props.data&&n.props.data.user.id,checkoutButtonTier:e.checkoutButtonTier||n.state.activeTierPrice.slice(),hasSubCredit:!!n.props.data.user.self&&n.props.data.user.self.canPrimeSubscribe,hostChannelID:n.props.hostChannelID,hostChannelLogin:n.props.hostChannelLogin,isMenuOpen:!(e.action===w.a.OpenSubMenu),modal:!n.state.isSubscribed,modalLevel:n.state.isSubscribed?"":n.modalLevel.slice(),showPrimeContent:n.state.inPrimeRegion}),!e.modalLevel||e.action!==w.a.ClickMoreSubOptions&&e.action!==w.a.ClickBack||(n.modalLevel=e.modalLevel,n.setState({activeTierPrice:j}))},n.handleMenuToggle=function(e){n.reportSubMenuAction({action:e?w.a.CloseSubMenu:w.a.OpenSubMenu})},n.onSelectTierTab=function(e){return n.setState({activeTierPrice:e})},n.onSubscribedWithPrime=function(){n.reportSubMenuAction({action:w.a.SubWithPrime}),n.modalLevel="",n.setState({isSubscribed:!0,subbedTier:v.Prime}),Object(S.d)(L,{login:n.props.channelLogin},function(e){return e.user&&e.user.self&&(e.user.self.canPrimeSubscribe=!1,e.user.self.subscriptionBenefit={id:Object(C.a)(),purchasedWithPrime:!0,tier:j,__typename:"SubscriptionBenefit"}),e})},n.setMessages=function(){n.messages={subscribe:n.props.hostChannelID?Object(h.d)("Subscribe to {username}",{username:n.props.data.user.displayName},"SubscribeButton"):Object(h.d)("Subscribe","SubscribeButton"),subscribed:n.props.hostChannelID?Object(h.d)("Subscribed to {username}",{username:n.props.data.user.displayName},"SubscribeButton"):Object(h.d)("Subscribed","SubscribeButton"),discountMessage:Object(h.d)("Get 50% off the first month of any paid Subscription","SubscribeButton")}},n.setPromotionData=function(e){if(n.state){var t=Object.assign({},n.state.subData);if(null!==t){for(var i=[],r=0;r<3;r++){var a=Object.assign({},t.subscriptionProducts[r]);a.self=e[r].self,i.push(a)}t.subscriptionProducts=i,n.setState({subData:t})}}},n.state={isSubscribed:!1,activeTierPrice:j,subbedTier:null,subData:null,inPrimeRegion:!1,isNonStandardSub:!1,hasReconciledUser:!1},n}return c.d(t,e),t.prototype.componentDidMount=function(){this.props.reportInteractive&&this.isUserDataReady(this.props)&&this.props.reportInteractive()},t.prototype.componentDidUpdate=function(){this.props.channelLogin&&!this.isUserDataReady(this.props)||!this.props.updateContainerWidth||this.props.updateContainerWidth(),this.props.reportInteractive&&this.isUserDataReady(this.props)&&this.props.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){if(this.isUserDataReady(e)&&e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&this.props.data.refetch(),this.isUserDataReady(e)&&this.hasSubscriptionProducts(e)){if(!this.state.inPrimeRegion&&e.data.requestInfo&&Object(y.b)(e.data.requestInfo.countryCode)&&this.setState({inPrimeRegion:!0}),e.data.currentUser&&this.isOwnChannel(e))return void this.setState({hasReconciledUser:!0});if(this.setState({subData:e.data.user,isNonStandardSub:1===e.data.user.subscriptionProducts.length}),e.data.user.subscriptionProducts.some(this.isSubscriptionProductInvalid)&&this.setState({isNonStandardSub:!0}),e.data.currentUser&&e.data.user.self)if(e.data.user.self.subscriptionBenefit){var t=e.data.user.self.subscriptionBenefit.purchasedWithPrime?j:e.data.user.self.subscriptionBenefit.tier;this.modalLevel="",this.setState({isSubscribed:!0,subbedTier:t,hasReconciledUser:!0})}else this.setState({isSubscribed:!1,hasReconciledUser:!0});else this.setState({hasReconciledUser:!0})}},t.prototype.render=function(){if(!this.shouldRender()||!this.hasSubscriptionProducts(this.props))return null;if(this.setMessages(),this.props.data.currentUser&&this.state.isSubscribed&&this.state.isNonStandardSub)return d.createElement(N.t,{disabled:!0,ariaLabel:this.messages.subscribed,icon:N._6.Star},this.messages.subscribed);var e,t=this.state.subbedTier===v.Prime?N._6.Crown:N._6.Star;e=this.state.isSubscribed?d.createElement(N.t,{ariaLabel:this.messages.subscribed,type:N.y.Success,"data-a-target":"subscribed-button","data-test-selector":"subscribe-button__dropdown",dropdown:!0,icon:t},this.messages.subscribed):d.createElement(N.t,{ariaLabel:this.messages.subscribe,"data-test-selector":"subscribe-button__dropdown","data-a-target":"subscribe-button",dropdown:!0},this.messages.subscribe);var n=this.props.hostChannelID?N.q.TopLeft:N.q.BottomRight;return d.createElement(f.a,{onToggle:this.handleMenuToggle},e,d.createElement(N.p,{size:N.r.Large,direction:n,"data-a-target":"sub-balloon"},this.renderBalloonContent()))},t.prototype.renderBalloonContent=function(){if(!this.state.subData)return h.g.debug("NOT rendering sub balloon; sub data not yet ready",{state:this.state}),null;if(h.g.debug("rendering sub balloon",{state:this.state}),this.props.data.currentUser){if(this.state.isSubscribed)return d.createElement(U,{authToken:this.props.authToken,channelDisplayName:this.state.subData.displayName,canPrimeSubscribe:!!this.props.data.user.self&&this.props.data.user.self.canPrimeSubscribe,inPrimeRegion:this.state.inPrimeRegion,onSelectTierTab:this.onSelectTierTab,onSubscribedWithPrime:this.onSubscribedWithPrime,reportSubMenuAction:this.reportSubMenuAction,subbedTier:this.state.subbedTier,subLogin:this.state.subData.login,subscriptionProducts:this.state.subData.subscriptionProducts,userHasPrime:this.props.data.currentUser.hasPrime});var e=null;return this.hasDiscount()&&(e=d.createElement(N.S,{className:"tw-subscription-modal__discount-bar"},d.createElement(N._16,null,this.messages.discountMessage))),d.createElement(N.S,null,e,d.createElement(F,{authToken:this.props.authToken,channelDisplayName:this.state.subData.displayName,channelLogin:this.props.channelLogin,canPrimeSubscribe:!!this.props.data.user.self&&this.props.data.user.self.canPrimeSubscribe,inPrimeRegion:this.state.inPrimeRegion,isNonStandardSub:this.state.isNonStandardSub,onSelectTierTab:this.onSelectTierTab,onSubscribedWithPrime:this.onSubscribedWithPrime,reportSubMenuAction:this.reportSubMenuAction,subLogin:this.state.subData.login,subscriptionProducts:this.state.subData.subscriptionProducts,userHasPrime:this.props.data.currentUser.hasPrime,setPromotionData:this.setPromotionData}))}return d.createElement(F,{authToken:this.props.authToken,channelDisplayName:this.state.subData.displayName,channelLogin:this.props.channelLogin,canPrimeSubscribe:!1,inPrimeRegion:this.state.inPrimeRegion,isNonStandardSub:this.state.isNonStandardSub,onSelectTierTab:this.onSelectTierTab,onSubscribedWithPrime:this.onSubscribedWithPrime,reportSubMenuAction:this.reportSubMenuAction,subLogin:this.state.subData.login,subscriptionProducts:this.state.subData.subscriptionProducts,userHasPrime:!1,setPromotionData:this.setPromotionData})},t.prototype.hasSubscriptionProducts=function(e){return e.data.user.subscriptionProducts&&e.data.user.subscriptionProducts.length>0},t.prototype.shouldRender=function(){return!!this.isUserDataReady(this.props)&&(!this.hasSubscriptionProducts(this.props)||!!this.isSubscriptionReady())},t.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},t.prototype.isOwnChannel=function(e){return e.data.user.id===(e.data.currentUser&&e.data.currentUser.id)},t.prototype.isSubscriptionReady=function(){return this.state.subData&&this.state.hasReconciledUser},t.prototype.isSubscriptionProductInvalid=function(e){return!e.emoteSetID},t.prototype.isSubscriptionDiscountReady=function(e){return!(!e||!e.subData)&&void 0!==e.subData.subscriptionProducts[0].self},t.prototype.hasDiscount=function(){var e=this.state;return!!this.isSubscriptionDiscountReady(e)&&(!(!e||!e.subData)&&a(e.subData.subscriptionProducts))},t=c.c([Object(g.a)(L,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(b.a)([{topic:function(e){return Object(k.l)(e.data.currentUser&&e.data.currentUser.id||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!(e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser)}}])],t)}(d.Component),V=B,H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.d(t,e),t.prototype.render=function(){return d.createElement(V,{hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,channelLogin:this.props.channelLogin,updateContainerWidth:this.props.updateContainerWidth,reportInteractive:this.reportInteractive})},t.prototype.reportInteractive=function(){this.props.latencyTracking.reportInteractive()},t=c.c([Object(m.c)("SubscribeButton")],t)}(d.Component),W=Object(u.connect)(s)(V);n.d(t,!1,function(){return H}),n.d(t,"a",function(){return W}),n.d(t,!1,function(){return"subscribe-button__dropdown"}),n.d(t,!1,function(){return j}),n.d(t,!1,function(){return V})},1213:function(e,t,n){"use strict";function i(e){return e||(e=navigator.userAgent),!!r.exec(e)}t.a=i;var r=/\scurse\/\d/},1220:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return p});var i,r=n(1),a=n(4),o=(n.n(a),n(0)),s=(n.n(o),n(2)),l=n(1248),c=n(3),d=n(1443);n.n(d);!function(e){e[e.Unsubmitted=0]="Unsubmitted",e[e.Success=1]="Success",e[e.FormError=2]="FormError",e[e.MutationError=3]="MutationError"}(i||(i={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={community:null,description:"",reason:null},t.headerMessage=Object(s.d)("Tell us your concern about this content so that we can review it to determine whether there has been a violation of the {tosLink}. {br} (Abuse of this feature is a violation of the terms of service)",{br:o.createElement("br",null),tosLink:o.createElement("a",{href:"https://www.twitch.tv/p/terms-of-service",target:"_blank"},Object(s.d)("terms of service","ReportUserModal"))},"ReportUserModal"),t.handleSubmit=function(e){e.preventDefault(),t.state.reason&&t.state.description.length>0?t.props.onSubmit(t.state.reason||"",t.state.description):t.props.onError(i.FormError)},t.handleTextAreaChange=function(e){t.setState({description:e.target.value})},t.handleReasonChange=function(e){t.setState({reason:e})},t}return r.d(t,e),t.prototype.render=function(){return o.createElement(c.S,{fullHeight:!0,display:c.G.Flex,flexDirection:c.H.Column,alignItems:c.c.Center,justifyContent:c.R.Center},this.renderStatusMessage(),this.renderBody())},t.prototype.renderBody=function(){return this.props.submitStatus===i.Success?o.createElement("div",null,o.createElement(c.t,{onClick:this.props.onClose},o.createElement(c.S,{padding:{x:2}},Object(s.d)("Close","ReportUserModal")))):o.createElement("div",null,o.createElement(c.S,{"data-test-selector":"reporting-modal.title",margin:{bottom:1}},o.createElement(c._16,{type:c._21.H4},this.props.title),o.createElement(c._12,{color:c.E.Alt2,margin:{top:1}},this.headerMessage)),o.createElement("form",null,o.createElement(c._12,{borderTop:!0,borderBottom:!0,margin:{y:2},padding:{y:2}},o.createElement(l.a,{reportContentType:this.props.reportContentType,onChange:this.handleReasonChange}),o.createElement(c.K,{id:"reporting-modal__text-area",label:Object(s.d)("Description (required)","ReportUserModal")},o.createElement(c._18,{onChange:this.handleTextAreaChange}))),o.createElement(c._12,{display:c.G.Flex,justifyContent:c.R.Center},o.createElement(c.t,{onClick:this.handleSubmit},o.createElement(c.S,{padding:{x:2}},Object(s.d)("Send","Reporting Modal"))))))},t.prototype.renderStatusMessage=function(){var e=null;switch(this.props.submitStatus){case i.FormError:e=Object(s.d)("Reason and Description are required.","ReportUserModal");break;case i.MutationError:e=Object(s.d)("Sorry, a network error occured when submitting your report. Please try again later.","ReportUserModal");break;case i.Success:e=Object(s.d)("Thank you for your report.","ReportUserModal");break;default:return null}var t=a({"reporting-modal__error-container":this.props.submitStatus!==i.Success,"reporting-modal__success-container":this.props.submitStatus===i.Success});return o.createElement(c._12,{className:t,fullWidth:this.props.submitStatus!==i.Success,"data-test-selector":"reporting-modal.error",margin:{bottom:2},padding:1},e)},t}(o.Component),p=u},1221:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={ChannelFeedComment:"CHANNEL_FEED_COMMENT_REPORT",ChannelFeedPost:"CHANNEL_FEED_POST_REPORT",Chat:"CHAT_REPORT",Clip:"CLIP_REPORT",Collection:"COLLECTION_REPORT",Community:"COMMUNITY_REPORT",Event:"EVENT_REPORT",Extension:"EXTENSION_REPORT",User:"USER_REPORT",VodComment:"VOD_COMMENT_REPORT",Vod:"VOD_REPORT"}},1222:function(e,t){},1223:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_SubscribeButton_Promotion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"isEligibleForDiscount"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"newPrice"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"discountType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"discountType"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}],loc:{start:0,end:246}};n.loc.source={body:"query ChannelPage_SubscribeButton_Promotion($login: String!) {\n  user(login: $login) {\n    id\n    subscriptionProducts {\n      id\n      self {\n\t\t\t\tisEligibleForDiscount\n\t\t\t\tnewPrice\n\t\t\t\toldPrice\n\t\t\t\tdiscountType\n\t\t\t\tdiscountType\n\t\t\t}\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1224:function(e,t){},1225:function(e,t){},1226:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_SubscribeButton_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"displayName"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"price"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"tier"},arguments:[],directives:[],selectionSet:null}]}}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"countryCode"},arguments:[],directives:[],selectionSet:null}]}}]}}],loc:{start:0,end:450}};n.loc.source={body:"query ChannelPage_SubscribeButton_User($login: String!) {\n  user(login: $login) {\n    id\n    login\n    displayName\n    subscriptionProducts {\n      id\n      price\n      url\n      emoteSetID\n      emotes {\n        id\n      }\n    }\n    self {\n      canPrimeSubscribe\n      subscriptionBenefit {\n        id\n        purchasedWithPrime\n        tier\n      }\n    }\n  }\n  currentUser {\n    id\n    login\n    hasPrime\n  }\n  requestInfo {\n    countryCode\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1227:function(e,t){},1228:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchAdModal_Redeeem"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RedeemTrueXAdInput"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"redeemTrueXAd"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"grantedBits"},arguments:[],directives:[],selectionSet:null}]}}]}}],loc:{start:0,end:114}};n.loc.source={body:"mutation WatchAdModal_Redeeem($input:RedeemTrueXAdInput!) {\n  redeemTrueXAd(input:$input) {\n    grantedBits\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1229:function(e,t){},1230:function(e,t){},1231:function(e,t){},1232:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Bits_BuyCard_Offers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"idSHA1"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bits"},arguments:[],directives:[],selectionSet:null},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"price"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"discount"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"includesVAT"},arguments:[],directives:[],selectionSet:null}]}}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"displayName"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"cheerMinimumBits"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}],loc:{start:0,end:399}};n.loc.source={body:"query Bits_BuyCard_Offers($channelLogin: String!) {\n  currentUser {\n    id\n    idSHA1\n    bitsBalance\n    bitsOffers {\n      id\n      type\n      bits\n      ... on BitsBundleOffer {\n        price\n        discount\n        url\n        includesVAT\n      }\n    }\n  }\n  user(login: $channelLogin) {\n    id\n    displayName\n    cheer {\n      id\n      settings {\n        cheerMinimumBits\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1233:function(e,t){},1234:function(e,t){},1235:function(e,t){},1236:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(0),r=(n.n(i),n(505)),a=function(e){var t,n=e.emote,a=n.alt||"";return n.cheerAmount&&(a+=" "+n.cheerAmount.toString(),t=i.createElement("strong",{className:"chat-line__message--cheer-amount",style:{color:n.cheerColor}},n.cheerAmount)),i.createElement(r.a,{alt:a,cheerText:t,className:"chat-line__message--emote",srcKey:"1x",srcSet:n.images})}},1238:function(e,t,n){"use strict";var i=n(0),r=n(2),a=n(74),o=n(3),s=function(e){return i.createElement(a.a,{onToggle:e.onToggle},i.createElement(o.u,{icon:o._6.Gear,ariaLabel:Object(r.d)("Chat settings","ChatInput"),"data-a-target":"chat-settings",disabled:!!e.disabled}),i.createElement(o.p,{direction:o.q.Top,noTail:!0,offsetY:"11px","data-a-target":"chat-settings-balloon"},e.children))};n.d(t,"a",function(){return s})},1240:function(e,t,n){"use strict";var i=n(1258);n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"b",function(){return i.b}),n.d(t,"a",function(){return i.a})},1244:function(e,t,n){"use strict";function i(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select();var n=!0;try{n=document.execCommand("copy")}catch(e){n=!1}return document.body.removeChild(t),n}t.a=i},1247:function(e,t,n){"use strict";function i(e){return{isLoggedIn:Object(I.d)(e)}}function r(e){return Object(w.bindActionCreators)({login:function(){return Object(D.f)(N.a.ReportHoster)},showReportUserModal:function(e){var t=p.f(e,[]);return Object(O.d)(P.a,t)}},e)}function a(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=e-3600*t-60*n;return t<10&&(t="0"+t),n<10&&(n="0"+n),i<10&&(i="0"+i),t+"h"+n+"m"+i+"s"}function o(e){return""===e?"":e.startsWith("v")?e:"v"+e}function s(){return!!window.Twitch&&!!window.Twitch.Player}function l(e){return{theatreModeEnabled:e.ui.theatreModeEnabled,isLoggedIn:Object(I.d)(e),authToken:Object(I.a)(e)}}function c(e){return Object(w.bindActionCreators)({enableTheatreMode:x.k,disableTheatreMode:x.j},e)}function d(e,t,n){if(!e.collectionID&&e.videoID)return void t.push("/videos/"+e.videoID);if(e.collectionID&&e.videoID){if(n&&n.currentVideoID&&n.currentCollectionID&&n.currentVideoID===e.videoID&&n.currentCollectionID===e.collectionID)return;return void t.push("/videos/"+e.videoID+"?collection="+e.collectionID)}if(e.collectionID&&!e.videoID)return void t.push("/collections/"+e.collectionID);g.g.withCategory("video-player").error(new Error("No collection or video specified from the emitted player transition event."),"No collection or video specified from the emitted player transition event.")}var u,p=n(1),m=n(4),h=n(0),f=n(14),g=n(2),b=n(323),v=n(74),y=n(18),S=n(1220),k=n(1221),C=n(1211),E=n(3),_=(n(1444),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportHosterClick=function(){t.props.isLoggedIn?t.props.showReportUserModal({onClose:t.handleReportModalClose,reportContext:{contentType:k.a.User,targetUserID:t.props.hostChannelID},title:Object(g.d)("Report {channelDisplayName}",{channelDisplayName:t.props.hostChannelDisplayName},"ReportUserModal")}):t.props.login()},t.handleReportModalClose=function(e){(e===S.a.MutationError||e===S.a.Success)&&t.props.history.push("/")},t}return p.d(t,e),t.prototype.render=function(){var e=!!this.props.hostedChannelDisplayName,t=m("video-player-hosting-ui__header",(i={},i["video-player-hosting-ui__header--visible"]=e,i["video-player-hosting-ui__header--hidden"]=!e,i)),n=m("video-player-hosting-ui__footer",(r={},r["video-player-hosting-ui__footer--visible"]=e,r["video-player-hosting-ui__footer--hidden"]=!e,r));return h.createElement(E.S,{className:"video-player-hosting-ui__container theme--dark"},h.createElement(f.a,{key:"hosting-ui-header",className:"video-player-hosting-ui__link",to:{pathname:"/"+this.props.hostedChannelLogin,state:{medium:y.e.Channel,content:y.a.Host}},"data-a-target":"hosting-ui-link","data-test-selector":"video-player-hosting-ui__header"},e&&this.renderHeader(t)),h.createElement("span",{key:"video-player"},this.props.children),h.createElement(E._12,{key:"hosting-ui-footer",className:n,padding:1,background:E.m.Alt,"data-test-selector":"video-player-hosting-ui__footer","data-a-target":"hosting-ui-footer"},e&&this.renderFooter()));var i,r},t.prototype.renderHeader=function(e){return h.createElement(E._12,{className:e,display:E.G.Flex,alignItems:E.c.Center,padding:{x:1,y:.5},background:E.m.Alt,"data-a-target":"hosting-ui-header"},h.createElement(E.S,{className:"video-player-hosting-ui__avatar-container"},h.createElement(E.l,{imageSrc:this.props.hostedChannelProfileImageURL||"",size:30,imageAlt:Object(g.d)("Hosted Channel {hostedChannelDisplayName}'s Avatar",{hostedChannelDisplayName:this.props.hostedChannelDisplayName||""},"VideoPlayerHostingUI")})),h.createElement(E._12,{margin:{left:1},fontSize:E.J.Size5,color:E.E.Base},Object(g.d)("Hosting","VideoPlayerHostingUI"),"",h.createElement(E._12,{className:"video-player-hosting-ui__channel-name",color:E.E.Link,"data-a-target":"hosting-ui-channel-name"},this.props.hostedChannelDisplayName)))},t.prototype.renderFooter=function(){return h.createElement(E.S,{padding:{y:.5},display:E.G.Flex,justifyContent:E.R.Between},h.createElement(E.S,{display:E.G.Flex},h.createElement(E.S,{margin:{right:1}},h.createElement(b.a,{"data-a-target":"hosting-ui-follow-button",channelName:this.props.hostedChannelLogin||"",channelLogin:this.props.hostedChannelLogin,hostChannelLogin:this.props.hostChannelLogin,hostChannelID:this.props.hostChannelID,isHostedFollow:!0,balloonDirection:E.q.BottomLeft})),h.createElement(E.S,null,h.createElement(C.a,{channelLogin:this.props.hostedChannelLogin,hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,"data-a-target":"hosting-ui-subscribe-button"}))),h.createElement(v.a,null,h.createElement(E.u,{type:E.v.Hollow,ariaLabel:Object(g.d)("More options","HostingUI"),icon:E._6.More,onClick:this.handleReportHosterClick,"data-a-target":"hosting-ui-more-button"}),h.createElement(E.p,{direction:E.q.TopRight,"data-a-target":"hosting-ui-more-balloon"},h.createElement(E.S,{padding:{y:1}},h.createElement(E.Q,{onClick:this.handleReportHosterClick,"data-a-target":"hosting-ui-report-button"},h.createElement(E.S,{padding:{x:1,y:.5}},Object(g.d)("Report {hostChannelDisplayName}",{hostChannelDisplayName:this.props.hostChannelDisplayName},"VideoPlayerHostingUI")))))))},t}(h.Component)),T=n(10),w=n(11),N=n(61),O=n(39),D=n(43),I=n(20),P=n(1261),A=Object(T.connect)(i,r)(Object(f.f)(_)),x=n(80),R=n(325),F=n(16),M=n(1262),U=n(6);!function(e){e.LoadStart="loadstart",e.Error="error",e.LoadedMetadata="loadedmetadata",e.CanPlay="canplay",e.Playing="playing",e.Waiting="waiting",e.Seeking="seeking",e.Seeked="seeked",e.Ended="ended",e.DurationChange="durationchange",e.TimeUpdate="timeupdate",e.Play="play",e.Pause="pause",e.VolumeChange="volumechange",e.RateChange="ratechange"}(u||(u={}));var L;!function(e){e.PlayerInit="init",e.ContentShowing="contentShowing",e.PlaybackStatistics="playbackStatistics",e.ChansubRequired="chansubRequired",e.VideoFailure="videoFailure",e.Formats="videoFormats",e.ABSStreamFormatChange="abs_stream_format_change",e.FormatChanged="videoFormatChanged",e.TimeChange="timeChange",e.BufferChange="bufferChange",e.SegmentChange="segmentchange",e.UsherFailError="usherFail",e.CaptionUpdate="captions",e.SeekFailed="seekfailed",e.VariantSwitchRequest="variantSwitchRequested",e.ViewersChange="viewerschange",e.StreamLoaded="streamLoaded",e.VideoLoaded="videoLoaded",e.VideoPaused="videoPaused",e.QualityChange="qualitychange",e.Online="online",e.Offline="offline",e.Restricted="restricted",e.CastingChange="castingchange",e.TheatreChange="theatrechange",e.MidrollRequested="midrollrequested",e.ManifestExtraInfo="manifestExtraInfo",e.TransitionToCollectionVOD="transitionToCollectionVod",e.TransitionToRecommendedVOD="transitionToRecommendedVod",e.StitchedAdStart="stitchedadstart",e.StichedAdEnd="stitchedadend",e.PersistenPlayerToggle="persistentPlayerEnableToggle",e.StatsUpdate="statsupdate",e.PromptLoginModal="prompt login modal",e.OpenStream="openStream",e.PlayerReady="ready",e.FullscreenChange="fullscreenchange"}(L||(L={}));var j;n(1446);!function(e){e.Embed="embed",e.Frontpage="frontpage",e.Site="site"}(j||(j={}));var B={allowfullscreen:!0,branding:!1,channelInfo:!1,controls:!0,height:"100%",mediaplayer:!0,playsinline:!0,player:j.Site,showInfo:!1,showtheatre:!1,trackingProperties:{client_app:"twilight"},width:"100%",oauth_token:""},V=function(e){function t(t){var n=e.call(this,t)||this;return n.logger=g.g.withCategory("video-player"),n.checkPlayerDependencyStatus=function(){s()?(n.setState({canInitializePlayer:!0}),n.checkPlayerDependencyAnimationFrame=null):n.checkPlayerDependencyAnimationFrame=requestAnimationFrame(n.checkPlayerDependencyStatus)},n.attachRef=function(e){return n.playerRef=e},n.onOpenStream=function(){n.props.playerTypeOverride===j.Frontpage&&(n.props.channelLogin?g.k.history.push("/"+n.props.channelLogin):n.props.vodID?g.k.history.push("/videos/"+n.props.vodID):n.props.collectionID&&g.k.history.push("/collections/"+n.props.collectionID))},n.onPlayerReady=function(){n.player&&(n.logger.debug("Ready"),n.props.latencyTracking.reportInteractive(),n.hasPlayed=!1,n.props.latencyTracking.reportCustomEvent(n.playerLoaded),n.setState({playerInitialized:!0},function(){return n.updatePlayerTrackingData()}))},n.onPlayerPlay=function(){n.logger.debug("Play"),n.reportPlayerPlayed()},n.onStreamStatusOnline=function(){n.props.onStreamStatusChange&&n.props.onStreamStatusChange(L.Online)},n.onStreamStatusOffline=function(){n.props.onStreamStatusChange&&n.props.onStreamStatusChange(L.Offline)},n.onTheatreChange=function(e){e?(n.logger.debug("Theatre Entered"),n.props.enableTheatreMode&&!n.props.theatreModeEnabled&&n.props.enableTheatreMode()):(n.logger.debug("Theatre Exited"),n.props.disableTheatreMode&&n.props.theatreModeEnabled&&n.props.disableTheatreMode())},n.onFullScreenChange=function(){n.player&&(n.logger.debug("Fullscreen change",n.player.fullscreen),n.player.fullscreen!==n.state.isFullScreen&&n.setState({isFullScreen:n.player.fullscreen}))},n.onSeek=function(){n.props.onSeek&&n.player&&n.props.onSeek(n.player.getCurrentTime())},n.onTimeUpdate=function(){n.props.onVideoTimeChange&&n.player&&n.props.onVideoTimeChange(n.player.getCurrentTime())},n.onTransitionToCollectionVod=function(e){if(n.props.onNavigationRequest){var t={};e.vodId&&(t.videoID=Object(M.a)(e.vodId)),e.collectionId&&(t.collectionID=e.collectionId),n.props.onNavigationRequest(t)}},n.onTransitionToRecommendedVod=function(e){if(n.props.onNavigationRequest){var t={};e.vodId&&(t.videoID=Object(M.a)(e.vodId)),n.props.onNavigationRequest(t)}},n.updatePlayerTrackingData=function(){if(n.state.playerInitialized&&n.player){var e=g.j.getLastPageview();e?(n.player.setTrackingProperties(p.a({},e)),n.logger.debug("Tracking data and updated.",{pageviewProperties:e})):n.logger.debug("Tracking data and not updated; pageviewProperties not found.",{pageviewProperties:e})}},n.updatePlayerType=function(){var e=n.props.playerTypeOverride||B.player;n.player&&n.playerType!==e&&(n.player.setPlayerType(e),n.playerType=e)},n.playerCreated=n.registerCreatedEvent(),n.playerLoaded=n.registerLoadedEvent(),n.playerPlayed=n.registerPlayedEvent(),n.state={canInitializePlayer:s(),playerInitialized:!1,isFullScreen:!1},n.playerType=t.playerTypeOverride||B.player,n.lastSetChannel=t.channelLogin,n}return p.d(t,e),t.prototype.componentDidMount=function(){if(this.props.latencyTracking.reportCustomEvent(this.playerCreated),this.state.canInitializePlayer?this.initializePlayer():this.checkPlayerDependencyAnimationFrame=window.requestAnimationFrame(this.checkPlayerDependencyStatus),g.j.eventEmitter.addListener(y.g.Pageview,this.updatePlayerTrackingData),window.__playerChunk&&!t.tagInjected){this.logger.debug("Loading player chunk after page loaded");var e=document.createElement("script");e.async=!0,e.crossOrigin="anonymous",e.src=window.__playerChunk,document.body.appendChild(e),t.tagInjected=!0}},t.prototype.componentWillUpdate=function(e,t){if(!this.state.canInitializePlayer&&t.canInitializePlayer)return void this.initializePlayer();if(t.canInitializePlayer&&t.playerInitialized){if(this.updatePlayerTrackingData(),this.updatePlayerType(),this.player&&e.theatreModeEnabled!==this.player.getTheatre()&&this.player.setTheatre(e.theatreModeEnabled),this.player&&e.channelLogin&&e.channelLogin!==this.lastSetChannel)return this.logger.debug("Setting Channel: ",e.channelLogin),this.player.setChannel(e.channelLogin),this.lastSetChannel=e.channelLogin,void g.j.setVideoPlayerTrackingData({vodID:void 0});var n=e.collectionID&&this.props.collectionID!==e.collectionID,i=e.vodID&&this.props.vodID!==e.vodID;if(n||i){var r=e.vodID?o(e.vodID):"";if(""!==r&&g.j.setVideoPlayerTrackingData({vodID:e.vodID}),!this.player)return;return void(n||e.collectionID&&i?this.player.setCollection(e.collectionID,r,e.nextVideoOffset):this.player.setVideo(r,e.nextVideoOffset))}void 0!==e.nextVideoOffset&&e.nextVideoOffset>=0&&this.props.nextVideoOffset!==e.nextVideoOffset&&this.player&&this.player.setCurrentTime(e.nextVideoOffset)}},t.prototype.render=function(){var e=m("video-player",{"video-player--theatre":this.props.theatreModeEnabled,"video-player--logged-in":this.props.isLoggedIn,"video-player--fullscreen":this.state.isFullScreen});return h.createElement("div",{className:m(e),"data-test-selector":"video-player"},h.createElement("div",{className:"video-player__container",ref:this.attachRef}))},t.prototype.componentWillUnmount=function(){this.checkPlayerDependencyAnimationFrame&&cancelAnimationFrame(this.checkPlayerDependencyAnimationFrame),this.maybeDetachFromWindow(),this.player&&(g.j.eventEmitter.removeListener(y.g.Pageview,this.updatePlayerTrackingData),this.player.removeEventListener(L.PlayerReady,this.onPlayerReady),this.player.removeEventListener(L.Online,this.onStreamStatusOnline),this.player.removeEventListener(L.Offline,this.onStreamStatusOffline),this.player.removeEventListener(u.Ended,this.onStreamStatusOffline),this.player.removeEventListener(u.Play,this.onPlayerPlay),this.player.removeEventListener(L.TheatreChange,this.onTheatreChange),this.player.removeEventListener(L.TransitionToCollectionVOD,this.onTransitionToCollectionVod),this.player.removeEventListener(L.FullscreenChange,this.onFullScreenChange),this.player.removeEventListener(u.Seeked,this.onSeek),this.player.removeEventListener(u.TimeUpdate,this.onTimeUpdate),this.player.removeEventListener(L.OpenStream,this.onOpenStream),R.extensionService.unregisterPlayer(),this.player.destroy()),g.j.setVideoPlayerTrackingData({vodID:void 0})},t.prototype.initializePlayer=function(){var e=p.a({},B,{showtheatre:!this.props.disableTheatreButton});this.props.playerTypeOverride&&(e.player=this.props.playerTypeOverride,this.playerType=this.props.playerTypeOverride),this.props.channelLogin&&(e.channel=this.props.channelLogin,this.lastSetChannel=this.props.channelLogin),this.props.collectionID&&(e.collection=this.props.collectionID),this.props.vodID&&(e.video=o(this.props.vodID),g.j.setVideoPlayerTrackingData({vodID:this.props.vodID})),this.props.nextVideoOffset&&(e.time=a(this.props.nextVideoOffset)),e.oauth_token=this.props.authToken||"",this.logger.debug("Initializing",e);var t=new window.Twitch.Player(this.playerRef,e);this.player=t,t.addEventListener(L.PlayerReady,this.onPlayerReady),t.addEventListener(L.Online,this.onStreamStatusOnline),t.addEventListener(L.Offline,this.onStreamStatusOffline),t.addEventListener(u.Ended,this.onStreamStatusOffline),t.addEventListener(u.Play,this.onPlayerPlay),t.addEventListener(u.Seeked,this.onSeek),t.addEventListener(u.TimeUpdate,this.onTimeUpdate),t.addEventListener(L.TheatreChange,this.onTheatreChange),t.addEventListener(L.FullscreenChange,this.onFullScreenChange),t.addEventListener(L.TransitionToCollectionVOD,this.onTransitionToCollectionVod),t.addEventListener(L.TransitionToRecommendedVOD,this.onTransitionToRecommendedVod),t.addEventListener(L.OpenStream,this.onOpenStream),R.extensionService.registerPlayer(this.player),this.maybeAttachToWindow(this.props)},t.prototype.registerCreatedEvent=function(){return this.props.latencyTracking.registerCustomEvent("Player","player-created","Created",1e3)},t.prototype.registerLoadedEvent=function(){return this.props.latencyTracking.registerCustomEvent("Player","player-loaded","Init",2500)},t.prototype.registerPlayedEvent=function(){return this.props.latencyTracking.registerCustomEvent("Player","player-played","First Frame",4e3)},t.prototype.reportPlayerPlayed=function(){this.hasPlayed||(this.hasPlayed=!0,this.playerPlayed&&this.props.latencyTracking.reportCustomEvent(this.playerPlayed))},t.prototype.maybeAttachToWindow=function(e){g.a.buildType!==F.a.Production&&e.attachToWindowInDebug&&this.player&&(window.player=this.player)},t.prototype.maybeDetachFromWindow=function(){window.player=void 0},t.tagInjected=!1,t}(h.Component),H=Object(U.c)("VideoPlayer")(V),W=Object(T.connect)(l,c)(H);n.d(t,!1,function(){return"hosting-ui-report-button"}),n.d(t,!1,function(){return"hosting-ui-more-balloon"}),n.d(t,!1,function(){return"hosting-ui-more-button"}),n.d(t,!1,function(){return"hosting-ui-channel-name"}),n.d(t,!1,function(){return"video-player-hosting-ui__header"}),n.d(t,!1,function(){return"video-player-hosting-ui__footer"}),n.d(t,!1,function(){return"video-player-hosting-ui__header--hidden"}),n.d(t,!1,function(){return"video-player-hosting-ui__header--visible"}),n.d(t,!1,function(){return"video-player-hosting-ui__footer--hidden"}),n.d(t,!1,function(){return"video-player-hosting-ui__footer--visible"}),n.d(t,!1,function(){return _}),n.d(t,"a",function(){return A}),n.d(t,"b",function(){return j}),n.d(t,"c",function(){return W}),n.d(t,"d",function(){return d})},1248:function(e,t,n){"use strict";function i(e){if(e){var t=e.map(function(e){return e.id});return c().filter(function(e){return t.includes(e.canonical)})}return c()}var r=n(1),a=n(0),o=n(2),s=n(8),l=n(6),c=function(){return[{localized:Object(o.d)("Site Suspension Evasion","ReportUserModal"),canonical:"tos_ban_evasion"},{localized:Object(o.d)("Chat Ban Evasion","ReportUserModal"),canonical:"chat_ban_evasion"},{localized:Object(o.d)("Self-Harm","ReportUserModal"),canonical:"selfharm"},{localized:Object(o.d)("Attempts or Threats to Harm","ReportUserModal"),canonical:"harm"},{localized:Object(o.d)("Harassment","ReportUserModal"),canonical:"harassment"},{localized:Object(o.d)("Hate Speech","ReportUserModal"),canonical:"hate_speech"},{localized:Object(o.d)("Offensive Username","ReportUserModal"),canonical:"offensive_username"},{localized:Object(o.d)("Impersonation","ReportUserModal"),canonical:"impersonation"},{localized:Object(o.d)("Spam, Scams, or Other Malicious Content","ReportUserModal"),canonical:"spam"},{localized:Object(o.d)("Porn or Other Sexually Explicit Content","ReportUserModal"),canonical:"porn"},{localized:Object(o.d)("Nudity or Sexual Behavior/Attire","ReportUserModal"),canonical:"nudity"},{localized:Object(o.d)("Extreme Violence, Gore, or Other Obscene Content","ReportUserModal"),canonical:"gore"},{localized:Object(o.d)("Underaged User","ReportUserModal"),canonical:"underaged"},{localized:Object(o.d)("Cheating in Online Game","ReportUserModal"),canonical:"cheating"},{localized:Object(o.d)("Prohibited Game","ReportUserModal"),canonical:"prohibited"},{localized:Object(o.d)("Miscategorized Content or Other Category Violation","ReportUserModal"),canonical:"miscategorized"},{localized:Object(o.d)("Community is Violating Terms of Service","ReportUserModal"),canonical:"community_tos_violation"},{localized:Object(o.d)("Bits Acceptable Use Policy Violation","ReportUserModal"),canonical:"bits_violation"},{localized:Object(o.d)("Other Terms of Service Violation","ReportUserModal"),canonical:"other"}]},d=n(3),u=n(1249),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange(e.target.value)},t}return r.d(t,e),t.prototype.componentDidUpdate=function(){this.props.data.loading&&!this.props.data.error||this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=null,t=Object(o.d)("Select One...","ReportUserModal");return e=this.props.data.loading?[a.createElement("option",{key:"Loading"},Object(o.d)("Loading...","ReportReasonsSelect"))]:i(this.props.data.reportReasons).map(function(e){return a.createElement("option",{key:e.canonical,value:e.canonical},e.localized)}),a.createElement(d.S,{margin:{bottom:2}},a.createElement(d.K,{id:"reporting-modal__select",label:Object(o.d)("Select Reason (required)","ReportUserModal")},a.createElement(d._9,{id:"reporting-modal__select","data-test-selector":"reporting-modal.select",disabled:this.props.data.loading||!!this.props.data.error,onChange:this.handleChange,defaultValue:t},a.createElement("option",{disabled:!0,key:"default"},t),e)))},t=r.c([Object(l.c)("ReportReasonSelect")],t)}(a.Component),m=Object(s.a)(u,{options:function(e){return{variables:{content:e.reportContentType}}}})(p);n.d(t,!1,function(){return"reporting-modal.select"}),n.d(t,!1,function(){return p}),n.d(t,"a",function(){return m})},1249:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReportUserModal_ReportReasons"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentType"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"reportReasons"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"query ReportUserModal_ReportReasons($content: ReportContentType!) {\n  reportReasons(content: $content) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1250:function(e,t,n){"use strict";var i=n(1),r=n(0),a=n(4),o=n(129),s=n(3),l=(n(1251),function(e){var t=a("twi-drop-zone",{"twi-drop-zone--over":e.dragOver});return r.createElement(s.S,i.a({className:t},Object(o.a)(e),{alignItems:s.c.Center,display:s.G.Flex,fullHeight:!0,fullWidth:!0,justifyContent:s.R.Center,position:s.Z.Absolute}),e.children)});n.d(t,"a",function(){return c});var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isDraggingOver:!1},t.refHandler=function(e){t.fileInputRef=e},t.onFilePickerClick=function(){t.fileInputRef.click()},t.onDragOver=function(e){e.preventDefault(),t.setState({isDraggingOver:!0})},t.onDragLeave=function(e){e.preventDefault(),t.setState({isDraggingOver:!1})},t.onFileInputChange=function(e){e.preventDefault(),t.finalizeSelections(e.target.files)},t.onFileDrop=function(e){e.preventDefault(),t.setState({isDraggingOver:!1}),t.finalizeSelections(e.dataTransfer.files)},t}return i.d(t,e),t.prototype.render=function(){return r.createElement("div",{"data-test-selector":"file-picker-root",onClick:this.onFilePickerClick,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onFileDrop},r.createElement(l,{dragOver:this.state.isDraggingOver},r.createElement(s.N,{display:s.G.Hide},r.createElement("input",{accept:this.props.allowedFileTypes.join(","),multiple:this.props.multiFile||!1,onChange:this.onFileInputChange,ref:this.refHandler,type:"file"})),this.props.children))},t.prototype.finalizeSelections=function(e){e&&this.props.onFilesSubmitted(Array.from(e))},t}(r.Component)},1251:function(e,t){},1253:function(e,t){},1258:function(e,t,n){"use strict";function i(e,t,n){var i=new FileReader;i.onloadend=function(){t(i.result)},i.readAsDataURL(e);var r=new FileReader;r.onloadend=function(){n(r.result)},r.readAsArrayBuffer(e)}function r(e,t){if(!t)throw new Error("Attempted to upload an empty file object.");var n=decodeURI(e);return fetch(n,{method:"PUT",body:new Blob([t])})}function a(e,t,n){if(void 0===n)throw new Error("No default avatar selected.");return fetch(h.a.krakenEndpoint+"/users/"+e+"/default_images?client_id="+h.a.authClientID+"&api_version="+h.a.defaultAPIVersion,{method:"PUT",headers:{Authorization:"OAuth "+t,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({default_profile_image:z[n].id})})}function o(e,t){return d.b(this,void 0,void 0,function(){var n;return d.e(this,function(i){switch(i.label){case 0:return[4,fetch(h.a.krakenEndpoint+"/users/"+e+"/upload_image?client_id="+h.a.authClientID+"&api_version="+h.a.defaultAPIVersion+"&image_type=profile_image",{method:"POST",headers:{Authorization:"OAuth "+t}})];case 1:return n=i.sent(),[2,n.json()]}})})}function s(e){return{authToken:Object(B.a)(e)}}function l(e,t){return Object(L.bindActionCreators)({closeModal:function(){return t.successCallback&&t.successCallback(),Object(j.c)()}},e)}function c(e){return Object(L.bindActionCreators)({showModal:j.d},e)}var d=n(1),u=n(4),p=n(0),m=n(14),h=n(2),f=n(323),g=n(509),b=n(74),v=n(8),y=n(16),S=n(1194),k=n(1199),C=n(1207),E=n(1208),_=n(1191),T=n(3),w=(n(1264),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePromoBuy=function(e){var n=Object(_.b)({trackBitsCardInteraction:t.props.trackBitsCardInteraction,channelID:t.props.channelID,purchaseUrl:e.currentTarget.dataset.purchaseUrl,bitsAmount:e.currentTarget.dataset.bitsAmount});n&&t.props.onPromoBuyClose(n)},t}return d.d(t,e),t.prototype.render=function(){var e=p.createElement(T.S,null,p.createElement(T.S,{padding:{x:5,y:2},textAlign:T._17.Center},p.createElement(T._16,{type:T._21.H4,bold:!0},Object(h.d)("Cheer Bits for your Favorite Streamer!","Bits--FirstTimeUserPrompt"))),p.createElement(T.S,{padding:{x:2,bottom:1}},p.createElement(T._16,{type:T._21.Span,color:T.E.Alt},Object(h.d)("Bits are fun, animated emotes. Cheering Bits celebrates moments you love with the community right in chat and similar to subscribing, helps support Partners and Affiliates.","Bits--FirstTimeUserPrompt"),p.createElement(T.N,{margin:{left:.5}},p.createElement("a",{onClick:this.props.toggleShowTutorial},Object(h.d)("How do I cheer?","Bits--FirstTimeUserPrompt"))))),p.createElement(T.S,{padding:{bottom:2},textAlign:T._17.Center},p.createElement(T.N,{margin:{bottom:1}},p.createElement(T._16,{type:T._21.H6,bold:!0,className:"bits-first-time-user-prompt__promo-header"},Object(h.d)("First Time Purchaser Discount Pack!","Bits--FirstTimeUserPrompt"))),p.createElement(T.t,{onClick:this.handlePromoBuy,"data-purchase-url":this.props.promo.url,"data-bits-amount":this.props.promo.bits,"data-a-target":"bits-purchase-button-"+this.props.promo.bits},Object(h.d)("{price} For {amount} Bits",{price:this.props.promo.price,amount:this.props.promo.bits},"Bits--FirstTimeUserPrompt"))));return this.props.isShowingTutorial?p.createElement(T.S,{className:"bits-first-time-user-prompt",fullWidth:!0},p.createElement(T.S,{className:"bits-first-time-user-prompt__tutorial-back-button"},p.createElement(T.t,{onClick:this.props.toggleShowTutorial,type:T.y.Text},p.createElement(T._5,{asset:T._6.Play,height:8})," ",Object(h.d)("Back","Bits--FirstTimeUserPrompt"))),p.createElement(T.S,{textAlign:T._17.Center,padding:{x:2,bottom:2,top:5},fullHeight:!0},p.createElement(T.e,{type:T.i.SlideInLeft,duration:T.g.Long,enabled:!0},p.createElement(E.a,null)))):this.props.animateFirstTimeUserIntro?p.createElement(T.N,{className:"bits-first-time-user-prompt"},p.createElement(T.e,{type:T.i.SlideInRight,duration:T.g.Long,enabled:this.props.animateFirstTimeUserIntro},e)):p.createElement(T.S,{className:"bits-first-time-user-prompt"},e)},t}(p.Component)),N=w,O=n(1202),D=n(1197),I=n(1186),P=n(6),A=n(1265),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hideFirstTimeUserIntro:!1},t.trackBitsCardInteraction=function(e,n,i){var r={actionName:e,emoteType:n,emoteLevel:i,displayedBalance:t.props.bitsBalance||0};Object(I.g)(r)},t.onClose=function(){},t.onPromoBuyClose=function(e){Object(S.a)(e,function(){t.props.data&&t.props.data.refetch()})},t}return d.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){if(!this.props.bitsConfig||!this.props.bitsOffers||void 0===this.props.bitsBalance)return p.createElement(T._12,{"data-a-target":"get-bits-button-content-loading",display:T.G.Flex,flexDirection:T.H.Column,alignItems:T.c.Center,justifyContent:T.R.Center,textAlign:T._17.Center,padding:{y:5}},p.createElement(T.U,{delay:0}),p.createElement(T.S,{padding:{top:2}},p.createElement(T._16,{italic:!0},Object(h.d)("Fetching bits","Bits--GetBitsButtonContent"))));var e=null;if(this.props.bitsOffers){var t=h.b.get("bits_special_promo_offer_id",""),n=this.props.bitsOffers.find(function(e){return e.id===t});n&&n.type===O.b&&this.props.channelID&&!this.state.hideFirstTimeUserIntro&&(e=p.createElement(N,{promo:n,animateFirstTimeUserIntro:this.props.animateFirstTimeUserIntro,isShowingTutorial:this.props.isShowingTutorial,toggleShowTutorial:this.props.toggleShowTutorial,trackBitsCardInteraction:this.trackBitsCardInteraction,channelID:this.props.channelID,onPromoBuyClose:this.onPromoBuyClose}))}var i=null;void 0!==this.props.bitsBalance&&this.props.bitsConfig&&(i=p.createElement(T._12,{borderBottom:!0,textAlign:T._17.Center,fullWidth:!0,padding:{y:.5}},p.createElement(T._16,{type:T._21.Span},Object(h.d)("You have {bitsBalance}",{bitsBalance:p.createElement(k.a,{withImage:!0,count:this.props.bitsBalance,bitsConfig:this.props.bitsConfig})},"Bits--GetBitsButton"))));var r=null;return this.props.bitsConfig&&this.props.channelLogin&&(r=p.createElement(C.a,{bitsConfig:this.props.bitsConfig,channelLogin:this.props.channelLogin,closeAllBits:this.onClose,onClose:this.onClose,trackBitsCardInteraction:this.trackBitsCardInteraction,location:C.b.GetBitsButton,hidePromos:!0,hideWateb:!0})),p.createElement(T.S,{className:"get-bits-button-content"},i,e,r)},t=d.c([Object(P.c)("GetBitsButtonContent"),Object(v.a)(A,{name:"data",props:function(e){var t,n;e.data&&e.data.user&&e.data.user.cheer&&(t=Object(D.a)(e.data.user.cheer.emotes),n=e.data.user.id);var i,r;return e.data&&e.data.currentUser&&(r=e.data.currentUser.bitsBalance,i=e.data.currentUser.bitsOffers),{bitsOffers:i,bitsBalance:r,bitsConfig:t,channelID:n}},skip:function(e){return!e.channelLogin},options:function(e){return{variables:{login:e.channelLogin}}}})],t)}(p.Component),R=x,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isShowingTutorial:!1,animateFirstTimeUserIntro:!1},t.toggleBalloon=function(){t.setState({animateFirstTimeUserIntro:!1})},t.toggleShowTutorial=function(){t.setState({isShowingTutorial:!t.state.isShowingTutorial,animateFirstTimeUserIntro:!0})},t}return d.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){var e=null;return this.props.channelLogin&&(e=p.createElement(R,{channelLogin:this.props.channelLogin,toggleShowTutorial:this.toggleShowTutorial,isShowingTutorial:this.state.isShowingTutorial,animateFirstTimeUserIntro:this.state.animateFirstTimeUserIntro})),p.createElement(b.a,{onToggle:this.toggleBalloon},p.createElement(T.t,{dropdown:!0},Object(h.d)("Get Bits","Bits--GetBitsButton")),p.createElement(T.p,{direction:T.q.BottomRight,size:T.r.Large},e))},t=d.c([Object(P.c)("GetBitsButton")],t)}(p.Component),M=F,U=n(10),L=n(11),j=n(39),B=n(20),V=n(1250),H=n(128),W=n(42),q=(n(1266),function(e){var t=function(){e.onSelect(e.index)},n={"default-avatar__selected":e.selected,"default-avatar":!0};return p.createElement(T.S,{padding:{bottom:1}},p.createElement("div",{onClick:t,"aria-label":Object(h.d)("Click to select Default Avatar Number {index, number}",{index:e.index},"Default Avatar")},p.createElement(T._12,{border:!0,fullHeight:!0,fullWidth:!0,position:T.Z.Relative,className:u(n)},p.createElement("img",{alt:Object(h.d)("Default Avatar Number {index, number}",{index:e.index},"Default Avatar"),src:e.imageSrc}))))}),G=(n(1267),n(1268)),z=[{id:"profile_image_001",uri:"https://static-cdn.jtvnw.net/user-default-pictures/bb97f7e6-f11a-4194-9708-52bf5a5125e8-profile_image-300x300.jpg"},{id:"profile_image_002",uri:"https://static-cdn.jtvnw.net/user-default-pictures/27103734-3cda-44d6-a384-f2ab71e4bb85-profile_image-300x300.jpg"},{id:"profile_image_003",uri:"https://static-cdn.jtvnw.net/user-default-pictures/49988c7b-57bc-4dee-bd4f-6df4ad215d3a-profile_image-300x300.jpg"},{id:"profile_image_004",uri:"https://static-cdn.jtvnw.net/user-default-pictures/0ecbb6c3-fecb-4016-8115-aa467b7c36ed-profile_image-300x300.jpg"},{id:"profile_image_005",uri:"https://static-cdn.jtvnw.net/user-default-pictures/cd618d3e-f14d-4960-b7cf-094231b04735-profile_image-300x300.jpg"},{id:"profile_image_006",uri:"https://static-cdn.jtvnw.net/user-default-pictures/4cbf10f1-bb9f-4f57-90e1-15bf06cfe6f5-profile_image-300x300.jpg"},{id:"profile_image_007",uri:"https://static-cdn.jtvnw.net/user-default-pictures/b83b1794-7df9-4878-916c-88c2ad2e4f9f-profile_image-300x300.jpg"}],$=["image/*"],Q={SUCCESS:"SUCCESS",NON_IMAGE:"IS_IMAGE_VALIDATION_FAILED",WRONG_FORMAT:"IMAGE_FORMAT_VALIDATION_FAILED",BAD_SIZE:"FILE_SIZE_VALIDATION_FAILED"},K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={statusMessage:null,imagePreviewURL:"",profileUpdated:!1,currentImageHasTallAspectRatio:!1},t.currentImage=null,t.logger=h.g.withCategory("ProfileImagePicker"),t.successPill=p.createElement(T.W,{label:Object(h.d)("Success!","Profile Edit"),type:T.X.Success}),t.nonImageErrorPill=p.createElement(T.W,{label:Object(h.d)("You must upload an image.","Profile Edit"),type:T.X.Alert}),t.unexpectedErrorPill=p.createElement(T.W,{label:Object(h.d)("Unexpected error, please try again.","Profile Edit"),type:T.X.Alert}),t.badSizeErrorPill=p.createElement(T.W,{label:Object(h.d)("Image might exceed 5MB.","Profile Edit"),type:T.X.Alert}),t.wrongFormatErrorPill=p.createElement(T.W,{label:Object(h.d)("You must select a valid image type.","Profile Edit"),type:T.X.Alert}),t.timeoutErrorPill=p.createElement(T.W,{label:Object(h.d)("Upload timed-out. Please try again.","Profile Edit"),type:T.X.Alert}),t.uploadingPill=p.createElement(T.W,{label:Object(h.d)("Uploading....","Profile Edit"),type:T.X.Brand}),t.imageNotSlectedPill=p.createElement(T.W,{label:Object(h.d)("Select a image first.","Profile Edit"),type:T.X.Alert}),t.statusMessagePills={success:t.successPill,unexpectedError:t.unexpectedErrorPill,badSizeError:t.badSizeErrorPill,nonImageError:t.nonImageErrorPill,wrongFormatError:t.wrongFormatErrorPill,timeoutError:t.timeoutErrorPill,uploading:t.uploadingPill,imageNotSlected:t.imageNotSlectedPill},t.onImageInputChange=function(e){var n;if(null===e)return void t.setState({statusMessage:t.statusMessagePills.imageNotSlected});n=e[0];var r=(n.size/1024/1024).toFixed(4);if(parseInt(r,10)>5)return void t.setState({statusMessage:t.statusMessagePills.badSizeError});t.setState({selectedImageIndex:void 0,imagePreviewURL:"",currentImageHasTallAspectRatio:!1}),i(n,function(e){var n=new Image,i=!1;n.onload=function(){n.width<n.height&&(i=!0),t.setState({currentImageHasTallAspectRatio:i})},n.src=e,t.setState({imagePreviewURL:e})},function(e){t.currentImage=e,t.setState({statusMessage:null})})},t.onUpdateButtonClick=function(e){return d.b(t,void 0,void 0,function(){var t,n,i,a,s=this;return d.e(this,function(l){switch(l.label){case 0:if(e.preventDefault(),void 0!==this.state.selectedImageIndex)return this.setDefaultAvatar(),[2];if(!this.currentImage)return this.setState({statusMessage:this.imageNotSlectedPill}),[2];this.setState({statusMessage:this.statusMessagePills.uploading}),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o(this.props.userID,this.props.authToken)];case 2:return t=l.sent(),n=t.upload_url,i=t.upload_id,[3,4];case 3:return a=l.sent(),this.logger.error(a,"Request for upload ID failed to get expected response from server."),this.setState({statusMessage:this.statusMessagePills.unexpectedError}),[2];case 4:return this.unsubscribe=h.h.subscribe({topic:Object(W.c)(this.props.userID),success:function(){try{r(n,s.currentImage)}catch(e){s.logger.error(e,"Profile Image upload failed."),s.unsubscribe(),s.setState({statusMessage:s.statusMessagePills.unexpectedError,selectedImageIndex:void 0,imagePreviewURL:"",currentImageHasTallAspectRatio:!1})}s.timeoutFunc=setTimeout(function(){return s.handlePubSubTimeout()},1e4)},failure:function(){s.setState({statusMessage:s.statusMessagePills.unexpectedError,selectedImageIndex:void 0,imagePreviewURL:"",currentImageHasTallAspectRatio:!1})},onMessage:function(e){if(e.upload_id===i){clearTimeout(s.timeoutFunc);var t=null,n=s.state.imagePreviewURL;e.status===Q.SUCCESS?t=s.statusMessagePills.success:e.status===Q.BAD_SIZE?(t=s.statusMessagePills.badSizeError,n="",s.currentImage=null):e.status===Q.NON_IMAGE?(t=s.statusMessagePills.nonImageError,n="",s.currentImage=null):e.status===Q.WRONG_FORMAT?(t=s.statusMessagePills.wrongFormatError,n="",s.currentImage=null):(t=s.statusMessagePills.unexpectedError,n="",s.currentImage=null),s.unsubscribe&&s.unsubscribe(),s.setState({statusMessage:t,imagePreviewURL:n}),s.state.statusMessage===s.statusMessagePills.success&&s.setState({profileUpdated:!0})}}}),[2]}})})},t.onDefaultImageSelected=function(e){t.setState({selectedImageIndex:e,imagePreviewURL:z[e].uri})},t.handlePubSubTimeout=function(){t.unsubscribe(),t.setState({statusMessage:t.statusMessagePills.timeoutError})},t}return d.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentWillUnmount=function(){void 0!==this.unsubscribe&&this.unsubscribe()},t.prototype.componentDidUpdate=function(){var e=this;this.state.profileUpdated&&setTimeout(function(){e.props.data&&e.props.data.refetch(),e.props.closeModal()},1e3)},t.prototype.render=function(){var e=this,t=z.map(function(t,n){return p.createElement(q,{key:t.id,imageSrc:t.uri,index:n,onSelect:e.onDefaultImageSelected,selected:e.state.selectedImageIndex===n})}),n=""!==this.state.imagePreviewURL,i=null;if(n){var r={"profile-edit__image-preview":!0,"profile-edit__image-preview-tall":this.state.currentImageHasTallAspectRatio};i=p.createElement(T.S,{className:u(r),"data-test-selector":"preview-image",position:T.Z.Relative},p.createElement("img",{src:""+this.state.imagePreviewURL}))}var a=""===this.state.imagePreviewURL,o=null;a&&(o=p.createElement(T.S,{className:"profile-edit__upload-info"},p.createElement(T.S,null,p.createElement(T._5,{asset:T._6.Plus,type:T._7.Alt2,height:20,width:20})),p.createElement(T._16,{type:T._21.H3,color:T.E.Alt2,fontSize:T.J.Size4},Object(h.d)("Upload a Photo","Profile Edit"))));var s=null;return!1!==this.props.showCloser&&(s=p.createElement(H.a,null)),p.createElement(T.S,{className:"profile-edit",position:T.Z.Relative,fullHeight:!0},p.createElement(T._12,{className:"profile-edit__background-container",background:T.m.Base,fullWidth:!0},p.createElement(T.S,{padding:2,display:T.G.InlineBlock,position:T.Z.Relative,textAlign:T._17.Center,fullWidth:!0},p.createElement(T._12,{borderBottom:!0,margin:{bottom:2}},p.createElement(T._16,{type:T._21.H3,fontSize:T.J.Size4},Object(h.d)("Your Profile Picture","Profile Edit")," ")),p.createElement(T.S,{className:"profile-edit__upload-container",display:T.G.InlineBlock,position:T.Z.Relative,textAlign:T._17.Center,margin:{bottom:1}},p.createElement(T.S,{className:"profile-edit__upload",display:T.G.InlineBlock,position:T.Z.Relative,textAlign:T._17.Center},p.createElement(V.a,{allowedFileTypes:$,onFilesSubmitted:this.onImageInputChange},o),i)),p.createElement(T._12,{"data-test-selector":"status-message",fontSize:T.J.Size4,position:T.Z.Relative,textAlign:T._17.Center,className:"profile-edit__status-message"},this.state.statusMessage),p.createElement(T._12,{borderBottom:!0,padding:{bottom:.5},margin:{bottom:2}},p.createElement(T.S,{margin:{bottom:1}},p.createElement(T._16,{type:T._21.H3,fontSize:T.J.Size5},Object(h.d)("Or select one of these","Profile Edit"))),p.createElement(T._28,{childWidth:T._29.ExtraSmall,gutterSize:T._30.ExtraSmall,placeholderItems:3},t)),p.createElement(T.S,{display:T.G.Flex,justifyContent:T.R.Center},p.createElement(T.t,{"data-test-selector":"update-button",onClick:this.onUpdateButtonClick},Object(h.d)("Update","Profile Edit"))))),s)},t.prototype.setDefaultAvatar=function(){return d.b(this,void 0,void 0,function(){var e,t,n;return d.e(this,function(i){switch(i.label){case 0:this.setState({statusMessage:this.statusMessagePills.uploading}),e=this.statusMessagePills.unexpectedError,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a(this.props.userID,this.props.authToken,this.state.selectedImageIndex)];case 2:return t=i.sent(),204===t.status||200===t.status?e=this.statusMessagePills.success:this.logger.error(new Error("Default Avatar PUT failed. Fetch returned non-200 status: "+t.status),"Default Avatar PUT failed. Fetch returned non-200 status: "+t.status),[3,4];case 3:return n=i.sent(),this.logger.error(n,"Default Avatar PUT failed."),[3,4];case 4:return this.setState({statusMessage:e}),e===this.statusMessagePills.success&&this.setState({profileUpdated:!0}),[2]}})})},t=d.c([Object(v.a)(G,{options:function(e){return{variables:{login:e.login}}}})],t)}(p.Component),Y=Object(P.c)("Profile Edit")(K),J=Object(U.connect)(s,l)(Y),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.openModal=function(e){e.preventDefault(),t.props.showModal(J,{userID:t.props.userID,login:t.props.login})},t}return d.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return p.createElement(T.S,{className:"edit-profile-button",margin:{left:1}},p.createElement(T.t,{type:T.y.Hollow,icon:T._6.Edit,onClick:this.openModal},Object(h.d)("Edit Profile Picture","ChannelHeader")))},t=d.c([Object(P.c)("ProfileEditButton")],t)}(p.Component),X=Z,ee=Object(U.connect)(null,c)(X),te=n(1211),ne=(n(1269),n(1270));n.d(t,"b",function(){return ie}),n.d(t,"a",function(){return se});var ie,re="channel-header__verified-badge",ae="channel-header__live-indicator";!function(e){e[e.Channel=1]="Channel",e[e.Clips=2]="Clips",e[e.Collections=3]="Collections",e[e.Events=4]="Events",e[e.Success=5]="Success",e[e.Followers=6]="Followers",e[e.Following=7]="Following",e[e.Videos=8]="Videos"}(ie||(ie={}));var oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={live:!1},t.verifiedBadgeElement=p.createElement(T._25,{label:Object(h.d)("Verified","ChannelHeader"),direction:T._27.Right},p.createElement(T.S,{className:"channel-header__verified","data-target":re,display:T.G.Flex,alignItems:T.c.Center,margin:{left:1}},p.createElement(T._5,{asset:T._6.Verified}))),t.liveIndicatorElement=p.createElement(T.S,{margin:{left:1},"data-target":ae},p.createElement(T._25,{label:Object(h.d)("Live Now","ChannelHeader"),direction:T._27.Right},p.createElement(T.T,{pulse:!0}))),t.renderAvatarEditButton=function(){return h.a.buildType!==y.a.Production&&t.props.data?!t.props.data||t.props.data.currentUser&&t.props.data.currentUser.roles&&!t.props.data.currentUser.roles.isStaff?null:t.props.data&&t.props.data.currentUser&&t.props.data.user&&t.props.data.currentUser.roles&&(t.props.data.currentUser.id===t.props.data.user.id||t.props.data.currentUser.roles.isStaff||t.props.data.currentUser.roles.isSiteAdmin)?p.createElement(ee,{userID:t.props.data.user.id,login:t.props.data.user.login}):null:null},t.onUpdateDebounce=function(){if(!t.resizeAnimationFrame&&t.channelHeader){var e=t.channelHeader.querySelector('[data-target="channel-header-left"]');t.updateWidth(t.getWidth(e).width),t.resizeAnimationFrame=requestAnimationFrame(t.handleWindowResize)}},t.handleWindowResize=function(){t.resizeAnimationFrame=null,t.getChannelHeaderSize()},t.saveChannelHeaderRef=function(e){return t.channelHeader=e},t}return d.d(t,e),t.prototype.componentWillMount=function(){this.updateLiveState(this.props)},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onUpdateDebounce),!this.props.data||this.props.data.loading||this.props.data.error||this.getChannelHeaderSize(),this.reportInteractive()},t.prototype.componentWillReceiveProps=function(e){this.updateLiveState(e)},t.prototype.componentDidUpdate=function(){this.channelHeader&&this.updateWidth(this.getWidth(this.channelHeader.querySelector('[data-target="channel-header-left"]')).width),this.onUpdateDebounce(),this.reportInteractive()},t.prototype.componentWillUnmount=function(){this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame),window.removeEventListener("resize",this.onUpdateDebounce)},t.prototype.updateWidth=function(e){var t=e!==this.width||this.width!==this.prevWidth;void 0!==this.width&&(this.prevWidth=this.width),this.width!==e&&(this.width=e),t&&(this.resizeAnimationFrame&&(cancelAnimationFrame(this.resizeAnimationFrame),this.resizeAnimationFrame=null),this.onUpdateDebounce())},t.prototype.render=function(){var e,t,n=0,i=0,r=0,a=h.a.defaultAvatarURL;this.props.data&&this.props.data.user&&!this.props.data.loading&&!this.props.data.error&&(n=this.props.data.user.videos.totalCount,i=this.props.data.user.followers.totalCount,r=this.props.data.user.follows.totalCount,a=this.props.data.user.profileImageURL,e=this.props.data.user.displayName,t=this.props.data.user.roles.isPartner);var o=this.state.live&&ie[this.props.currentPage]!==ie[ie.Channel],s=this.createChannelLinks(n,i,r),l={"channel-header__user":!0,"channel-header__user--selected":ie[this.props.currentPage]===ie[ie.Channel]},c=null;this.canRenderBitsButton()&&(c=p.createElement(T.S,{margin:{left:1}},p.createElement(M,{channelLogin:this.props.channelLogin})));var d,v=p.createElement(T.S,{display:T.G.Flex,flexWrap:T.I.NoWrap,alignItems:T.c.Center,flexShrink:0},p.createElement(T.S,{className:"channel-header__user-avatar channel-header__user-avatar--active",margin:{right:1},display:T.G.Flex,flexShrink:0,alignItems:T.c.Stretch},p.createElement(T.l,{size:36,imageSrc:a,imageAlt:e||""})),e?p.createElement(T._16,{type:T._21.H5},e):p.createElement(T.S,{alignItems:T.c.Center},p.createElement(T.Y,{lineCount:1,width:120})),o&&this.liveIndicatorElement,t&&this.verifiedBadgeElement);return d=this.props.data&&this.props.data.user&&this.props.data.user.login?p.createElement(m.a,{to:"/"+this.props.data.user.login,"data-target":"channel-header__channel-link"},v):v,p.createElement(T.S,{className:"channel-header",flexShrink:0,padding:{x:3}},p.createElement(T.S,{display:T.G.Flex,justifyContent:T.R.Between,flexWrap:T.I.NoWrap,fullHeight:!0,refDelegate:this.saveChannelHeaderRef},p.createElement(T.S,{display:T.G.Flex,alignItems:T.c.Stretch,flexShrink:0,flexWrap:T.I.NoWrap,"data-target":"channel-header-left"},p.createElement(T.N,{className:u(l),padding:{y:.5,right:2},display:T.G.Flex,flexWrap:T.I.NoWrap,alignItems:T.c.Center,flexShrink:0},d),this.renderTabs(s),p.createElement(T.S,{className:"channel-header__item channel-header__item--no-underline",padding:{x:1},display:T.G.Flex,flexShrink:0,alignSelf:T.d.Center,"data-target":"channel-header-button"},p.createElement(b.a,{alwaysMountBalloonContent:!0},p.createElement(T.u,{icon:T._6.NavMore,ariaLabel:Object(h.d)("More","ChannelHeader")}),p.createElement(T.p,{direction:T.q.Bottom,noTail:!0},p.createElement(T.S,{padding:{y:1}},this.renderDropdown(s)))))),p.createElement(T.S,{display:T.G.Flex,flexWrap:T.I.NoWrap,flexShrink:0,alignItems:T.c.Center,className:"channel-header__right","data-target":"channel-header-right"},p.createElement(T.S,{className:"channel-header__follow-button",display:T.G.Flex,alignItems:T.c.Stretch,margin:{left:1}},p.createElement(f.a,{updateContainerWidth:this.onUpdateDebounce,isHostedFollow:!1,channelLogin:this.props.channelLogin})),p.createElement(T.S,{margin:{left:1}},p.createElement(te.a,{updateContainerWidth:this.onUpdateDebounce,channelLogin:this.props.channelLogin})),c,p.createElement(T.S,null,this.renderAvatarEditButton()))),p.createElement(g.a,{onResize:this.onUpdateDebounce}))},t.prototype.updateLiveState=function(e){!e.data||e.data.loading||e.data.error||this.setState({live:!!e.data.user.stream&&""!==e.data.user.stream.id})},t.prototype.generateUserLink=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n=this.props.data&&this.props.data.user&&this.props.data.user.login;return n?(t?"//www.twitch.tv":"")+"/"+n+"/"+e:"#"},t.prototype.renderTabs=function(e){var t=this;return e.map(function(e){var n=e.count?p.createElement(T.S,{className:"channel-header__item-count",display:T.G.Flex,margin:{left:.5}},p.createElement(T._16,{type:T._21.Span,fontSize:T.J.Size5},e.count)):null,i=t.generateUserLink(e.pathSuffix,e.isExternal),r={};return e.isExternal&&(r.target="_blank"),p.createElement(T.N,{key:"channel-header__item--"+e.label,display:T.G.Flex,alignItems:T.c.Center,flexShrink:0},p.createElement(m.a,d.a({className:"channel-header__item hide "+(e.isSelected?"channel-header__item--selected":"")},r,{to:i,disabled:"#"===i,"data-target":"channel-header-item"}),p.createElement(T.S,{padding:{x:2,y:.5},display:T.G.Flex},p.createElement(T._16,{type:T._21.Span,fontSize:T.J.Size5},e.label),n)))})},t.prototype.renderDropdown=function(e){var t=this;return e.map(function(e){var n=e.count?p.createElement(T.S,{className:"channel-header__item-count",display:T.G.Flex,margin:{left:.5}},p.createElement(T._16,{type:T._21.Span},e.count)):null,i=t.generateUserLink(e.pathSuffix,e.isExternal),r={};return e.isExternal&&(r.targetBlank=!0),p.createElement(T.S,{key:"channel-header__dropdown-item--"+e.label,"data-target":"channel-header-dropdown-item"},p.createElement(T.Q,d.a({linkTo:i,disabled:"#"===i},r),p.createElement(T.S,{className:"channel-header__dropdown-hover-target",padding:{y:.5,x:1},display:T.G.Flex},p.createElement(T._16,{type:T._21.Span},e.label),n)))})},t.prototype.createChannelLinks=function(e,t,n){return[{label:Object(h.d)("Videos","ChannelHeader"),count:Object(h.e)(e),pathSuffix:"videos/all",isExternal:!1,isSelected:ie[this.props.currentPage]===ie[ie.Videos]},{label:Object(h.d)("Clips","ChannelHeader"),pathSuffix:"clips",isExternal:!1,isSelected:ie[this.props.currentPage]===ie[ie.Clips]},{label:Object(h.d)("Collections","ChannelHeader"),pathSuffix:"collections",isExternal:!0,isSelected:ie[this.props.currentPage]===ie[ie.Collections]},{label:Object(h.d)("Events","ChannelHeader"),pathSuffix:"events",isExternal:!0,isSelected:ie[this.props.currentPage]===ie[ie.Events]},{label:Object(h.d)("Followers","ChannelHeader"),count:Object(h.e)(t),pathSuffix:"followers",isExternal:!0,isSelected:ie[this.props.currentPage]===ie[ie.Followers]},{label:Object(h.d)("Following","ChannelHeader"),count:Object(h.e)(n),pathSuffix:"following",isExternal:!0,isSelected:ie[this.props.currentPage]===ie[ie.Following]}]},t.prototype.getChannelHeaderSize=function(){if(this.channelHeader){var e=this.channelHeader.querySelector('[data-target="channel-header-left"]'),t=this.channelHeader.querySelector('[data-target="channel-header-right"]'),n=this.channelHeader.querySelectorAll('[data-target="channel-header-item"]'),i=this.channelHeader.querySelectorAll('[data-target="channel-header-dropdown-item"]');if(n.length){var r=this.getWidth(this.channelHeader).width,a=this.getWidth(e).width,o=this.getWidth(t).width,s=a+o+20-r;if(s>0)for(var l=n.length-1;l>=0;l--){var c=n[l];if(!c.classList.contains("hide")){var d=this.getWidth(c);if(c.classList.add("hide"),i[l].classList.remove("hide"),(s-=d.width)<=0)break}}else for(var l=0;l<n.length;l++){var c=n[l];if(c.classList.contains("hide")){c.classList.remove("hide");var d=this.getWidth(c);if(d.width>=Math.abs(s)){c.classList.add("hide");break}c.classList.remove("hide"),i[l].classList.add("hide"),s+=d.width}}var u=this.channelHeader.querySelector('[data-target="channel-header-button"]');if(u){var p=!this.channelHeader.querySelectorAll('[data-target="channel-header-item"].hide').length;u.classList.toggle("hide",p)}}}},t.prototype.canRenderBitsButton=function(){return this.props.data&&!this.props.data.loading&&this.props.currentPage!==ie.Clips&&this.props.data.currentUser&&this.props.data.user&&this.props.data.user.cheer},t.prototype.getWidth=function(e){return e?{width:e.clientWidth}:{width:0}},t.prototype.reportInteractive=function(){!this.props.data||this.props.data.loading||this.props.data.error||this.props.latencyTracking.reportInteractive()},t=d.c([Object(v.a)(ne,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(P.c)("ChannelHeader")],t)}(p.Component),se=oe},1261:function(e,t,n){"use strict";function i(e){return{sessionUser:e.session.user}}function r(e){return Object(l.bindActionCreators)({closeModal:m.c},e)}var a=n(1),o=n(0),s=n(10),l=n(11),c=n(2),d=n(128),u=n(8),p=n(25),m=n(39),h=n(6),f=n(3),g=n(1220),b=n(1445),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={submitStatus:g.a.Unsubmitted},t.handleSubmit=function(e,n){return a.b(t,void 0,void 0,function(){var t,i;return a.e(this,function(r){switch(r.label){case 0:t={description:n,reason:e,content:this.props.reportContext.contentType,contentID:this.props.reportContext.contentID,extra:this.props.reportContext.extra,targetID:this.props.reportContext.targetUserID,reporterID:this.props.sessionUser&&this.props.sessionUser.id||0},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.props.reportUser(Object(p.a)(t))];case 2:return r.sent(),this.setState({submitStatus:g.a.Success}),[3,4];case 3:return i=r.sent(),c.g.error(i,"ReportUser Mutation failed."),this.setState({submitStatus:g.a.MutationError}),[3,4];case 4:return[2]}})})},t.handleChildError=function(e){return t.setState({submitStatus:e})},t.handleClose=function(){t.props.closeModal()},t}return a.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.componentWillUnmount=function(){this.props.onClose&&this.props.onClose(this.state.submitStatus)},t.prototype.render=function(){return o.createElement(f._12,{className:"reporting-modal__container",background:f.m.Base,padding:{x:2,y:3}},o.createElement(g.b,{onClose:this.handleClose,onError:this.handleChildError,onSubmit:this.handleSubmit,reportContentType:this.props.reportContext.contentType,submitStatus:this.state.submitStatus,targetUserID:this.props.reportContext.targetUserID,title:this.props.title}),o.createElement(d.a,null))},t=a.c([Object(h.c)("ReportUserModal")],t)}(o.Component),y=Object(l.compose)(Object(u.a)(b,{name:"reportUser"}),Object(s.connect)(i,r))(v);n.d(t,!1,function(){return v}),n.d(t,"a",function(){return y})},1262:function(e,t,n){"use strict";function i(e){return e&&"v"===e.charAt(0)?e.substring(1):e}t.a=i},1264:function(e,t){},1265:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetBitsButton_Bits"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"idSHA1"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bitsBalance"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bitsOffers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"bits"},arguments:[],directives:[],selectionSet:null},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BitsBundleOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"price"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"discount"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"url"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"includesVAT"},arguments:[],directives:[],selectionSet:null}]}}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]}]}}]}}],loc:{start:0,end:675}};i.loc.source={body:'# Documentation about how to use GraphQL is located in the Data Access Guide:\n# https://git-aws.internal.justin.tv/pages/twilight/twilight-docs/docs/guides/data-access.html\n# Additionally, use the GraphQL explorer (https://api.twitch.tv/gql/explore) to browse\n# available GraphQL data and construct your query.\n#import "twilight/features/chat/models/cheer-fragment.gql"\n\nquery GetBitsButton_Bits($login: String!) {\n  currentUser {\n    id\n    idSHA1\n    bitsBalance\n    bitsOffers {\n      id\n      type\n      bits\n      ... on BitsBundleOffer {\n        price\n        discount\n        url\n        includesVAT\n      }\n    }\n  }\n  user(login: $login) {\n    id\n    ...cheer\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(function(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}(n(1201).definitions)),e.exports=i},1266:function(e,t){},1267:function(e,t){},1268:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserProfileEditor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[],selectionSet:null}]}}]}}],loc:{start:0,end:121}};n.loc.source={body:"query UserProfileEditor($login: String!) {\n  user(login: $login) {\n    id\n    login\n    profileImageURL(width: 70)\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1269:function(e,t){},1270:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_ChannelHeader"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"displayName"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"isPartner"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"videos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"totalCount"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"followers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"totalCount"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"follows"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"totalCount"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"cheer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"isStaff"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}],loc:{start:0,end:423}};n.loc.source={body:"query ChannelPage_ChannelHeader($login: String!) {\n  user(login: $login) {\n    id\n    login\n    displayName\n    profileImageURL(width: 70)\n    roles {\n      isPartner\n    }\n    stream {\n      id\n    }\n    videos {\n      totalCount\n    }\n    followers {\n      totalCount\n    }\n    follows {\n      totalCount\n    }\n    cheer {\n      id\n    }\n  }\n  currentUser {\n    id\n    roles {\n      isStaff\n      isSiteAdmin\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1327:function(e,t,n){"use strict";var i=n(1),r=n(4),a=n(0),o=n(14),s=n(2),l=n(6),c=n(3),d=(n(1456),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hovered:!1,canShowAnimatedPreview:!0},t.onMouseEnter=function(){t.setState({hovered:!0})},t.onMouseLeave=function(){t.setState({hovered:!1})},t.onPrimaryImageLoad=function(){t.props.latencyTracking.reportInteractive()},t.onImageLoadError=function(){t.setState({canShowAnimatedPreview:!1})},t}return i.d(t,e),t.prototype.render=function(){var e=!this.props.gameImageSrc,t=null;if(!e){var n=r("video-preview-card__boxart",{"video-preview-card__boxart--overlay":this.props.boxArtOverlay});t=a.createElement(c.N,{flexShrink:0},a.createElement(o.a,{to:this.props.gameLinkTo,title:this.props.gameTitle,"data-a-target":"video-preview-card-boxart-link"},a.createElement(c.N,{margin:this.props.boxArtOverlay?0:{top:1,right:0,bottom:0},attachRight:this.props.boxArtOverlay,attachBottom:this.props.boxArtOverlay,position:this.props.boxArtOverlay?c.Z.Absolute:c.Z.Relative},a.createElement("figure",{className:n},a.createElement(c._25,{display:c.G.Block,direction:c._27.Bottom,label:this.props.gameTitle},a.createElement("div",{className:"video-preview-card__image-wrapper"},a.createElement(c.B,{aspect:c.k.BoxArt,imageAlt:this.props.gameTitle,imageSrc:this.props.gameImageSrc})))))))}var l=null;this.props.progress&&(l=a.createElement(c.S,{position:c.Z.Absolute,attachBottom:!0,fullWidth:!0},a.createElement(c._2,{size:c._3.Small,value:this.props.progress,mask:!0})));var d=r("video-preview-card__image-wrapper",{"video-preview-card__image-wrapper--watched":!(!this.props.progress||this.state.hovered)}),u=r("video-preview-card__preview-image",{"video-preview-card__preview-image--active":this.state.hovered&&this.state.canShowAnimatedPreview});return a.createElement(c.N,{className:"video-preview-card"},a.createElement("div",i.a({onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,key:this.props.title},Object(c._34)(this.props)),a.createElement(c.z,null,a.createElement(c.S,{fullWidth:!0},a.createElement(c.j,{overflow:!0},a.createElement("div",null,a.createElement(c._12,{display:c.G.InlineFlex,position:c.Z.Absolute,attachTop:!0,attachLeft:!0,margin:.5,zIndex:c._33.Default,fontSize:c.J.Size6,background:c.m.Overlay,color:c.E.Overlay,className:"video-preview-card__meta"},a.createElement(c._11,{label:Object(s.d)("views","VideoPreviewCard"),value:this.props.viewerCount,icon:c._6.GlyphViews})),a.createElement(c._12,{display:c.G.InlineFlex,position:c.Z.Absolute,attachTop:!0,attachRight:!0,margin:.5,zIndex:c._33.Default,fontSize:c.J.Size6,background:c.m.Overlay,color:c.E.Overlay,className:"video-preview-card__meta"},a.createElement(c._11,{label:Object(s.d)("length","VideoPreviewCard"),value:this.props.length,icon:c._6.GlyphLength})),a.createElement(c.j,{overflow:!0},a.createElement(o.a,{to:this.props.linkTo,title:this.props.title,"data-a-target":"video-preview-card-image-link"},a.createElement("div",{className:d},a.createElement(c.N,{flexShrink:0},a.createElement("figure",null,a.createElement(c.j,{ratio:c.k.Aspect16x9},a.createElement("img",{alt:this.props.imageAlt,className:u,"data-test-selector":"preview-image",onLoad:this.onPrimaryImageLoad,onError:this.onImageLoadError,src:this.state.hovered&&this.state.canShowAnimatedPreview?this.props.previewImageSrc:this.props.imageSrc}))))))),this.props.boxArtOverlay?t:"",l))),a.createElement(c.A,null,a.createElement(c.S,{display:c.G.Flex,flexDirection:this.props.boxArtOverlay?c.H.Column:c.H.Row,flexWrap:c.I.NoWrap},this.props.boxArtOverlay?null:t,a.createElement(c.S,{margin:e||this.props.boxArtOverlay?0:{left:1}},a.createElement(c.N,{margin:{top:.5},position:c.Z.Relative,overflow:c.V.Hidden},a.createElement(c._16,{fontSize:c.J.Size5,className:"video-preview-card__title "+(this.props.boxArtOverlay?"ellipsis":"video-preview-card__title--twoline")},a.createElement(o.a,{to:this.props.linkTo,title:this.props.title,className:"video-preview-card__channel","data-a-target":"video-preview-card-title-link"},this.props.title))),a.createElement(c._16,{type:c._21.P,color:c.E.Alt2,ellipsis:!0},this.props.info),a.createElement(c._16,{type:c._21.P,color:c.E.Alt2},this.props.date,"  ",a.createElement(o.a,{to:this.props.channelLinkTo,className:"video-preview-card__videos","data-a-target":"video-preview-card-channel-link"},this.props.channelName))))))))},t}(a.Component)),u=Object(l.c)("VideoPreviewCard")(d);n.d(t,!1,function(){return"preview-image"}),n.d(t,!1,function(){return d}),n.d(t,"a",function(){return u})},1443:function(e,t){},1444:function(e,t){},1445:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReportUserModal_ReportUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentInput"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"reportContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"contentID"},arguments:[],directives:[],selectionSet:null}]}}]}}],loc:{start:0,end:120}};n.loc.source={body:"mutation ReportUserModal_ReportUser($input: ReportContentInput!) {\n  reportContent(input: $input) {\n    contentID\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1446:function(e,t){},1451:function(e,t,n){"use strict";var i=n(1210);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return i.b})},1452:function(e,t,n){"use strict";function i(e,t){void 0===t&&(t=o);var n=a.a({},o,t),i='<iframe src="'+e+'" frameborder="0" '+(n.allowFullscreen?'allowfullscreen="true" ':"")+(n.allowScrolling?"":'scrolling="no" ')+'height="'+n.height+'" width="'+n.width+'"></iframe>';return n.textLink&&(i+=r(n.textLink.url,n.textLink.text)),i}function r(e,t){return'<a href="'+e+'" style="padding:2px 0px 4px; display:block; width:345px; font-weight:normal; font-size:10px; text-decoration:underline;">'+t+"</a>"}t.a=i;var a=n(1),o={height:378,width:620,allowScrolling:!0,allowFullscreen:!0}},1456:function(e,t){},1457:function(e,t,n){"use strict";function i(e,t,n,i){var a="";(i||r(t))&&(a="?sort="+(i?i.toLowerCase():r(t))),c.k.history.push(e+"/"+(n?n.toLowerCase():o(t))+a)}function r(e){return l.parse(e.location.search).sort}function a(e){switch(e.match.params.filter){case d.a.Archive.toLowerCase():return d.a.Archive;case d.a.Highlight.toLowerCase():return d.a.Highlight;case d.a.Upload.toLowerCase():return d.a.Upload;default:return}}function o(e){var t=a(e);return t?t.toLowerCase():"all"}function s(e){var t=l.parse(e.location.search);return e.match.params.collectionID||t.collection||""}t.d=i,t.c=r,t.b=a,t.a=s;var l=n(26),c=(n.n(l),n(2)),d=n(495)},1464:function(e,t,n){"use strict";var i=n(0),r=n(2),a=n(76),o=n(3),s=function(){return i.createElement(a.a,{message:Object(r.d)("Sorry. Unless youve got a time machine, that content is unavailable.","PageNotFound")},i.createElement(o.S,{margin:{top:2}},i.createElement(o.t,{linkTo:"/directory","data-a-target":"browse-channels-button"},Object(r.d)("Browse channels","PageNotFound"))))};n.d(t,"a",function(){return s})},1465:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(1),r=n(0),a=(n.n(r),n(129)),o=n(1240),s=n(3),l=function(e){return r.createElement(s.S,i.a({display:s.G.Flex,flexDirection:s.H.Column,flexWrap:s.I.NoWrap,fullHeight:!0},Object(a.a)(e)),r.createElement(o.a,{currentPage:e.currentPage,channelLogin:e.ownerLogin||""}),r.createElement(s.S,{fullHeight:!0,fullWidth:!0},e.children))}},1466:function(e,t,n){"use strict";var i=n(1),r=n(0),a=n(3),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickHandler=function(e){t.props.onClick&&t.props.onClick(),e.currentTarget.select()},t}return i.d(t,e),t.prototype.render=function(){return r.createElement(a.O,{readOnly:!0,type:a.P.Text,value:this.props.value,onClick:this.handleClickHandler})},t}(r.Component);n.d(t,"a",function(){return o})},1469:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var i="//www.twitch.tv",r="//static-cdn.jtvnw.net/ttv-boxart",a="52x72"},1473:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o});var i="BROADCAST_TYPE_ALL",r="broadcaster_id",a="BROADCAST_LENGTH_ANY",o="BROADCAST_SORT_POPULAR"},1480:function(e,t,n){"use strict";function i(e){return e.map(function(e){return{title:e.title||"",thumbnail:e.thumbnail||"",thumbnailAltText:e.thumbnailAltText||"",linkTo:e.linkTo||"",login:e.login||"",name:e.name||"",createdAt:e.createdAt||0,length:e.length||0,id:e.id||""}})}function r(e){var t={},n=e.broadcastSort===s.c,i=[];return"broadcastType"in e&&e.broadcastType!==s.d&&void 0!==e.broadcastType&&i.push(e.broadcastType),"broadcasterId"in e&&i.push(s.a+":"+e.broadcasterId),t.facetFilters=a(i),"broadcastLength"in e&&e.broadcastLength!==s.b&&void 0!==e.broadcastLength&&(t.numericFilters=[e.broadcastLength]),{typeID:n?o.g:o.f,params:t}}function a(e){return e.join(",")}t.a=i,t.b=r;var o=n(81),s=n(1473)},1503:function(e,t,n){"use strict";function i(e){return Object(o.bindActionCreators)({onTheatreModeDisabled:s.j},e)}function r(e){return{theatreModeEnabled:e.ui.theatreModeEnabled,rightColumnExpanded:e.ui.rightColumnExpanded}}var a=n(10),o=n(11),s=n(80),l=n(1),c=n(4),d=n(0),u=n(77),p=n(3),m=(n(1504),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleGlobalEscapeKeypress=function(e){t.props.theatreModeEnabled&&e.which===u.a.Esc&&t.props.onTheatreModeDisabled()},t.registerGlobalEventHandlers=function(){document.addEventListener("keydown",t.handleGlobalEscapeKeypress)},t.unregisterGlobalEventHandlers=function(){document.removeEventListener("keydown",t.handleGlobalEscapeKeypress)},t}return l.d(t,e),t.prototype.render=function(){var e=c("channel-page__video-player",{"channel-page__video-player--theatre-mode":this.props.theatreModeEnabled||!1});return d.createElement(p.S,{className:e,flexWrap:p.I.NoWrap,fullHeight:this.props.theatreModeEnabled,fullWidth:!this.props.rightColumnExpanded,position:this.props.theatreModeEnabled?p.Z.Fixed:p.Z.Relative},d.createElement(p.j,null,this.props.children))},t.prototype.componentDidMount=function(){this.registerGlobalEventHandlers()},t.prototype.componentWillUnmount=function(){this.unregisterGlobalEventHandlers()},t}(d.Component));n.d(t,"a",function(){return h});var h=Object(a.connect)(r,i)(m)},1504:function(e,t){},1515:function(e,t,n){"use strict";var i=n(1),r=n(0),a=n(14),o=n(3),s=function(e){return r.createElement(o.S,{margin:{right:1},display:o.G.Flex,alignItems:o.c.Center},r.createElement(o._25,{align:o._26.Left,label:e.tooltip,direction:o._27.Bottom},r.createElement(o.S,{margin:{right:.5}},r.createElement(o._12,{display:o.G.Flex,alignItems:o.c.Center,color:o.E.Alt2},r.createElement(o._5,{asset:e.svgAsset,width:18,height:18}))),r.createElement(o._16,{fontSize:o.J.Size5,ellipsis:!0},r.createElement(a.a,i.a({to:e.linkTo},Object(o._34)(e),{target:e.target}),e.title))))};n.d(t,"a",function(){return s})},1536:function(e,t,n){"use strict";var i,r,a=n(1),o=n(4),s=n(0),l=n(2),c=n(1327),d=n(6),u=n(3),p=(n(1537),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={currentElementIndex:0,childrenRendered:!1},t.videoCards=function(e){return e.map(function(e){return e.game?s.createElement(c.a,{key:e.id,previewImageSrc:e.previewThumbnailURL,date:e.recordedAt,linkTo:"/videos/"+e.id,length:e.lengthSeconds.toString(),title:e.title,channelLinkTo:"/"+e.creator.login,channelName:e.creator.displayName,viewerCount:e.viewCount.toString(),gameImageSrc:e.game.boxArtURL,gameTitle:e.game.name,gameLinkTo:"/directory/game/"+e.game.name,imageAlt:e.title,imageSrc:e.previewThumbnailURL}):s.createElement(c.a,{key:e.id,previewImageSrc:e.previewThumbnailURL,date:e.recordedAt,linkTo:"/videos/"+e.id,length:e.lengthSeconds.toString(),title:e.title,channelLinkTo:"/"+e.creator.login,channelName:e.creator.displayName,viewerCount:e.viewCount.toString(),imageAlt:e.title,imageSrc:e.previewThumbnailURL,gameImageSrc:l.a.defaultBoxArtURL,gameTitle:"",gameLinkTo:"/directory/game/"})})},t.moveCarouselForward=function(){t.setState(function(e){return t.isForwardButtonDisabled(e.currentElementIndex)?e:{currentElementIndex:e.currentElementIndex+1,childrenRendered:e.childrenRendered}})},t.moveCarouselBackward=function(){t.setState(function(e){return t.isBackButtonDisabled(e.currentElementIndex)?e:{currentElementIndex:e.currentElementIndex-1,childrenRendered:e.childrenRendered}})},t.isForwardButtonDisabled=function(e){if(!t.carouselContainerRef)return!1;var n=t.carouselContainerRef.getBoundingClientRect().left,i=t.carouselContainerRef.getBoundingClientRect().right,r=i-n,a=Math.round(r/t.getChildWidth()),o=e+a;return!t.props.videos||o>=t.props.videos.length},t.isBackButtonDisabled=function(e){return 0===e},t.refHandler=function(e){return t.carouselContainerRef=e},t.getChildWidth=function(){if(!t.carouselContainerRef)return 0;var e=t.carouselContainerRef.querySelector("[data-js-selector=carousel-content]");return e&&e.children.length?e.children[0].getBoundingClientRect().width:0},t.pixelOffset=function(){return t.getChildWidth()*t.state.currentElementIndex*-1},t.transformString=function(){return"translate3d("+t.pixelOffset()+"px, 0px, 0px)"},t}return a.d(t,e),t.prototype.componentDidMount=function(){this.setState({childrenRendered:!0})},t.prototype.componentDidUpdate=function(){this.state.childrenRendered&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return s.createElement(u.N,a.a({},this.props,{margin:{y:3},position:u.Z.Relative}),s.createElement("div",{className:"video-carousel",ref:this.refHandler},s.createElement(u.S,{className:"video-carousel__child-container",overflow:u.V.Hidden,position:u.Z.Relative,fullWidth:!0,"data-test-selector":"child-container"},s.createElement("div",{className:"video-carousel__body",style:{transform:this.transformString()},"data-test-selector":"carousel-body"},s.createElement(u._28,{noWrap:!0,childWidth:u._29.Large,"data-js-selector":"carousel-content"},this.videoCards(this.props.videos)))),s.createElement(u.S,{className:"video-carousel__nav",display:u.G.Flex,alignItems:u.c.Center,position:u.Z.Absolute,attachTop:!0,fullWidth:!0,fullHeight:!0},s.createElement(g,{direction:m.DirectionPrevious,onClickHandler:this.moveCarouselBackward,disabled:!this.state.childrenRendered||this.isBackButtonDisabled(this.state.currentElementIndex)}),s.createElement(g,{direction:m.DirectionNext,onClickHandler:this.moveCarouselForward,disabled:!this.state.childrenRendered||this.isForwardButtonDisabled(this.state.currentElementIndex)}))))},t=a.c([Object(d.c)("VideoCarousel")],t)}(s.Component)),m={DirectionPrevious:"previous",DirectionNext:"next"},h=(i={},i[m.DirectionPrevious]="previous",i[m.DirectionNext]="next",i),f=(r={},r[m.DirectionPrevious]=u._6.AngleLeft,r[m.DirectionNext]=u._6.AngleRight,r),g=function(e){var t=h[e.direction],n=(r={},r[m.DirectionPrevious]=Object(l.d)("previous","CarouselNavButton"),r[m.DirectionNext]=Object(l.d)("next","CarouselNavButton"),r),i=o("video-carousel__button","video-carousel__button--"+t,{"video-carousel__button--disabled":e.disabled});return s.createElement(u.S,{className:i,position:u.Z.Absolute,display:u.G.Flex,alignItems:u.c.Stretch},s.createElement(u.u,{"data-test-selector":t+"-button",onClick:e.onClickHandler,disabled:e.disabled,ariaLabel:n[e.direction],icon:f[e.direction],size:u.w.Large}));var r},b=p;n.d(t,!1,function(){return"child-container"}),n.d(t,!1,function(){return"carousel-body"}),n.d(t,!1,function(){return g}),n.d(t,"a",function(){return b})},1537:function(e,t){},1541:function(e,t,n){"use strict";function i(e,t){return{id:e.id,owner:{id:e.owner.id,login:t.owner.login,roles:{isPartner:t.owner.roles.isPartner}},broadcastType:t.broadcastType,game:t.game}}var r,a=n(1),o=n(0),s=n(2),l=n(18),c=n(179),d=n(1542),u=this,p=function(e,t,n){return a.b(u,void 0,void 0,function(){var r,o,u,m;return a.e(this,function(a){switch(a.label){case 0:if(!e)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.query({query:d,variables:{videoID:e.id}})];case 2:return r=a.sent().data,o=i(e,r.video),u={vod_id:o.id,vod_type:Object(c.a)(o.broadcastType),channel:o.owner.login,channel_id:Number(o.owner.id),live:!1,partner:o.owner.roles.isPartner,game:o.game?o.game.name:null,share_platform:t,location:l.d.VideoWatchPage},s.k.tracking.track(l.g.VideoShare,u),[3,4];case 3:return m=a.sent(),s.g.error(m.toString(),p.name),[3,4];case 4:return[2]}})})},m=n(26),h=n(1466),f=n(1451),g=n(74),b=n(1452),v=n(3);!function(e){e.Embed="option_embed",e.Link="option_link",e.Twitter="twitter",e.Reddit="reddit",e.VKontakte="vk",e.Facebook="fb",e.Copy="link",e.Unknown=""}(r||(r={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onShareClickEmbedHandler=function(){t.props.onShareClick(r.Embed)},t.onShareClickLinkHandler=function(){t.props.onShareClick(r.Link)},t.onShareClickSocialHandler=function(e){t.props.onShareClick(S(e))},t}return a.d(t,e),t.prototype.render=function(){return o.createElement(v.S,{display:v.G.Flex},o.createElement(v.S,{margin:{x:1}},o.createElement(g.a,null,o.createElement(v.t,{type:this.props.buttonType,"data-test-selector":"dropdown-button"},Object(s.d)("Share","VideoShareBox")),this.props.video?o.createElement(v.p,{direction:this.props.balloonDirection,size:v.r.Small},o.createElement(v.S,{padding:1},o.createElement(v.S,{padding:{top:1,bottom:1},display:v.G.Flex,justifyContent:v.R.Between},o.createElement(f.a,{onShareClick:this.onShareClickSocialHandler,type:f.b.Twitter,text:this.props.video.title,"data-test-selector":"twitter-button"}),o.createElement(f.a,{onShareClick:this.onShareClickSocialHandler,type:f.b.Facebook,"data-test-selector":"fb-button"}),o.createElement(f.a,{onShareClick:this.onShareClickSocialHandler,type:f.b.VKontakte,"data-test-selector":"vk-button"}),o.createElement(f.a,{onShareClick:this.onShareClickSocialHandler,type:f.b.Reddit,text:this.props.video.title,"data-test-selector":"reddit-button"}),o.createElement(f.a,{onShareClick:this.onShareClickSocialHandler,type:f.b.Copy,"data-test-selector":"copy-link-button"})),o.createElement(v.S,null,o.createElement(v.S,{padding:{top:1},"data-test-selector":"video-link"},o.createElement(v._16,null,Object(s.d)("Video Link","VideoShareBox")),o.createElement(h.a,{value:C(this.props.video.id),onClick:this.onShareClickLinkHandler})),o.createElement(v.S,{padding:{top:1},"data-test-selector":"embed-link"},o.createElement(v._16,null,Object(s.d)("Embed Video","VideoShareBox")),o.createElement(h.a,{value:k(this.props),onClick:this.onShareClickEmbedHandler}))))):o.createElement(v.p,null))))},t}(o.Component),S=function(e){switch(e){case f.b.Twitter:return r.Twitter;case f.b.Reddit:return r.Reddit;case f.b.VKontakte:return r.VKontakte;case f.b.Facebook:return r.Facebook;case f.b.Copy:return r.Copy;default:return s.g.withCategory("video-share-box").error(new Error("Unknown social button type: "+e),"Unknown social button type: "+e),r.Unknown}},k=function(e){if(!e.video)return"";var t,n=e.video.owner.displayName,i=e.video.title,r=E(e.video.id),a=C(e.video.id,!0);return t=i?Object(s.d)("Watch {title} from {displayName} on www.twitch.tv",{displayName:n,title:i},"VideoShareBox"):Object(s.d)("Watch video from {displayName} on www.twitch.tv",{displayName:n},"VideoShareBox"),Object(b.a)(r,{textLink:{url:a,text:t},allowScrolling:!1,allowFullscreen:!0})},C=function(e,t){var n=m.stringify({tt_medium:"vod_embed",tt_content:"text_link"}),i=new URL("https://www.twitch.tv/videos/"+e);return t&&(i.search=n),i.toString()},E=function(e){return"https://player.twitch.tv/?"+m.stringify({video:"v"+e,autoplay:!1})},_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTrackHandler=function(e){return p(t.props.video,e,s.k.apollo.client)},t}return a.d(t,e),t.prototype.render=function(){return o.createElement(y,{video:this.props.video,buttonType:this.props.buttonType,balloonDirection:this.props.balloonDirection,onShareClick:this.onTrackHandler})},t}(o.Component);n.d(t,"a",function(){return _})},1542:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoShareBox_Tracking_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"isPartner"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}],loc:{start:0,end:223}};n.loc.source={body:"query VideoShareBox_Tracking_Video($videoID: ID!) {\n  video(id: $videoID) {\n    id\n    broadcastType\n    game {\n      id\n      name\n    }\n    owner {\n      id\n      login\n      roles {\n        isPartner\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1544:function(e,t){},1545:function(e,t){},1546:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},defaultValue:null},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:null}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null}]}}]}}],loc:{start:0,end:237}};n.loc.source={body:"query VideoChatChannelAndVideoTrackingContext($videoCreatorID: ID, $videoID: ID) {\n  video(id: $videoID) {\n    id\n    broadcastType\n    title\n    game {\n      id\n      name\n    }\n  },\n  user(id: $videoCreatorID) {\n    id\n    login\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1547:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatChannelAndCommentCreatorAndVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},defaultValue:null},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentCreator"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},defaultValue:null},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"videoCreatorID"}},{kind:"Variable",name:{kind:"Name",value:"commentCreator"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}],loc:{start:0,end:298}};n.loc.source={body:"query VideoChatChannelAndCommentCreatorAndVideoTrackingContext($videoCreatorID: ID!, $commentCreator: ID!, $videoID: ID) {\n  users(ids: [$videoCreatorID, $commentCreator]) {\n    id\n    login\n  },\n  video(id: $videoID) {\n    id\n    broadcastType\n    title\n    game {\n      id\n      name\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1548:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatVideoTrackingContext"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}],loc:{start:0,end:154}};n.loc.source={body:"query VideoChatVideoTrackingContext($videoID: ID) {\n  video(id: $videoID) {\n    id\n    broadcastType\n    title\n    game {\n      id\n      name\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1549:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(0),c=i(l),d=n(82),u=i(d),p=n(12),m=i(p),h={ESCAPE:27},f=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={active:!1},e.handleWrapperClick=e.handleWrapperClick.bind(e),e.closePortal=e.closePortal.bind(e),e.handleOutsideMouseClick=e.handleOutsideMouseClick.bind(e),e.handleKeydown=e.handleKeydown.bind(e),e.portal=null,e.node=null,e}return o(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.closeOnEsc&&document.addEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&(document.addEventListener("mouseup",this.handleOutsideMouseClick),document.addEventListener("touchstart",this.handleOutsideMouseClick)),this.props.isOpened&&this.openPortal()}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.isOpened&&(e.isOpened&&(this.state.active?this.renderPortal(e):this.openPortal(e)),!e.isOpened&&this.state.active&&this.closePortal()),void 0===e.isOpened&&this.state.active&&this.renderPortal(e)}},{key:"componentWillUnmount",value:function(){this.props.closeOnEsc&&document.removeEventListener("keydown",this.handleKeydown),this.props.closeOnOutsideClick&&(document.removeEventListener("mouseup",this.handleOutsideMouseClick),document.removeEventListener("touchstart",this.handleOutsideMouseClick)),this.closePortal(!0)}},{key:"handleWrapperClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.state.active||this.openPortal()}},{key:"openPortal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({active:!0}),this.renderPortal(e),this.props.onOpen(this.node)}},{key:"closePortal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=function(){e.node&&(u.default.unmountComponentAtNode(e.node),document.body.removeChild(e.node)),e.portal=null,e.node=null,!0!==t&&e.setState({active:!1})};this.state.active&&(this.props.beforeClose?this.props.beforeClose(this.node,n):n(),this.props.onClose())}},{key:"handleOutsideMouseClick",value:function(e){if(this.state.active){(0,d.findDOMNode)(this.portal).contains(e.target)||e.button&&0!==e.button||(e.stopPropagation(),this.closePortal())}}},{key:"handleKeydown",value:function(e){e.keyCode===h.ESCAPE&&this.state.active&&this.closePortal()}},{key:"renderPortal",value:function(e){this.node||(this.node=document.createElement("div"),document.body.appendChild(this.node));var t=e.children;"function"==typeof e.children.type&&(t=c.default.cloneElement(e.children,{closePortal:this.closePortal})),this.portal=u.default.unstable_renderSubtreeIntoContainer(this,t,this.node,this.props.onUpdate)}},{key:"render",value:function(){return this.props.openByClickOn?c.default.cloneElement(this.props.openByClickOn,{onClick:this.handleWrapperClick}):null}}]),t}(c.default.Component);t.default=f,f.propTypes={children:m.default.element.isRequired,openByClickOn:m.default.element,closeOnEsc:m.default.bool,closeOnOutsideClick:m.default.bool,isOpened:m.default.bool,onOpen:m.default.func,onClose:m.default.func,beforeClose:m.default.func,onUpdate:m.default.func},f.defaultProps={onOpen:function(){},onClose:function(){},onUpdate:function(){}},e.exports=t.default},1550:function(e,t){},1551:function(e,t){},1552:function(e,t){},1553:function(e,t){},1554:function(e,t){},1555:function(e,t){},1556:function(e,t){},1557:function(e,t){},1558:function(e,t){},1559:function(e,t){},1560:function(e,t){},1561:function(e,t){},1562:function(e,t){},1563:function(e,t){},1564:function(e,t){},1565:function(e,t){},1566:function(e,t,n){function i(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)})}var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"isStaff"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"isSiteAdmin"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"isGlobalMod"},arguments:[],directives:[],selectionSet:null}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"cheer"},directives:[]},{kind:"Field",alias:null,name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"isModerator"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}],loc:{start:0,end:482}};r.loc.source={body:'#import "twilight/features/badges/models/badge-fragment.gql"\n#import "twilight/features/chat/models/cheer-fragment.gql"\n\nquery VideoComments($videoID: ID!) {\n  badges {\n    ...badge\n  },\n  currentUser {\n    id\n    roles {\n      isStaff\n      isSiteAdmin\n      isGlobalMod\n    }\n  },\n  video(id: $videoID) {\n    id\n    broadcastType\n    owner {\n      id\n      login\n      broadcastBadges {\n        ...badge\n      }\n      ...cheer\n      self {\n        isModerator\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};r.definitions=r.definitions.concat(i(n(1195).definitions)),r.definitions=r.definitions.concat(i(n(1201).definitions)),e.exports=r},1789:function(e,t){},1790:function(e,t){},1791:function(e,t){},1792:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoWatchPage_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},defaultValue:null},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},defaultValue:null},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"useCollectionID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},defaultValue:null}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"displayName"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"recommendations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"videos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"180"}},{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"320"}}],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"recordedAt"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"creator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"displayName"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"viewCount"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}},{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}}],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}]}}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"useCollectionID"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"videoFields"},directives:[]}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionID"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"useCollectionID"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"items"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"videoFields"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"videoFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"broadcastType"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"description"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"lengthSeconds"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"recordedAt"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"viewCount"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"126"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"71"}}],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"138"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"190"}}],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"name"},arguments:[],directives:[],selectionSet:null}]}},{kind:"Field",alias:null,name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"displayName"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"login"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"chatSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"rules"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}],loc:{start:0,end:1404}};n.loc.source={body:"query VideoWatchPage_Video($videoID: ID, $collectionID: ID!, $useCollectionID: Boolean!) {\n  currentUser {\n    id\n    displayName\n    recommendations {\n      videos {\n        edges {\n          node {\n            id\n            previewThumbnailURL(height: 180, width: 320)\n            recordedAt\n            lengthSeconds\n            title\n            creator {\n              id\n              login\n              displayName\n            }\n            viewCount\n            game {\n              boxArtURL(height: 190, width: 138)\n              name\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n  # If the page specifies a video ID, query it directly.\n  video(id: $videoID) @skip(if: $useCollectionID) {\n    ...videoFields\n  }\n  # If the page is a collection page, grab the first video from the collection.\n  collection(id: $collectionID) @include(if: $useCollectionID) {\n    items(first: 1) {\n      edges {\n        node {\n          ... on Video {\n            ...videoFields\n          }\n        }\n      }\n    }\n  }\n}\n\n# These are the fields used by the watch page.\nfragment videoFields on Video {\n  id\n  broadcastType\n  title\n  description\n  lengthSeconds\n  recordedAt\n  viewCount\n  previewThumbnailURL(width: 126, height: 71)\n  game {\n    id\n    boxArtURL(width: 138, height: 190)\n    name\n  }\n  owner {\n    id\n    displayName\n    login\n    chatSettings {\n      rules\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},1875:function(e,t,n){"use strict";function i(e){var t=/^((\d+)[Hh])?((\d+)[Mm])?((\d+)[Ss])?$/.exec(e||"");return t?3600*(parseInt(t[2],10)||0)+60*(parseInt(t[4],10)||0)+(parseInt(t[6],10)||0):0}function r(e){switch(e){case F.a.Archive:return R.j.Archive;case F.a.Highlight:return R.j.Highlight;case F.a.Upload:return R.j.Upload;case F.a.WatchParty:return R.j.WatchParty;default:return void _.g.error(new Error("Unexpected VideoBroadcastType: "+e+" encountered"),"")}}function a(e){return e?e.split(/ {2}\n|\n(?!\d+\.)(?!\*|- )|^\n/gm):[]}function o(e){return C.createElement("li",{className:"ellipsis"},e.children)}function s(e){switch(e.level){case 4:return C.createElement("h4",{className:"ellipsis"},e.children);case 5:return C.createElement("h5",{className:"ellipsis"},e.children);case 6:return C.createElement("h6",{className:"ellipsis"},e.children);default:return C.createElement("h3",{className:"ellipsis"},e.children)}}function l(e){return C.createElement("p",{className:"ellipsis"},e.children)}function c(e,t){var n=this;return function(){return y.b(n,void 0,void 0,function(){var n,i;return y.e(this,function(r){switch(r.label){case 0:return n="kraken/videos/"+e,[4,se.a.delete(n)];case 1:if(i=r.sent(),200!==i.status){if(i&&i.error)throw new Error(JSON.stringify(i.error));if(i&&i.requestError)throw i.requestError;throw new Error("Could not delete video. Request returned "+i.status)}return z.l.history.push(ce(t)),[2]}})})}}function d(e){return Object(f.bindActionCreators)({onClose:ae.c,onDeleteRequest:c},e)}function u(e){return Object(f.bindActionCreators)({onShowLogin:function(){return Object(b.f)(g.a.VODOptions)},onShowDeleteVideoModal:function(e){var t=y.f(e,[]);return Object(ae.d)(me,t)},onShowReportUserModal:function(e){var t=y.f(e,[]);return Object(ae.d)(oe.a,t)}},e)}function p(e){return{theatreModeEnabled:e.ui.theatreModeEnabled}}function m(e){return Object(f.bindActionCreators)({onLogin:function(){return Object(b.f)(g.a.VODComment)},onVideoTimeChange:v.D},e)}Object.defineProperty(t,"__esModule",{value:!0});var h=n(10),f=n(11),g=n(61),b=n(43),v=n(1200),y=n(1),S=n(4),k=n(26),C=n(0),E=n(41),_=n(2),T=n(76),w=n(1464),N=n(38),O=n(1188),D=n(16),I=n(40),P=n(79),A=n(1457),x=n(1187),R=n(18),F=n(495),M=n(1240),U=n(6),L=n(521),j=n(1536),B=n(1247),V=n(1465),H=n(1503),W=n(3),q=n(1541),G=n(105),z=n(75),$={skipHtml:!0,softBreak:"br",allowedTypes:["Emph","Strong","Paragraph","Heading","Item","List","Text","Link","Softbreak","Hardbreak"]},Q=(n(1789),"qa-description-container"),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isExpanded:!1},t.renderDescription=function(){if(t.props.description){var e,n=a(t.props.description);if(t.state.isExpanded)e=n.map(function(e,t){return 0===e.length?C.createElement("br",{key:"desc-line"+t}):C.createElement(G,y.a({key:"desc-line"+t,source:e},$))});else{var i=n[0].split("\n")[0];e=C.createElement(G,y.a({source:i,renderers:{Paragraph:l,Heading:s,Item:o}},$))}return C.createElement(W.S,{className:"more-info-box__markdown","data-test-selector":Q},e,t.state.isExpanded?t.renderBroadcastType(t.props.broadcastType):null)}},t.toggleExpand=function(){t.setState(function(e){return{isExpanded:!e.isExpanded}})},t}return y.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return this.props.description?C.createElement(W._12,{className:"more-info-box","data-test-selector":"qa-more-info-box",background:W.m.Base,borderLeft:!0,borderRight:!0,borderBottom:!0},C.createElement(W.S,{padding:1},this.renderDescription()),C.createElement(W._12,{borderTop:!0,padding:.5},C.createElement(W.S,{display:W.G.Flex,justifyContent:W.R.Center},C.createElement(W.t,{"data-test-selector":"qa-toggle-expand-button",type:W.y.Text,onClick:this.toggleExpand},this.state.isExpanded?Object(z.d)("Show Less","MoreInfoBox"):Object(z.d)("Show More","MoreInfoBox"))))):null},t.prototype.renderBroadcastType=function(e){if(!e)return C.createElement(W.Y,{lineCount:1,width:80});var t;switch(e){case F.a.Archive:t=Object(z.d)("Past Broadcast","MoreInfoBox");break;case F.a.Upload:t=Object(z.d)("Upload","MoreInfoBox");break;case F.a.Highlight:t=Object(z.d)("Highlight","MoreInfoBox");break;default:t=Object(z.d)("Unknown","MoreInfoBox")}return C.createElement(W._16,{"data-test-selector":"qa-broadcast-type-text"},Object(z.d)("Video Category: {broadcastType}",{broadcastType:t},"MoreInfoBox"))},t=y.c([Object(U.c)("MoreInfoBox")],t)}(C.Component),Y=K,J=n(14),Z=n(1515),X=n(497),ee=/\S/,te=function(e){var t=e.video,n=Object(_.f)(new Date(t.recordedAt)),i=t.title&&""!==t.title&&ee.test(t.title),r=i?t.title+"  "+n:n;return C.createElement(W.S,{margin:{bottom:.5}},C.createElement(W._16,{fontSize:W.J.Size4,ellipsis:!0},r))},ne=function(e){var t=e.video;return t&&t.game?C.createElement(W.z,{key:t.game.name,row:!0},C.createElement(W.N,{flexShrink:0,margin:{right:1},overflow:W.V.Hidden},C.createElement(J.a,{to:Object(X.b)(t.game.name)},C.createElement(W.B,{imageSrc:t.game.boxArtURL,imageAlt:t.game.name,aspect:W.k.BoxArt,size:W.C.Size4}))),C.createElement(W.A,null,C.createElement(te,{video:t}),C.createElement(W.S,{display:W.G.Flex},C.createElement(Z.a,{linkTo:{pathname:Object(X.b)(t.game.name),state:{content:"current_game",medium:"twitch_vod"}},tooltip:Object(_.d)("Game","VideoInfo"),svgAsset:W._6.NavGames,title:t.game.name})))):t?C.createElement(te,{video:t}):C.createElement(W.Y,{lineCount:1,width:320})},ie=Object(U.c)("VideoInfo",{autoReportInteractive:!0})(ne),re=n(22),ae=n(39),oe=n(1261),se=n(1209),le=function(e,t){return"https://twitch.tv/"+e+"/manager/v"+t+"/highlight"},ce=function(e){return"/"+e+"/manager"},de=n(128),ue=n(504),pe=(n(1790),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={requestInProgress:!1,errorMessage:""},t.onClickCancel=function(){return t.props.onClose()},t.onClickDelete=function(){return y.b(t,void 0,void 0,function(){var e;return y.e(this,function(t){switch(t.label){case 0:this.setState({errorMessage:"",requestInProgress:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.props.onDeleteRequest(this.props.video.id,this.props.video.owner.login)];case 2:return t.sent(),this.props.onClose(),[3,4];case 3:return e=t.sent(),this.setState({errorMessage:Object(z.d)("Unexpected error, please try again.","VideoDeleteModal"),requestInProgress:!1}),z.h.withCategory("video delete modal").error(e,"Attempted to delete video."),[3,4];case 4:return[2]}})})},t}return y.d(t,e),t.prototype.render=function(){return C.createElement(W._12,{background:W.m.Base,"data-test-selector":"qa-video-delete-modal",className:"video-delete-modal",padding:3},C.createElement(W.S,null,C.createElement(W.S,{margin:{bottom:1}},C.createElement(W._16,{type:W._21.H4},Object(z.d)("Delete Video","VideoDeleteModal"))),this.renderErrorMessage(),C.createElement(W._16,{type:W._21.P,color:W.E.Alt2},Object(z.d)("Are you sure you want to delete this video?","VideoDeleteModal"),C.createElement("br",null),Object(z.d)("This action cannot be undone.","VideoDeleteModal"))),C.createElement(W._12,{padding:{y:2},margin:{y:2},borderTop:!0,borderBottom:!0},C.createElement(W.z,{row:!0},C.createElement("img",{alt:this.props.video.title||Object(z.d)("Video Thumbnail","VideoDeleteModal"),src:this.props.video.previewThumbnailURL,className:"video-delete-modal__thumb"}),C.createElement(W.A,null,C.createElement(W.S,{margin:{left:1}},C.createElement(W.S,{ellipsis:!0},this.props.video.title),C.createElement(W._12,{ellipsis:!0,color:W.E.Alt2},Object(z.d)("{created, date, medium}",{created:new Date(this.props.video.recordedAt)},"VideoDeleteModal"),"  ",Object(ue.a)(this.props.video.lengthSeconds)),C.createElement(W._12,{ellipsis:!0,color:W.E.Alt2},Object(z.d)("{viewCount, plural, one {# View} other {# Views}}",{viewCount:this.props.video.viewCount},"VideoDeleteModal")))))),C.createElement(W.S,{display:W.G.Flex,justifyContent:W.R.Center},C.createElement(W.S,{display:W.G.InlineBlock,margin:{x:1}},C.createElement(W.t,{type:W.y.Text,onClick:this.onClickCancel,"data-test-selector":"qa-video-delete-modal-cancel-button"},Object(z.d)("Cancel","VideoDeleteModal"))),C.createElement(W.S,{display:W.G.InlineBlock,margin:{x:1}},C.createElement(W.t,{type:W.y.Alert,onClick:this.onClickDelete,disabled:this.state.requestInProgress,"data-test-selector":"qa-video-delete-modal-delete-button"},Object(z.d)("Delete","VideoDeleteModal")))),C.createElement(de.a,{closeOnBackdropClick:!0}))},t.prototype.renderErrorMessage=function(){return this.state.errorMessage?C.createElement(W._12,{className:"video-delete-modal__error-container",fullWidth:!0,"data-test-selector":"qa-video-delete-modal-error-container",margin:{bottom:1},padding:1},C.createElement(W._16,{color:W.E.Error},this.state.errorMessage)):null},t}(C.Component)),me=Object(h.connect)(null,d)(pe),he=n(74),fe=n(1220),ge=n(1221),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.d(t,e),t.prototype.render=function(){return C.createElement("li",null,C.createElement(W.Q,y.a({"data-test-selector":this.props.testSelector},this.props.interactableProps),C.createElement(W.S,{padding:{x:1,y:.5}},this.props.children)))},t=y.c([Object(U.c)("InteractableOption",{autoReportInteractive:!0})],t)}(C.Component),ve=be,ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleReportModalClose=function(e){(e===fe.a.MutationError||e===fe.a.Success)&&t.props.history.push("/")},t}return y.d(t,e),t.prototype.render=function(){return C.createElement(he.a,null,C.createElement(W.u,{"data-test-selector":"qa-video-options-button",type:W.v.Hollow,icon:W._6.More,ariaLabel:Object(z.d)("Video Options","VideoOptions"),disabled:!this.props.video}),this.props.video?C.createElement(W.p,{direction:W.q.TopRight},C.createElement(W._12,{padding:{top:1,bottom:1},color:W.E.Link},C.createElement("ul",{"data-test-selector":"qa-video-options-container"},this.renderReportOption(this.props.video,this.props.currentUser),this.renderHighlightOption(this.props.video,this.props.currentUser),this.renderDeleteOption(this.props.video,this.props.currentUser)))):C.createElement(W.p,null))},t.prototype.renderDeleteOption=function(e,t){var n=this;if(this.isVODOwner(e,t)){var i={alert:!0,onClick:function(){n.props.onShowDeleteVideoModal({video:e})}};return C.createElement(ve,{key:"delete-option",interactableProps:i,testSelector:"qa-video-delete-button"},Object(z.d)("Delete","VideoOptions"))}},t.prototype.renderReportOption=function(e,t){var n=this;if(!this.isVODOwner(e,t)){var i={onClick:function(){t?n.props.onShowReportUserModal({onClose:n.handleReportModalClose,reportContext:{contentType:ge.a.Vod,contentID:e.id,targetUserID:e.owner.id,extra:n.getVideoReportExtraField()},title:Object(z.d)("Report {channelDisplayName}",{channelDisplayName:e.owner.displayName},"ReportVideoModal")}):n.props.onShowLogin()}};return C.createElement(ve,{key:"report-option",interactableProps:i,testSelector:"qa-video-report-button"},Object(z.d)("Report","VideoOptions"))}},t.prototype.renderHighlightOption=function(e,t){if(e.broadcastType===F.a.Archive&&this.isVODOwner(e,t))return C.createElement(ve,{key:"highlight-option",interactableProps:{linkTo:le(e.owner.login,e.id)},testSelector:"qa-video-highlight-button"},Object(z.d)("Highlight","VideoOptions"))},t.prototype.isVODOwner=function(e,t){return t&&t.id===e.owner.id},t.prototype.getVideoReportExtraField=function(){var e=Object(A.a)(this.props),t=Object(ue.a)(this.props.lastVideoOffset,{zeroPadAll:!0}),n={timestamp:t};return""!==e&&(n=y.a({},n,{collection:e})),JSON.stringify(n)},t=y.c([Object(U.c)("VideoOptions",{autoReportInteractive:!0})],t)}(C.Component),Se=ye,ke=Object(h.connect)(null,u)(Object(re.e)(Se)),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y.d(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return C.createElement(W._12,{className:"video-info-bar",background:W.m.Base},C.createElement(W._12,{borderLeft:!0,borderRight:!0,borderTop:!0},C.createElement(W.S,{display:W.G.Flex,flexWrap:W.I.NoWrap,flexDirection:W.H.Column,breakpointLarge:{flexDirection:W.H.Row}},C.createElement(W.S,{flexGrow:1,flexShrink:1,padding:{top:1},breakpointLarge:{padding:0}},C.createElement(W._12,{fullHeight:!0,borderBottom:!0,padding:{bottom:1,x:1},breakpointLarge:{padding:{y:1}}},C.createElement(ie,{video:this.props.video}))),C.createElement(W.S,{flexGrow:0,flexShrink:0},C.createElement(W._12,{className:"video-info-bar__action-container",display:W.G.Flex,fullHeight:!0,alignItems:W.c.Start,justifyContent:W.R.Between,borderBottom:!0,padding:1},C.createElement(W._12,{display:W.G.Flex,"data-test-selector":"total-views-selector",color:W.E.Alt2,fontSize:W.J.Size5,padding:{y:.5}},this.props.video&&C.createElement(W._11,{value:Object(_.e)(this.props.video.viewCount),label:Object(_.d)("Total Views","VideoInfoBar"),icon:W._6.GlyphViews})),C.createElement(W._12,{display:W.G.Flex},C.createElement(q.a,{video:this.props.video,buttonType:W.y.Hollow,balloonDirection:W.q.TopRight}),C.createElement(ke,{currentUser:this.props.currentUser,video:this.props.video,lastVideoOffset:this.props.lastVideoOffset})))))),C.createElement(Y,{description:this.props.video&&this.props.video.description||void 0,broadcastType:this.props.video&&this.props.video.broadcastType||null}))},t}(C.Component),Ee=Object(U.c)("VideoInfoBar")(Ce),_e=(n(1791),n(1792)),Te="qa-recommendations_carousel_selector",we=-1,Ne=function(e){function t(t){var n=e.call(this,t)||this;return n.loggedInCarousel=function(){if(n.props.data.currentUser&&_.a.buildType!==D.a.Production){var e=n.props.data.currentUser.recommendations.videos.edges.map(function(e){return e.node});if(e.length>0)return C.createElement(W.S,{padding:{y:3},"data-test-selector":Te},C.createElement(W._16,{type:W._21.H4},Object(_.d)("Based On Your Viewing History","VideoWatchPage")),C.createElement(j.a,{videos:e}))}return null},n.onPlayerSeekRequest=function(e){n.setState({requestedVideoOffset:e})},n.onShowLoginHandler=function(){n.props.onLogin()},n.getInitialVideoOffsetTime=function(){var e=k.parse(n.props.location.search);return e.t?i(e.t):we},n.onPlayerNavigationEvent=function(e){var t=n.getVideo(),i=t?t.id:"",r=Object(A.a)(n.props);Object(B.d)(e,n.props.history,{currentVideoID:i,currentCollectionID:r})},n.onVideoTimeChange=function(e){var t=Math.floor(e);if(t===n.state.lastVideoOffset)return void(n.state.requestedVideoOffset===t&&n.setState({requestedVideoOffset:we}));n.setState({lastVideoOffset:t},function(){n.props.onVideoTimeChange(t)})},n.state={requestedVideoOffset:n.getInitialVideoOffsetTime()||we,lastVideoOffset:we},n}return y.d(t,e),t.prototype.componentDidMount=function(){this.reportInteractive()},t.prototype.componentDidUpdate=function(){this.reportInteractive()},t.prototype.render=function(){var e=this.getVideo();if(this.props.data.error||e&&!e.owner)return C.createElement(T.a,{message:Object(_.d)("Error loading data.","VideoWatchPage")});if(!this.props.data.loading&&(!e||e&&""===e.id))return C.createElement(w.a,null);var t=S("video-watch-page__right-column",(a={},a[Object(P.b)(I.a.Dark)]=this.props.theatreModeEnabled,a)),n={};this.state.requestedVideoOffset!==we&&(n.nextVideoOffset=this.state.requestedVideoOffset);var i=Object(A.a)(this.props);""!==i&&(n.collectionID=i);var r=this.props.match.params.videoID;return r&&(n.vodID=r),C.createElement(W.S,{fullHeight:!0},C.createElement(V.a,{ownerLogin:e&&e.owner&&e.owner.login||void 0,currentPage:M.b.Videos,"data-test-selector":"qa-video-watch-page"},C.createElement(W.N,{padding:{y:2,x:3}},C.createElement(N.c,null,C.createElement(H.a,null,C.createElement(B.c,y.a({onNavigationRequest:this.onPlayerNavigationEvent,onSeek:this.onVideoTimeChange,onVideoTimeChange:this.onVideoTimeChange,attachToWindowInDebug:!0},n))),C.createElement(Ee,{currentUser:this.props.data.currentUser||null,video:e||null,lastVideoOffset:this.state.lastVideoOffset}),this.loggedInCarousel()))),C.createElement(L.b,null,C.createElement(W._12,{className:t,background:W.m.Alt2,"data-test-selector":"video-chat-wrapper",display:W.G.Flex,flexGrow:0,flexShrink:0,flexWrap:W.I.NoWrap,overflow:W.V.Hidden,fullHeight:!0},C.createElement(v.y,y.a({onPlayerSeekRequest:this.onPlayerSeekRequest,onShowLogin:this.onShowLoginHandler,videoID:this.props.match.params.videoID||e&&e.id||""},this.mapQueryParamsToVideoChatProps())))));var a},t.prototype.mapQueryParamsToVideoChatProps=function(){var e={},t=k.parse(this.props.location.search),n=this.getInitialVideoOffsetTime();return n!==we&&(e.highlightTimestamp=n),t.comment&&(e.highlightedMessageID=t.comment),e},t.prototype.reportInteractive=function(){this.props.data&&!this.props.data.loading&&this.props.latencyTracking.reportInteractive()},t.prototype.getVideo=function(){return this.props.data.video?this.props.data.video:this.props.data.collection&&this.props.data.collection.items.edges[0]?this.props.data.collection.items.edges[0].node:null},t}(C.Component),Oe=Object(E.graphql)(_e,{options:function(e){return{variables:{videoID:e.match.params.videoID,collectionID:e.match.params.collectionID,useCollectionID:!e.match.params.videoID&&!!e.match.params.collectionID}}}})(Object(O.a)({location:R.d.VideoWatchPage,properties:function(e){var t=null;return e.data.video?t=e.data.video.broadcastType:e.data.collection&&(t=e.data.collection.items.edges[0].node.broadcastType),{vod_type:t?r(t):void 0}},skip:function(e){return e.data.loading||!!e.data.error}})(Object(U.c)("VideoWatchPage",{destination:x.a.VideoWatchPage})(Ne))),De=Object(h.connect)(p,m)(Oe);n.d(t,"VideoWatchPage",function(){return De})},499:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i;!function(e){e[e.Ready=0]="Ready",e[e.Dimensions=1]="Dimensions",e[e.RequestAd=2]="RequestAd",e[e.OnStart=3]="OnStart",e[e.OnCredit=4]="OnCredit",e[e.OnFinish=5]="OnFinish",e[e.OnClose=6]="OnClose",e[e.OnError=7]="OnError",e[e.Adblock=8]="Adblock",e[e.LimitReached=9]="LimitReached"}(i||(i={}))}});
//# sourceMappingURL=pages.video-watch-27f04e006c587c75afcc66d321b2dd16.js.map